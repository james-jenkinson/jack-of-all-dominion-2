(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=r(u);fetch(u.href,c)}})();const ss=(i,n)=>i===n,$n=Symbol("solid-proxy"),as=Symbol("solid-track"),Fn={equals:ss};let to=lo;const st=1,Bn=2,no={owned:null,cleanups:null,context:null,owner:null};var oe=null;let Tr=null,us=null,he=null,Ce=null,Ge=null,Wn=0;function Yt(i,n){const r=he,o=oe,u=i.length===0,c=n===void 0?o:n,f=u?no:{owned:null,cleanups:null,context:c?c.context:null,owner:c},d=u?i:()=>i(()=>Te(()=>Yn(f)));oe=f,he=null;try{return vt(d,!0)}finally{he=r,oe=o}}function qe(i,n){n=n?Object.assign({},Fn,n):Fn;const r={value:i,observers:null,observerSlots:null,comparator:n.equals||void 0},o=u=>(typeof u=="function"&&(u=u(r.value)),uo(r,u));return[ao.bind(r),o]}function Ke(i,n,r){const o=Wr(i,n,!1,st);rn(o)}function Ni(i,n,r){to=hs;const o=Wr(i,n,!1,st);o.user=!0,Ge?Ge.push(o):rn(o)}function ve(i,n,r){r=r?Object.assign({},Fn,r):Fn;const o=Wr(i,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=r.equals||void 0,rn(o),ao.bind(o)}function Te(i){if(he===null)return i();const n=he;he=null;try{return i()}finally{he=n}}function ro(i,n,r){const o=Array.isArray(i);let u;return c=>{let f;if(o){f=Array(i.length);for(let g=0;g<i.length;g++)f[g]=i[g]()}else f=i();const d=Te(()=>n(f,u,c));return u=f,d}}function tn(i){return oe===null||(oe.cleanups===null?oe.cleanups=[i]:oe.cleanups.push(i)),i}function io(){return oe}function oo(i,n){const r=oe,o=he;oe=i,he=null;try{return vt(n,!0)}catch(u){Jr(u)}finally{oe=r,he=o}}function ls(i){const n=he,r=oe;return Promise.resolve().then(()=>{he=n,oe=r;let o;return vt(i,!1),he=oe=null,o?o.done:void 0})}function Jn(i,n){const r=Symbol("context");return{id:r,Provider:ps(r),defaultValue:i}}function nn(i){return oe&&oe.context&&oe.context[i.id]!==void 0?oe.context[i.id]:i.defaultValue}function so(i){const n=ve(i),r=ve(()=>Br(n()));return r.toArray=()=>{const o=r();return Array.isArray(o)?o:o!=null?[o]:[]},r}function ao(){if(this.sources&&this.state)if(this.state===st)rn(this);else{const i=Ce;Ce=null,vt(()=>qn(this),!1),Ce=i}if(he){const i=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(i)):(he.sources=[this],he.sourceSlots=[i]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function uo(i,n,r){let o=i.value;return(!i.comparator||!i.comparator(o,n))&&(i.value=n,i.observers&&i.observers.length&&vt(()=>{for(let u=0;u<i.observers.length;u+=1){const c=i.observers[u],f=Tr&&Tr.running;f&&Tr.disposed.has(c),(f?!c.tState:!c.state)&&(c.pure?Ce.push(c):Ge.push(c),c.observers&&co(c)),f||(c.state=st)}if(Ce.length>1e6)throw Ce=[],new Error},!1)),n}function rn(i){if(!i.fn)return;Yn(i);const n=Wn;cs(i,i.value,n)}function cs(i,n,r){let o;const u=oe,c=he;he=oe=i;try{o=i.fn(n)}catch(f){return i.pure&&(i.state=st,i.owned&&i.owned.forEach(Yn),i.owned=null),i.updatedAt=r+1,Jr(f)}finally{he=c,oe=u}(!i.updatedAt||i.updatedAt<=r)&&(i.updatedAt!=null&&"observers"in i?uo(i,o):i.value=o,i.updatedAt=r)}function Wr(i,n,r,o=st,u){const c={fn:i,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:oe,context:oe?oe.context:null,pure:r};return oe===null||oe!==no&&(oe.owned?oe.owned.push(c):oe.owned=[c]),c}function Mn(i){if(i.state===0)return;if(i.state===Bn)return qn(i);if(i.suspense&&Te(i.suspense.inFallback))return i.suspense.effects.push(i);const n=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<Wn);)i.state&&n.push(i);for(let r=n.length-1;r>=0;r--)if(i=n[r],i.state===st)rn(i);else if(i.state===Bn){const o=Ce;Ce=null,vt(()=>qn(i,n[0]),!1),Ce=o}}function vt(i,n){if(Ce)return i();let r=!1;n||(Ce=[]),Ge?r=!0:Ge=[],Wn++;try{const o=i();return fs(r),o}catch(o){r||(Ge=null),Ce=null,Jr(o)}}function fs(i){if(Ce&&(lo(Ce),Ce=null),i)return;const n=Ge;Ge=null,n.length&&vt(()=>to(n),!1)}function lo(i){for(let n=0;n<i.length;n++)Mn(i[n])}function hs(i){let n,r=0;for(n=0;n<i.length;n++){const o=i[n];o.user?i[r++]=o:Mn(o)}for(n=0;n<r;n++)Mn(i[n])}function qn(i,n){i.state=0;for(let r=0;r<i.sources.length;r+=1){const o=i.sources[r];if(o.sources){const u=o.state;u===st?o!==n&&(!o.updatedAt||o.updatedAt<Wn)&&Mn(o):u===Bn&&qn(o,n)}}}function co(i){for(let n=0;n<i.observers.length;n+=1){const r=i.observers[n];r.state||(r.state=Bn,r.pure?Ce.push(r):Ge.push(r),r.observers&&co(r))}}function Yn(i){let n;if(i.sources)for(;i.sources.length;){const r=i.sources.pop(),o=i.sourceSlots.pop(),u=r.observers;if(u&&u.length){const c=u.pop(),f=r.observerSlots.pop();o<u.length&&(c.sourceSlots[f]=o,u[o]=c,r.observerSlots[o]=f)}}if(i.owned){for(n=i.owned.length-1;n>=0;n--)Yn(i.owned[n]);i.owned=null}if(i.cleanups){for(n=i.cleanups.length-1;n>=0;n--)i.cleanups[n]();i.cleanups=null}i.state=0}function ds(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function Jr(i,n=oe){throw ds(i)}function Br(i){if(typeof i=="function"&&!i.length)return Br(i());if(Array.isArray(i)){const n=[];for(let r=0;r<i.length;r++){const o=Br(i[r]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return i}function ps(i,n){return function(o){let u;return Ke(()=>u=Te(()=>(oe.context={...oe.context,[i]:o.value},so(()=>o.children))),void 0),u}}const gs=Symbol("fallback");function Ki(i){for(let n=0;n<i.length;n++)i[n]()}function ms(i,n,r={}){let o=[],u=[],c=[],f=0,d=n.length>1?[]:null;return tn(()=>Ki(c)),()=>{let g=i()||[],b,O;return g[as],Te(()=>{let P=g.length,U,M,I,V,Y,z,ce,J,se;if(P===0)f!==0&&(Ki(c),c=[],o=[],u=[],f=0,d&&(d=[])),r.fallback&&(o=[gs],u[0]=Yt(ue=>(c[0]=ue,r.fallback())),f=1);else if(f===0){for(u=new Array(P),O=0;O<P;O++)o[O]=g[O],u[O]=Yt(j);f=P}else{for(I=new Array(P),V=new Array(P),d&&(Y=new Array(P)),z=0,ce=Math.min(f,P);z<ce&&o[z]===g[z];z++);for(ce=f-1,J=P-1;ce>=z&&J>=z&&o[ce]===g[J];ce--,J--)I[J]=u[ce],V[J]=c[ce],d&&(Y[J]=d[ce]);for(U=new Map,M=new Array(J+1),O=J;O>=z;O--)se=g[O],b=U.get(se),M[O]=b===void 0?-1:b,U.set(se,O);for(b=z;b<=ce;b++)se=o[b],O=U.get(se),O!==void 0&&O!==-1?(I[O]=u[b],V[O]=c[b],d&&(Y[O]=d[b]),O=M[O],U.set(se,O)):c[b]();for(O=z;O<P;O++)O in I?(u[O]=I[O],c[O]=V[O],d&&(d[O]=Y[O],d[O](O))):u[O]=Yt(j);u=u.slice(0,f=P),o=g.slice(0)}return u});function j(P){if(c[O]=P,d){const[U,M]=qe(O);return d[O]=M,n(g[O],U)}return n(g[O])}}}function we(i,n){return Te(()=>i(n||{}))}function Kn(){return!0}const Mr={get(i,n,r){return n===$n?r:i.get(n)},has(i,n){return n===$n?!0:i.has(n)},set:Kn,deleteProperty:Kn,getOwnPropertyDescriptor(i,n){return{configurable:!0,enumerable:!0,get(){return i.get(n)},set:Kn,deleteProperty:Kn}},ownKeys(i){return i.keys()}};function Ir(i){return(i=typeof i=="function"?i():i)?i:{}}function ys(){for(let i=0,n=this.length;i<n;++i){const r=this[i]();if(r!==void 0)return r}}function Ti(...i){let n=!1;for(let f=0;f<i.length;f++){const d=i[f];n=n||!!d&&$n in d,i[f]=typeof d=="function"?(n=!0,ve(d)):d}if(n)return new Proxy({get(f){for(let d=i.length-1;d>=0;d--){const g=Ir(i[d])[f];if(g!==void 0)return g}},has(f){for(let d=i.length-1;d>=0;d--)if(f in Ir(i[d]))return!0;return!1},keys(){const f=[];for(let d=0;d<i.length;d++)f.push(...Object.keys(Ir(i[d])));return[...new Set(f)]}},Mr);const r={},o=Object.create(null);for(let f=i.length-1;f>=0;f--){const d=i[f];if(!d)continue;const g=Object.getOwnPropertyNames(d);for(let b=g.length-1;b>=0;b--){const O=g[b];if(O==="__proto__"||O==="constructor")continue;const j=Object.getOwnPropertyDescriptor(d,O);if(!o[O])o[O]=j.get?{enumerable:!0,configurable:!0,get:ys.bind(r[O]=[j.get.bind(d)])}:j.value!==void 0?j:void 0;else{const P=r[O];P&&(j.get?P.push(j.get.bind(d)):j.value!==void 0&&P.push(()=>j.value))}}}const u={},c=Object.keys(o);for(let f=c.length-1;f>=0;f--){const d=c[f],g=o[d];g&&g.get?Object.defineProperty(u,d,g):u[d]=g?g.value:void 0}return u}function vs(i,...n){if($n in i){const u=new Set(n.length>1?n.flat():n[0]),c=n.map(f=>new Proxy({get(d){return f.includes(d)?i[d]:void 0},has(d){return f.includes(d)&&d in i},keys(){return f.filter(d=>d in i)}},Mr));return c.push(new Proxy({get(f){return u.has(f)?void 0:i[f]},has(f){return u.has(f)?!1:f in i},keys(){return Object.keys(i).filter(f=>!u.has(f))}},Mr)),c}const r={},o=n.map(()=>({}));for(const u of Object.getOwnPropertyNames(i)){const c=Object.getOwnPropertyDescriptor(i,u),f=!c.get&&!c.set&&c.enumerable&&c.writable&&c.configurable;let d=!1,g=0;for(const b of n)b.includes(u)&&(d=!0,f?o[g][u]=c.value:Object.defineProperty(o[g],u,c)),++g;d||(f?r[u]=c.value:Object.defineProperty(r,u,c))}return[...o,r]}const bs=i=>`Stale read from <${i}>.`;function ws(i){const n="fallback"in i&&{fallback:()=>i.fallback};return ve(ms(()=>i.each,i.children,n||void 0))}function Yr(i){const n=i.keyed,r=ve(()=>i.when,void 0,{equals:(o,u)=>n?o===u:!o==!u});return ve(()=>{const o=r();if(o){const u=i.children;return typeof u=="function"&&u.length>0?Te(()=>u(n?o:()=>{if(!Te(r))throw bs("Show");return i.when})):u}return i.fallback},void 0,void 0)}const xs=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Ss=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...xs]),_s=new Set(["innerHTML","textContent","innerText","children"]),Os=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ks=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Ps(i,n){const r=ks[i];return typeof r=="object"?r[n]?r.$:void 0:r}const Cs=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Es(i,n,r){let o=r.length,u=n.length,c=o,f=0,d=0,g=n[u-1].nextSibling,b=null;for(;f<u||d<c;){if(n[f]===r[d]){f++,d++;continue}for(;n[u-1]===r[c-1];)u--,c--;if(u===f){const O=c<o?d?r[d-1].nextSibling:r[c-d]:g;for(;d<c;)i.insertBefore(r[d++],O)}else if(c===d)for(;f<u;)(!b||!b.has(n[f]))&&n[f].remove(),f++;else if(n[f]===r[c-1]&&r[d]===n[u-1]){const O=n[--u].nextSibling;i.insertBefore(r[d++],n[f++].nextSibling),i.insertBefore(r[--c],O),n[u]=r[c]}else{if(!b){b=new Map;let j=d;for(;j<c;)b.set(r[j],j++)}const O=b.get(n[f]);if(O!=null)if(d<O&&O<c){let j=f,P=1,U;for(;++j<u&&j<c&&!((U=b.get(n[j]))==null||U!==O+P);)P++;if(P>O-d){const M=n[f];for(;d<O;)i.insertBefore(r[d++],M)}else i.replaceChild(r[d++],n[f++])}else f++;else n[f++].remove()}}}const Ii="_$DX_DELEGATE";function As(i,n,r,o={}){let u;return Yt(c=>{u=c,n===document?i():Ye(n,i(),n.firstChild?null:void 0,r)},o.owner),()=>{u(),n.textContent=""}}function Qe(i,n,r){let o;const u=()=>{const f=document.createElement("template");return f.innerHTML=i,f.content.firstChild},c=()=>(o||(o=u())).cloneNode(!0);return c.cloneNode=c,c}function Gr(i,n=window.document){const r=n[Ii]||(n[Ii]=new Set);for(let o=0,u=i.length;o<u;o++){const c=i[o];r.has(c)||(r.add(c),n.addEventListener(c,Is))}}function Lt(i,n,r){r==null?i.removeAttribute(n):i.setAttribute(n,r)}function Gt(i,n){n==null?i.removeAttribute("class"):i.className=n}function Rs(i,n,r,o){if(o)Array.isArray(r)?(i[`$$${n}`]=r[0],i[`$$${n}Data`]=r[1]):i[`$$${n}`]=r;else if(Array.isArray(r)){const u=r[0];i.addEventListener(n,r[0]=c=>u.call(i,r[1],c))}else i.addEventListener(n,r)}function fo(i,n,r={}){const o=Object.keys(n||{}),u=Object.keys(r);let c,f;for(c=0,f=u.length;c<f;c++){const d=u[c];!d||d==="undefined"||n[d]||(Di(i,d,!1),delete r[d])}for(c=0,f=o.length;c<f;c++){const d=o[c],g=!!n[d];!d||d==="undefined"||r[d]===g||!g||(Di(i,d,!0),r[d]=g)}return r}function Ls(i,n,r){if(!n)return r?Lt(i,"style"):n;const o=i.style;if(typeof n=="string")return o.cssText=n;typeof r=="string"&&(o.cssText=r=void 0),r||(r={}),n||(n={});let u,c;for(c in r)n[c]==null&&o.removeProperty(c),delete r[c];for(c in n)u=n[c],u!==r[c]&&(o.setProperty(c,u),r[c]=u);return r}function js(i,n={},r,o){const u={};return Ke(()=>u.children=Xt(i,n.children,u.children)),Ke(()=>typeof n.ref=="function"?Ns(n.ref,i):n.ref=i),Ke(()=>Ks(i,n,r,!0,u,!0)),u}function Ns(i,n,r){return Te(()=>i(n,r))}function Ye(i,n,r,o){if(r!==void 0&&!o&&(o=[]),typeof n!="function")return Xt(i,n,o,r);Ke(u=>Xt(i,n(),u,r),o)}function Ks(i,n,r,o,u={},c=!1){n||(n={});for(const f in u)if(!(f in n)){if(f==="children")continue;u[f]=$i(i,f,null,u[f],r,c)}for(const f in n){if(f==="children")continue;const d=n[f];u[f]=$i(i,f,d,u[f],r,c)}}function Ts(i){return i.toLowerCase().replace(/-([a-z])/g,(n,r)=>r.toUpperCase())}function Di(i,n,r){const o=n.trim().split(/\s+/);for(let u=0,c=o.length;u<c;u++)i.classList.toggle(o[u],r)}function $i(i,n,r,o,u,c){let f,d,g,b,O;if(n==="style")return Ls(i,r,o);if(n==="classList")return fo(i,r,o);if(r===o)return o;if(n==="ref")c||r(i);else if(n.slice(0,3)==="on:"){const j=n.slice(3);o&&i.removeEventListener(j,o),r&&i.addEventListener(j,r)}else if(n.slice(0,10)==="oncapture:"){const j=n.slice(10);o&&i.removeEventListener(j,o,!0),r&&i.addEventListener(j,r,!0)}else if(n.slice(0,2)==="on"){const j=n.slice(2).toLowerCase(),P=Cs.has(j);if(!P&&o){const U=Array.isArray(o)?o[0]:o;i.removeEventListener(j,U)}(P||r)&&(Rs(i,j,r,P),P&&Gr([j]))}else n.slice(0,5)==="attr:"?Lt(i,n.slice(5),r):(O=n.slice(0,5)==="prop:")||(g=_s.has(n))||(b=Ps(n,i.tagName))||(d=Ss.has(n))||(f=i.nodeName.includes("-"))?(O&&(n=n.slice(5),d=!0),n==="class"||n==="className"?Gt(i,r):f&&!d&&!g?i[Ts(n)]=r:i[b||n]=r):Lt(i,Os[n]||n,r);return r}function Is(i){const n=`$$${i.type}`;let r=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==r&&Object.defineProperty(i,"target",{configurable:!0,value:r}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return r||document}});r;){const o=r[n];if(o&&!r.disabled){const u=r[`${n}Data`];if(u!==void 0?o.call(r,u,i):o.call(r,i),i.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function Xt(i,n,r,o,u){for(;typeof r=="function";)r=r();if(n===r)return r;const c=typeof n,f=o!==void 0;if(i=f&&r[0]&&r[0].parentNode||i,c==="string"||c==="number")if(c==="number"&&(n=n.toString()),f){let d=r[0];d&&d.nodeType===3?d.data!==n&&(d.data=n):d=document.createTextNode(n),r=Et(i,r,o,d)}else r!==""&&typeof r=="string"?r=i.firstChild.data=n:r=i.textContent=n;else if(n==null||c==="boolean")r=Et(i,r,o);else{if(c==="function")return Ke(()=>{let d=n();for(;typeof d=="function";)d=d();r=Xt(i,d,r,o)}),()=>r;if(Array.isArray(n)){const d=[],g=r&&Array.isArray(r);if(qr(d,n,r,u))return Ke(()=>r=Xt(i,d,r,o,!0)),()=>r;if(d.length===0){if(r=Et(i,r,o),f)return r}else g?r.length===0?Fi(i,d,o):Es(i,r,d):(r&&Et(i),Fi(i,d));r=d}else if(n.nodeType){if(Array.isArray(r)){if(f)return r=Et(i,r,o,n);Et(i,r,null,n)}else r==null||r===""||!i.firstChild?i.appendChild(n):i.replaceChild(n,i.firstChild);r=n}}return r}function qr(i,n,r,o){let u=!1;for(let c=0,f=n.length;c<f;c++){let d=n[c],g=r&&r[i.length],b;if(!(d==null||d===!0||d===!1))if((b=typeof d)=="object"&&d.nodeType)i.push(d);else if(Array.isArray(d))u=qr(i,d,g)||u;else if(b==="function")if(o){for(;typeof d=="function";)d=d();u=qr(i,Array.isArray(d)?d:[d],Array.isArray(g)?g:[g])||u}else i.push(d),u=!0;else{const O=String(d);g&&g.nodeType===3&&g.data===O?i.push(g):i.push(document.createTextNode(O))}}return u}function Fi(i,n,r=null){for(let o=0,u=n.length;o<u;o++)i.insertBefore(n[o],r)}function Et(i,n,r,o){if(r===void 0)return i.textContent="";const u=o||document.createTextNode("");if(n.length){let c=!1;for(let f=n.length-1;f>=0;f--){const d=n[f];if(u!==d){const g=d.parentNode===i;!c&&!f?g?i.replaceChild(u,d):i.insertBefore(u,r):g&&d.remove()}else c=!0}}else i.insertBefore(u,r);return[u]}const Ds=!1,$s={Home:"Home","Open navigation menu":"Open navigation menu","Close navigation menu":"Close navigation menu","Set selection":"Set selection"},Bi={en:$s};function ho(){let i=new Set;function n(u){return i.add(u),()=>i.delete(u)}let r=!1;function o(u,c){if(r)return!(r=!1);const f={to:u,options:c,defaultPrevented:!1,preventDefault:()=>f.defaultPrevented=!0};for(const d of i)d.listener({...f,from:d.location,retry:g=>{g&&(r=!0),d.navigate(u,{...c,resolve:!1})}});return!f.defaultPrevented}return{subscribe:n,confirm:o}}let Ur;function Qr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ur=window.history.state._depth}Qr();function Fs(i){return{...i,_depth:window.history.state&&window.history.state._depth}}function Bs(i,n){let r=!1;return()=>{const o=Ur;Qr();const u=o==null?null:Ur-o;if(r){r=!1;return}u&&n(u)?(r=!0,window.history.go(-u)):i()}}const Ms=/^(?:[a-z0-9]+:)?\/\//i,qs=/^\/+|(\/)\/+$/g,po="http://sr";function yt(i,n=!1){const r=i.replace(qs,"$1");return r?n||/^[?#]/.test(r)?r:"/"+r:""}function Dn(i,n,r){if(Ms.test(n))return;const o=yt(i),u=r&&yt(r);let c="";return!u||n.startsWith("/")?c=o:u.toLowerCase().indexOf(o.toLowerCase())!==0?c=o+u:c=u,(c||"/")+yt(n,!c)}function Us(i,n){if(i==null)throw new Error(n);return i}function Vs(i,n){return yt(i).replace(/\/*(\*.*)?$/g,"")+yt(n)}function go(i){const n={};return i.searchParams.forEach((r,o)=>{n[o]=r}),n}function zs(i,n,r){const[o,u]=i.split("/*",2),c=o.split("/").filter(Boolean),f=c.length;return d=>{const g=d.split("/").filter(Boolean),b=g.length-f;if(b<0||b>0&&u===void 0&&!n)return null;const O={path:f?"":"/",params:{}},j=P=>r===void 0?void 0:r[P];for(let P=0;P<f;P++){const U=c[P],M=g[P],I=U[0]===":",V=I?U.slice(1):U;if(I&&Dr(M,j(V)))O.params[V]=M;else if(I||!Dr(M,U))return null;O.path+=`/${M}`}if(u){const P=b?g.slice(-b).join("/"):"";if(Dr(P,j(u)))O.params[u]=P;else return null}return O}}function Dr(i,n){const r=o=>o.localeCompare(i,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?r(n):typeof n=="function"?n(i):Array.isArray(n)?n.some(r):n instanceof RegExp?n.test(i):!1}function Hs(i){const[n,r]=i.pattern.split("/*",2),o=n.split("/").filter(Boolean);return o.reduce((u,c)=>u+(c.startsWith(":")?2:3),o.length-(r===void 0?0:1))}function mo(i){const n=new Map,r=io();return new Proxy({},{get(o,u){return n.has(u)||oo(r,()=>n.set(u,ve(()=>i()[u]))),n.get(u)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function yo(i){let n=/(\/?\:[^\/]+)\?/.exec(i);if(!n)return[i];let r=i.slice(0,n.index),o=i.slice(n.index+n[0].length);const u=[r,r+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(o);)u.push(r+=n[1]),o=o.slice(n[0].length);return yo(o).reduce((c,f)=>[...c,...u.map(d=>d+f)],[])}const Ws=100,vo=Jn(),Xr=Jn(),on=()=>Us(nn(vo),"<A> and 'use' router primitives can be only used inside a Route."),Js=()=>nn(Xr)||on().base,Ys=i=>{const n=Js();return ve(()=>n.resolvePath(i()))},Gs=i=>{const n=on();return ve(()=>{const r=i();return r!==void 0?n.renderPath(r):r})},Qs=()=>on().navigatorFactory(),bo=()=>on().location,Xs=i=>{const n=on().beforeLeave.subscribe({listener:i,location:bo(),navigate:Qs()});tn(n)};function Zs(i,n=""){const{component:r,load:o,children:u,info:c}=i,f=!u||Array.isArray(u)&&!u.length,d={key:i,component:r,load:o,info:c};return wo(i.path).reduce((g,b)=>{for(const O of yo(b)){const j=Vs(n,O);let P=f?j:j.split("/*",1)[0];P=P.split("/").map(U=>U.startsWith(":")||U.startsWith("*")?U:encodeURIComponent(U)).join("/"),g.push({...d,originalPath:b,pattern:P,matcher:zs(P,!f,i.matchFilters)})}return g},[])}function ea(i,n=0){return{routes:i,score:Hs(i[i.length-1])*1e4-n,matcher(r){const o=[];for(let u=i.length-1;u>=0;u--){const c=i[u],f=c.matcher(r);if(!f)return null;o.unshift({...f,route:c})}return o}}}function wo(i){return Array.isArray(i)?i:[i]}function xo(i,n="",r=[],o=[]){const u=wo(i);for(let c=0,f=u.length;c<f;c++){const d=u[c];if(d&&typeof d=="object"){d.hasOwnProperty("path")||(d.path="");const g=Zs(d,n);for(const b of g){r.push(b);const O=Array.isArray(d.children)&&d.children.length===0;if(d.children&&!O)xo(d.children,b.pattern,r,o);else{const j=ea([...r],o.length);o.push(j)}r.pop()}}}return r.length?o:o.sort((c,f)=>f.score-c.score)}function $r(i,n){for(let r=0,o=i.length;r<o;r++){const u=i[r].matcher(n);if(u)return u}return[]}function ta(i,n){const r=new URL(po),o=ve(g=>{const b=i();try{return new URL(b,r)}catch{return console.error(`Invalid path ${b}`),g}},r,{equals:(g,b)=>g.href===b.href}),u=ve(()=>o().pathname),c=ve(()=>o().search,!0),f=ve(()=>o().hash),d=()=>"";return{get pathname(){return u()},get search(){return c()},get hash(){return f()},get state(){return n()},get key(){return d()},query:mo(ro(c,()=>go(o())))}}let Je;function na(){return Je}function ra(i,n,r,o={}){const{signal:[u,c],utils:f={}}=i,d=f.parsePath||(te=>te),g=f.renderPath||(te=>te),b=f.beforeLeave||ho(),O=Dn("",o.base||"");if(O===void 0)throw new Error(`${O} is not a valid base path`);O&&!u().value&&c({value:O,replace:!0,scroll:!1});const[j,P]=qe(!1),U=async te=>{P(!0);try{await ls(te)}finally{P(!1)}},[M,I]=qe(u().value),[V,Y]=qe(u().state),z=ta(M,V),ce=[],J=qe([]),se=ve(()=>typeof o.transformUrl=="function"?$r(n(),o.transformUrl(z.pathname)):$r(n(),z.pathname)),ue=mo(()=>{const te=se(),re={};for(let be=0;be<te.length;be++)Object.assign(re,te[be].params);return re}),ne={pattern:O,path:()=>O,outlet:()=>null,resolvePath(te){return Dn(O,te)}};return Ke(()=>{const{value:te,state:re}=u();Te(()=>{U(()=>{Je="native",te!==M()&&I(te),Y(re),J[1]([])}).then(()=>{Je=void 0})})}),{base:ne,location:z,params:ue,isRouting:j,renderPath:g,parsePath:d,navigatorFactory:jt,matches:se,beforeLeave:b,preloadRoute:$e,singleFlight:o.singleFlight===void 0?!0:o.singleFlight,submissions:J};function Ve(te,re,be){Te(()=>{if(typeof re=="number"){re&&(f.go?f.go(re):console.warn("Router integration does not support relative routing"));return}const{replace:Re,resolve:je,scroll:Ie,state:fe}={replace:!1,resolve:!0,scroll:!0,...be},ge=je?te.resolvePath(re):Dn("",re);if(ge===void 0)throw new Error(`Path '${re}' is not a routable path`);if(ce.length>=Ws)throw new Error("Too many redirects");const xe=M();if((ge!==xe||fe!==V())&&!Ds){if(b.confirm(ge,be)){const Xe=ce.push({value:xe,replace:Re,scroll:Ie,state:V()});U(()=>{Je="navigate",I(ge),Y(fe),J[1]([])}).then(()=>{ce.length===Xe&&(Je=void 0,at({value:ge,state:fe}))})}}})}function jt(te){return te=te||nn(Xr)||ne,(re,be)=>Ve(te,re,be)}function at(te){const re=ce[0];re&&((te.value!==re.value||te.state!==re.state)&&c({...te,replace:re.replace,scroll:re.scroll}),ce.length=0)}function $e(te,re){const be=$r(n(),te.pathname),Re=Je;Je="preload";for(let je in be){const{route:Ie,params:fe}=be[je];Ie.component&&Ie.component.preload&&Ie.component.preload();const{load:ge}=Ie;re&&ge&&oo(r(),()=>ge({params:fe,location:{pathname:te.pathname,search:te.search,hash:te.hash,query:go(te),state:null,key:""},intent:"preload"}))}Je=Re}}function ia(i,n,r,o){const{base:u,location:c,params:f}=i,{pattern:d,component:g,load:b}=o().route,O=ve(()=>o().path);g&&g.preload&&g.preload();const j=b?b({params:f,location:c,intent:Je||"initial"}):void 0;return{parent:n,pattern:d,path:O,outlet:()=>g?we(g,{params:f,location:c,data:j,get children(){return r()}}):r(),resolvePath(U){return Dn(u.path(),U,O())}}}const oa=i=>n=>{const{base:r}=n,o=so(()=>n.children),u=ve(()=>xo(o(),n.base||""));let c;const f=ra(i,u,()=>c,{base:r,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return i.create&&i.create(f),we(vo.Provider,{value:f,get children(){return we(sa,{routerState:f,get root(){return n.root},get load(){return n.rootLoad},get children(){return[ve(()=>(c=io())&&null),we(aa,{routerState:f,get branches(){return u()}})]}})}})};function sa(i){const n=i.routerState.location,r=i.routerState.params,o=ve(()=>i.load&&Te(()=>{i.load({params:r,location:n,intent:na()||"initial"})}));return we(Yr,{get when(){return i.root},keyed:!0,get fallback(){return i.children},children:u=>we(u,{params:r,location:n,get data(){return o()},get children(){return i.children}})})}function aa(i){const n=[];let r;const o=ve(ro(i.routerState.matches,(u,c,f)=>{let d=c&&u.length===c.length;const g=[];for(let b=0,O=u.length;b<O;b++){const j=c&&c[b],P=u[b];f&&j&&P.route.key===j.route.key?g[b]=f[b]:(d=!1,n[b]&&n[b](),Yt(U=>{n[b]=U,g[b]=ia(i.routerState,g[b-1]||i.routerState.base,Mi(()=>o()[b+1]),()=>i.routerState.matches()[b])}))}return n.splice(u.length).forEach(b=>b()),f&&d?f:(r=g[0],g)}));return Mi(()=>o()&&r)()}const Mi=i=>()=>we(Yr,{get when(){return i()},keyed:!0,children:n=>we(Xr.Provider,{value:n,get children(){return n.outlet()}})});function ua([i,n],r,o){return[i,o?u=>n(o(u)):n]}function la(i){if(i==="#")return null;try{return document.querySelector(i)}catch{return null}}function ca(i){let n=!1;const r=u=>typeof u=="string"?{value:u}:u,o=ua(qe(r(i.get()),{equals:(u,c)=>u.value===c.value&&u.state===c.state}),void 0,u=>(!n&&i.set(u),u));return i.init&&tn(i.init((u=i.get())=>{n=!0,o[1](r(u)),n=!1})),oa({signal:o,create:i.create,utils:i.utils})}function fa(i,n,r){return i.addEventListener(n,r),()=>i.removeEventListener(n,r)}function ha(i,n){const r=la(`#${i}`);r?r.scrollIntoView():n&&window.scrollTo(0,0)}const da=new Map;function pa(i=!0,n=!1,r="/_server",o){return u=>{const c=u.base.path(),f=u.navigatorFactory(u.base);let d={};function g(I){return I.namespaceURI==="http://www.w3.org/2000/svg"}function b(I){if(I.defaultPrevented||I.button!==0||I.metaKey||I.altKey||I.ctrlKey||I.shiftKey)return;const V=I.composedPath().find(ue=>ue instanceof Node&&ue.nodeName.toUpperCase()==="A");if(!V||n&&!V.hasAttribute("link"))return;const Y=g(V),z=Y?V.href.baseVal:V.href;if((Y?V.target.baseVal:V.target)||!z&&!V.hasAttribute("state"))return;const J=(V.getAttribute("rel")||"").split(/\s+/);if(V.hasAttribute("download")||J&&J.includes("external"))return;const se=Y?new URL(z,document.baseURI):new URL(z);if(!(se.origin!==window.location.origin||c&&se.pathname&&!se.pathname.toLowerCase().startsWith(c.toLowerCase())))return[V,se]}function O(I){const V=b(I);if(!V)return;const[Y,z]=V,ce=u.parsePath(z.pathname+z.search+z.hash),J=Y.getAttribute("state");I.preventDefault(),f(ce,{resolve:!1,replace:Y.hasAttribute("replace"),scroll:!Y.hasAttribute("noscroll"),state:J&&JSON.parse(J)})}function j(I){const V=b(I);if(!V)return;const[Y,z]=V;typeof o=="function"&&(z.pathname=o(z.pathname)),d[z.pathname]||u.preloadRoute(z,Y.getAttribute("preload")!=="false")}function P(I){const V=b(I);if(!V)return;const[Y,z]=V;typeof o=="function"&&(z.pathname=o(z.pathname)),!d[z.pathname]&&(d[z.pathname]=setTimeout(()=>{u.preloadRoute(z,Y.getAttribute("preload")!=="false"),delete d[z.pathname]},200))}function U(I){const V=b(I);if(!V)return;const[,Y]=V;typeof o=="function"&&(Y.pathname=o(Y.pathname)),d[Y.pathname]&&(clearTimeout(d[Y.pathname]),delete d[Y.pathname])}function M(I){if(I.defaultPrevented)return;let V=I.submitter&&I.submitter.hasAttribute("formaction")?I.submitter.getAttribute("formaction"):I.target.getAttribute("action");if(!V)return;if(!V.startsWith("https://action/")){const z=new URL(V,po);if(V=u.parsePath(z.pathname+z.search),!V.startsWith(r))return}if(I.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const Y=da.get(V);if(Y){I.preventDefault();const z=new FormData(I.target);I.submitter&&I.submitter.name&&z.append(I.submitter.name,I.submitter.value),Y.call({r:u,f:I.target},z)}}Gr(["click","submit"]),document.addEventListener("click",O),i&&(document.addEventListener("mouseover",P),document.addEventListener("mouseout",U),document.addEventListener("focusin",j),document.addEventListener("touchstart",j)),document.addEventListener("submit",M),tn(()=>{document.removeEventListener("click",O),i&&(document.removeEventListener("mouseover",P),document.removeEventListener("mouseout",U),document.removeEventListener("focusin",j),document.removeEventListener("touchstart",j)),document.removeEventListener("submit",M)})}}function ga(i){const n=()=>{const o=window.location.pathname+window.location.search;return{value:i.transformUrl?i.transformUrl(o)+window.location.hash:o+window.location.hash,state:window.history.state}},r=ho();return ca({get:n,set({value:o,replace:u,scroll:c,state:f}){u?window.history.replaceState(Fs(f),"",o):window.history.pushState(f,"",o),ha(window.location.hash.slice(1),c),Qr()},init:o=>fa(window,"popstate",Bs(o,u=>{if(u&&u<0)return!r.confirm(u);{const c=n();return!r.confirm(c.value,{state:c.state})}})),create:pa(i.preload,i.explicitLinks,i.actionBase,i.transformUrl),utils:{go:o=>window.history.go(o),beforeLeave:r}})(i)}var ma=Qe("<a>");function qi(i){i=Ti({inactiveClass:"inactive",activeClass:"active"},i);const[,n]=vs(i,["href","state","class","activeClass","inactiveClass","end"]),r=Ys(()=>i.href),o=Gs(r),u=bo(),c=ve(()=>{const f=r();if(f===void 0)return[!1,!1];const d=yt(f.split(/[?#]/,1)[0]).toLowerCase(),g=yt(u.pathname).toLowerCase();return[i.end?d===g:g.startsWith(d),d===g]});return(()=>{var f=ma();return js(f,Ti(n,{get href(){return o()||i.href},get state(){return JSON.stringify(i.state)},get classList(){return{...i.class&&{[i.class]:!0},[i.inactiveClass]:!c()[0],[i.activeClass]:c()[0],...n.classList}},link:"",get"aria-current"(){return c()[1]?"page":void 0}}),!1),f})()}const ya={t:i=>i},So=Jn(ya);function va(i){return we(So.Provider,{get value(){return{t:i.t}},get children(){return i.children}})}function _o(){return nn(So)}const ba="_nav_1j5nq_5",wa="_backdrop_1j5nq_30",Tn={"menu-button":"_menu-button_1j5nq_1",nav:ba,"navigation-items":"_navigation-items_1j5nq_22",backdrop:wa};var xa=Qe('<nav><button class="button-icon close-button"></button><div>'),Sa=Qe("<div>"),_a=Qe("<header><button>");function Oa(){const{t:i}=_o(),[n,r]=qe(!1),[o,u]=qe();Ni(()=>{var g;n()&&((g=o())==null||g.focus())});const c=()=>{r(d=>!d)},f=()=>{r(!1)};return Ni(()=>{const d=g=>{g.key==="Escape"&&f()};document.addEventListener("keydown",d),tn(()=>{document.removeEventListener("keydown",d)})}),Xs(()=>{f()}),(()=>{var d=_a(),g=d.firstChild;return g.$$click=c,Ye(g,()=>i("Open navigation menu")),Ye(d,we(Yr,{get when(){return n()},get children(){return[(()=>{var b=xa(),O=b.firstChild,j=O.nextSibling;return O.$$click=f,Ye(O,()=>i("Close navigation menu")),Ye(j,we(qi,{href:"/",ref:u,get children(){return i("Set selection")}}),null),Ye(j,we(qi,{href:"/page-2",children:"Page 2"}),null),Ke(P=>{var U=Tn.nav,M=Tn["navigation-items"];return U!==P.e&&Gt(b,P.e=U),M!==P.t&&Gt(j,P.t=M),P},{e:void 0,t:void 0}),b})(),(()=>{var b=Sa();return b.$$click=f,Ke(O=>fo(b,{[Tn.backdrop]:n()},O)),b})()]}}),null),Ke(b=>{var O=`button-icon ${Tn["menu-button"]}`,j=n();return O!==b.e&&Gt(g,b.e=O),j!==b.t&&Lt(g,"aria-expanded",b.t=j),b},{e:void 0,t:void 0}),d})()}Gr(["click"]);function ka(i){return[we(Oa,{}),ve(()=>i.children)]}var Ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pa(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Oo={exports:{}};(function(i,n){(function(r,o){i.exports=o()})(Ui,function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function u(e,t,s){for(var a,l=0,h=t.length;l<h;l++)!a&&l in t||((a=a||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(a||Array.prototype.slice.call(t))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ui,f=Object.keys,d=Array.isArray;function g(e,t){return typeof t!="object"||f(t).forEach(function(s){e[s]=t[s]}),e}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var b=Object.getPrototypeOf,O={}.hasOwnProperty;function j(e,t){return O.call(e,t)}function P(e,t){typeof t=="function"&&(t=t(b(e))),(typeof Reflect>"u"?f:Reflect.ownKeys)(t).forEach(function(s){M(e,s,t[s])})}var U=Object.defineProperty;function M(e,t,s,a){U(e,t,g(s&&j(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},a))}function I(e){return{from:function(t){return e.prototype=Object.create(t.prototype),M(e.prototype,"constructor",e),{extend:P.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,Y=[].slice;function z(e,t,s){return Y.call(e,t,s)}function ce(e,t){return t(e)}function J(e){if(!e)throw new Error("Assertion Failed")}function se(e){c.setImmediate?setImmediate(e):setTimeout(e,0)}function ue(e,t){if(typeof t=="string"&&j(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var s=[],a=0,l=t.length;a<l;++a){var h=ue(e,t[a]);s.push(h)}return s}var p=t.indexOf(".");if(p!==-1){var m=e[t.substr(0,p)];return m==null?void 0:ue(m,t.substr(p+1))}}function ne(e,t,s){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){J(typeof s!="string"&&"length"in s);for(var a=0,l=t.length;a<l;++a)ne(e,t[a],s[a])}else{var h,p,m=t.indexOf(".");m!==-1?(h=t.substr(0,m),(p=t.substr(m+1))===""?s===void 0?d(e)&&!isNaN(parseInt(h))?e.splice(h,1):delete e[h]:e[h]=s:ne(m=!(m=e[h])||!j(e,h)?e[h]={}:m,p,s)):s===void 0?d(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=s}}function Ve(e){var t,s={};for(t in e)j(e,t)&&(s[t]=e[t]);return s}var jt=[].concat;function at(e){return jt.apply([],e)}var He="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(at([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return c[e]}),$e=new Set(He.map(function(e){return c[e]})),te=null;function re(e){return te=new WeakMap,e=function t(s){if(!s||typeof s!="object")return s;var a=te.get(s);if(a)return a;if(d(s)){a=[],te.set(s,a);for(var l=0,h=s.length;l<h;++l)a.push(t(s[l]))}else if($e.has(s.constructor))a=s;else{var p,m=b(s);for(p in a=m===Object.prototype?{}:Object.create(m),te.set(s,a),s)j(s,p)&&(a[p]=t(s[p]))}return a}(e),te=null,e}var be={}.toString;function Re(e){return be.call(e).slice(8,-1)}var je=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ie=typeof je=="symbol"?function(e){var t;return e!=null&&(t=e[je])&&t.apply(e)}:function(){return null};function fe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var ge={};function xe(e){var t,s,a,l;if(arguments.length===1){if(d(e))return e.slice();if(this===ge&&typeof e=="string")return[e];if(l=Ie(e)){for(s=[];!(a=l.next()).done;)s.push(a.value);return s}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(s=new Array(t);t--;)s[t]=e[t];return s}for(t=arguments.length,s=new Array(t);t--;)s[t]=arguments[t];return s}var Xe=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Tt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ne=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Tt),Eo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function bt(e,t){this.name=e,this.message=t}function Zr(e,t){return e+". Errors: "+Object.keys(t).map(function(s){return t[s].toString()}).filter(function(s,a,l){return l.indexOf(s)===a}).join(`
`)}function sn(e,t,s,a){this.failures=t,this.failedKeys=a,this.successCount=s,this.message=Zr(e,t)}function wt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(s){return t[s]}),this.failuresByPos=t,this.message=Zr(e,this.failures)}I(bt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(sn).from(bt),I(wt).from(bt);var Qn=Ne.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ao=bt,W=Ne.reduce(function(e,t){var s=t+"Error";function a(l,h){this.name=s,l?typeof l=="string"?(this.message="".concat(l).concat(h?`
 `+h:""),this.inner=h||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=Eo[t]||s,this.inner=null)}return I(a).from(Ao),e[t]=a,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var ei=Tt.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),an=Ne.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=W[t]),e},{});function le(){}function Nt(e){return e}function Ro(e,t){return e==null||e===Nt?t:function(s){return t(e(s))}}function ut(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Lo(e,t){return e===le?t:function(){var s=e.apply(this,arguments);s!==void 0&&(arguments[0]=s);var a=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var h=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ut(a,this.onsuccess):a),l&&(this.onerror=this.onerror?ut(l,this.onerror):l),h!==void 0?h:s}}function jo(e,t){return e===le?t:function(){e.apply(this,arguments);var s=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?ut(s,this.onsuccess):s),a&&(this.onerror=this.onerror?ut(a,this.onerror):a)}}function No(e,t){return e===le?t:function(s){var a=e.apply(this,arguments);g(s,a);var l=this.onsuccess,h=this.onerror;return this.onsuccess=null,this.onerror=null,s=t.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?ut(l,this.onsuccess):l),h&&(this.onerror=this.onerror?ut(h,this.onerror):h),a===void 0?s===void 0?void 0:s:g(a,s)}}function Ko(e,t){return e===le?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Xn(e,t){return e===le?t:function(){var s=e.apply(this,arguments);if(s&&typeof s.then=="function"){for(var a=this,l=arguments.length,h=new Array(l);l--;)h[l]=arguments[l];return s.then(function(){return t.apply(a,h)})}return t.apply(this,arguments)}}an.ModifyError=sn,an.DexieError=bt,an.BulkError=wt;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ti(e){Fe=e}var Kt={},ni=100,He=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,b(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,b(t),e]}(),Tt=He[0],Ne=He[1],He=He[2],Ne=Ne&&Ne.then,It=Tt&&Tt.constructor,Zn=!!He,Dt=function(e,t){$t.push([e,t]),un&&(queueMicrotask(Io),un=!1)},er=!0,un=!0,lt=[],ln=[],tr=Nt,Ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:le,pgp:!1,env:{},finalize:le},H=Ze,$t=[],ct=0,cn=[];function q(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=H;if(typeof e!="function"){if(e!==Kt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&rr(this,this._value))}this._state=null,this._value=null,++t.ref,function s(a,l){try{l(function(h){if(a._state===null){if(h===a)throw new TypeError("A promise cannot be resolved with itself.");var p=a._lib&&xt();h&&typeof h.then=="function"?s(a,function(m,x){h instanceof q?h._then(m,x):h.then(m,x)}):(a._state=!0,a._value=h,ii(a)),p&&St()}},rr.bind(null,a))}catch(h){rr(a,h)}}(this,e)}var nr={get:function(){var e=H,t=pn;function s(a,l){var h=this,p=!e.global&&(e!==H||t!==pn),m=p&&!tt(),x=new q(function(v,k){ir(h,new ri(si(a,e,p,m),si(l,e,p,m),v,k,e))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return s.prototype=Kt,s},set:function(e){M(this,"then",e&&e.prototype===Kt?nr:{get:function(){return e},set:nr.set})}};function ri(e,t,s,a,l){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=s,this.reject=a,this.psd=l}function rr(e,t){var s,a;ln.push(t),e._state===null&&(s=e._lib&&xt(),t=tr(t),e._state=!1,e._value=t,a=e,lt.some(function(l){return l._value===a._value})||lt.push(a),ii(e),s&&St())}function ii(e){var t=e._listeners;e._listeners=[];for(var s=0,a=t.length;s<a;++s)ir(e,t[s]);var l=e._PSD;--l.ref||l.finalize(),ct===0&&(++ct,Dt(function(){--ct==0&&or()},[]))}function ir(e,t){if(e._state!==null){var s=e._state?t.onFulfilled:t.onRejected;if(s===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ct,Dt(To,[s,e,t])}else e._listeners.push(t)}function To(e,t,s){try{var a,l=t._value;!t._state&&ln.length&&(ln=[]),a=Fe&&t._consoleTask?t._consoleTask.run(function(){return e(l)}):e(l),t._state||ln.indexOf(l)!==-1||function(h){for(var p=lt.length;p;)if(lt[--p]._value===h._value)return lt.splice(p,1)}(t),s.resolve(a)}catch(h){s.reject(h)}finally{--ct==0&&or(),--s.psd.ref||s.psd.finalize()}}function Io(){ft(Ze,function(){xt()&&St()})}function xt(){var e=er;return un=er=!1,e}function St(){var e,t,s;do for(;0<$t.length;)for(e=$t,$t=[],s=e.length,t=0;t<s;++t){var a=e[t];a[0].apply(null,a[1])}while(0<$t.length);un=er=!0}function or(){var e=lt;lt=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=cn.slice(0),s=t.length;s;)t[--s]()}function fn(e){return new q(Kt,!1,e)}function pe(e,t){var s=H;return function(){var a=xt(),l=H;try{return nt(s,!0),e.apply(this,arguments)}catch(h){t&&t(h)}finally{nt(l,!1),a&&St()}}}P(q.prototype,{then:nr,_then:function(e,t){ir(this,new ri(null,null,e,t,H))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,s=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?s:fn)(a)}):this.then(null,function(a){return(a&&a.name===t?s:fn)(a)})},finally:function(e){return this.then(function(t){return q.resolve(e()).then(function(){return t})},function(t){return q.resolve(e()).then(function(){return fn(t)})})},timeout:function(e,t){var s=this;return e<1/0?new q(function(a,l){var h=setTimeout(function(){return l(new W.Timeout(t))},e);s.then(a,l).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(q.prototype,Symbol.toStringTag,"Dexie.Promise"),Ze.env=oi(),P(q,{all:function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t,s){e.length===0&&t([]);var a=e.length;e.forEach(function(l,h){return q.resolve(l).then(function(p){e[h]=p,--a||t(e)},s)})})},resolve:function(e){return e instanceof q?e:e&&typeof e.then=="function"?new q(function(t,s){e.then(t,s)}):new q(Kt,!0,e)},reject:fn,race:function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t,s){e.map(function(a){return q.resolve(a).then(t,s)})})},PSD:{get:function(){return H},set:function(e){return H=e}},totalEchoes:{get:function(){return pn}},newPSD:et,usePSD:ft,scheduler:{get:function(){return Dt},set:function(e){Dt=e}},rejectionMapper:{get:function(){return tr},set:function(e){tr=e}},follow:function(e,t){return new q(function(s,a){return et(function(l,h){var p=H;p.unhandleds=[],p.onunhandled=h,p.finalize=ut(function(){var m,x=this;m=function(){x.unhandleds.length===0?l():h(x.unhandleds[0])},cn.push(function v(){m(),cn.splice(cn.indexOf(v),1)}),++ct,Dt(function(){--ct==0&&or()},[])},p.finalize),e()},t,s,a)})}}),It&&(It.allSettled&&M(q,"allSettled",function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t){e.length===0&&t([]);var s=e.length,a=new Array(s);e.forEach(function(l,h){return q.resolve(l).then(function(p){return a[h]={status:"fulfilled",value:p}},function(p){return a[h]={status:"rejected",reason:p}}).then(function(){return--s||t(a)})})})}),It.any&&typeof AggregateError<"u"&&M(q,"any",function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t,s){e.length===0&&s(new AggregateError([]));var a=e.length,l=new Array(a);e.forEach(function(h,p){return q.resolve(h).then(function(m){return t(m)},function(m){l[p]=m,--a||s(new AggregateError(l))})})})}));var Se={awaits:0,echoes:0,id:0},Do=0,hn=[],dn=0,pn=0,$o=0;function et(e,t,s,a){var l=H,h=Object.create(l);return h.parent=l,h.ref=0,h.global=!1,h.id=++$o,Ze.env,h.env=Zn?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},t&&g(h,t),++l.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()},a=ft(h,e,s,a),h.ref===0&&h.finalize(),a}function _t(){return Se.id||(Se.id=++Do),++Se.awaits,Se.echoes+=ni,Se.id}function tt(){return!!Se.awaits&&(--Se.awaits==0&&(Se.id=0),Se.echoes=Se.awaits*ni,!0)}function gn(e){return Se.echoes&&e&&e.constructor===It?(_t(),e.then(function(t){return tt(),t},function(t){return tt(),me(t)})):e}function Fo(){var e=hn[hn.length-1];hn.pop(),nt(e,!1)}function nt(e,t){var s,a=H;(t?!Se.echoes||dn++&&e===H:!dn||--dn&&e===H)||queueMicrotask(t?(function(l){++pn,Se.echoes&&--Se.echoes!=0||(Se.echoes=Se.awaits=Se.id=0),hn.push(H),nt(l,!0)}).bind(null,e):Fo),e!==H&&(H=e,a===Ze&&(Ze.env=oi()),Zn&&(s=Ze.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(c,"Promise",t.PromiseProp),s.all=t.all,s.race=t.race,s.resolve=t.resolve,s.reject=t.reject,t.allSettled&&(s.allSettled=t.allSettled),t.any&&(s.any=t.any))))}function oi(){var e=c.Promise;return Zn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ft(e,t,s,a,l){var h=H;try{return nt(e,!0),t(s,a,l)}finally{nt(h,!1)}}function si(e,t,s,a){return typeof e!="function"?e:function(){var l=H;s&&_t(),nt(t,!0);try{return e.apply(this,arguments)}finally{nt(l,!1),a&&queueMicrotask(tt)}}}function sr(e){Promise===It&&Se.echoes===0?dn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ne).indexOf("[native code]")===-1&&(_t=tt=le);var me=q.reject,ht="￿",ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ai="String expected.",Ot=[],mn="__dbnames",ar="readonly",ur="readwrite";function dt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ui={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=re(t))[e],t}}function li(){throw W.Type()}function ae(e,t){try{var s=ci(e),a=ci(t);if(s!==a)return s==="Array"?1:a==="Array"?-1:s==="binary"?1:a==="binary"?-1:s==="string"?1:a==="string"?-1:s==="Date"?1:a!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(l,h){for(var p=l.length,m=h.length,x=p<m?p:m,v=0;v<x;++v)if(l[v]!==h[v])return l[v]<h[v]?-1:1;return p===m?0:p<m?-1:1}(fi(e),fi(t));case"Array":return function(l,h){for(var p=l.length,m=h.length,x=p<m?p:m,v=0;v<x;++v){var k=ae(l[v],h[v]);if(k!==0)return k}return p===m?0:p<m?-1:1}(e,t)}}catch{}return NaN}function ci(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Re(e),e==="ArrayBuffer"?"binary":e)}function fi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var hi=(de.prototype._trans=function(e,t,s){var a=this._tx||H.trans,l=this.name,h=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function p(v,k,y){if(!y.schema[l])throw new W.NotFound("Table "+l+" not part of transaction");return t(y.idbtrans,y)}var m=xt();try{var x=a&&a.db._novip===this.db._novip?a===H.trans?a._promise(e,p,s):et(function(){return a._promise(e,p,s)},{trans:a,transless:H.transless||H}):function v(k,y,C,w){if(k.idbdb&&(k._state.openComplete||H.letThrough||k._vip)){var _=k._createTransaction(y,C,k._dbSchema);try{_.create(),k._state.PR1398_maxLoop=3}catch(E){return E.name===Qn.InvalidState&&k.isOpen()&&0<--k._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),k.close({disableAutoOpen:!1}),k.open().then(function(){return v(k,y,C,w)})):me(E)}return _._promise(y,function(E,S){return et(function(){return H.trans=_,w(E,S,_)})}).then(function(E){if(y==="readwrite")try{_.idbtrans.commit()}catch{}return y==="readonly"?E:_._completion.then(function(){return E})})}if(k._state.openComplete)return me(new W.DatabaseClosed(k._state.dbOpenError));if(!k._state.isBeingOpened){if(!k._state.autoOpen)return me(new W.DatabaseClosed);k.open().catch(le)}return k._state.dbReadyPromise.then(function(){return v(k,y,C,w)})}(this.db,e,[this.name],p);return h&&(x._consoleTask=h,x=x.catch(function(v){return console.trace(v),me(v)})),x}finally{m&&St()}},de.prototype.get=function(e,t){var s=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?me(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return s.core.get({trans:a,key:e}).then(function(l){return s.hook.reading.fire(l)})}).then(t)},de.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(d(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=f(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&t.every(function(k){return 0<=x.keyPath.indexOf(k)})){for(var v=0;v<t.length;++v)if(t.indexOf(x.keyPath[v])===-1)return!1;return!0}return!1}).sort(function(x,v){return x.keyPath.length-v.keyPath.length})[0];if(s&&this.db._maxKey!==ht){var p=s.keyPath.slice(0,t.length);return this.where(p).equals(p.map(function(v){return e[v]}))}!s&&Fe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName,l=this.db._deps.indexedDB;function h(x,v){return l.cmp(x,v)===0}var m=t.reduce(function(C,v){var k=C[0],y=C[1],C=a[v],w=e[v];return[k||C,k||!C?dt(y,C&&C.multi?function(_){return _=ue(_,v),d(_)&&_.some(function(E){return h(w,E)})}:function(_){return h(w,ue(_,v))}):y]},[null,null]),p=m[0],m=m[1];return p?this.where(p.name).equals(e[p.keyPath]).filter(m):s?this.filter(m):this.where(t).equals("")},de.prototype.filter=function(e){return this.toCollection().and(e)},de.prototype.count=function(e){return this.toCollection().count(e)},de.prototype.offset=function(e){return this.toCollection().offset(e)},de.prototype.limit=function(e){return this.toCollection().limit(e)},de.prototype.each=function(e){return this.toCollection().each(e)},de.prototype.toArray=function(e){return this.toCollection().toArray(e)},de.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},de.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,d(e)?"[".concat(e.join("+"),"]"):e))},de.prototype.reverse=function(){return this.toCollection().reverse()},de.prototype.mapToClass=function(e){var t,s=this.db,a=this.name;function l(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof li&&(function(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function k(){this.constructor=x}r(x,v),x.prototype=v===null?Object.create(v):(k.prototype=v.prototype,new k)}(l,t=e),Object.defineProperty(l.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),l.prototype.table=function(){return a},e=l);for(var h=new Set,p=e.prototype;p;p=b(p))Object.getOwnPropertyNames(p).forEach(function(x){return h.add(x)});function m(x){if(!x)return x;var v,k=Object.create(e.prototype);for(v in x)if(!h.has(v))try{k[v]=x[v]}catch{}return k}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),e},de.prototype.defineClass=function(){return this.mapToClass(function(e){g(this,e)})},de.prototype.add=function(e,t){var s=this,a=this.schema.primKey,l=a.auto,h=a.keyPath,p=e;return h&&l&&(p=yn(h)(e)),this._trans("readwrite",function(m){return s.core.mutate({trans:m,type:"add",keys:t!=null?[t]:null,values:[p]})}).then(function(m){return m.numFailures?q.reject(m.failures[0]):m.lastResult}).then(function(m){if(h)try{ne(e,h,m)}catch{}return m})},de.prototype.update=function(e,t){return typeof e!="object"||d(e)?this.where(":id").equals(e).modify(t):(e=ue(e,this.schema.primKey.keyPath),e===void 0?me(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},de.prototype.put=function(e,t){var s=this,a=this.schema.primKey,l=a.auto,h=a.keyPath,p=e;return h&&l&&(p=yn(h)(e)),this._trans("readwrite",function(m){return s.core.mutate({trans:m,type:"put",values:[p],keys:t!=null?[t]:null})}).then(function(m){return m.numFailures?q.reject(m.failures[0]):m.lastResult}).then(function(m){if(h)try{ne(e,h,m)}catch{}return m})},de.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(s){return t.core.mutate({trans:s,type:"delete",keys:[e]})}).then(function(s){return s.numFailures?q.reject(s.failures[0]):void 0})},de.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ui})}).then(function(t){return t.numFailures?q.reject(t.failures[0]):void 0})},de.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(s){return t.core.getMany({keys:e,trans:s}).then(function(a){return a.map(function(l){return t.hook.reading.fire(l)})})})},de.prototype.bulkAdd=function(e,t,s){var a=this,l=Array.isArray(t)?t:void 0,h=(s=s||(l?void 0:t))?s.allKeys:void 0;return this._trans("readwrite",function(p){var v=a.schema.primKey,m=v.auto,v=v.keyPath;if(v&&l)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var x=e.length,v=v&&m?e.map(yn(v)):e;return a.core.mutate({trans:p,type:"add",keys:l,values:v,wantResults:h}).then(function(_){var y=_.numFailures,C=_.results,w=_.lastResult,_=_.failures;if(y===0)return h?C:w;throw new wt("".concat(a.name,".bulkAdd(): ").concat(y," of ").concat(x," operations failed"),_)})})},de.prototype.bulkPut=function(e,t,s){var a=this,l=Array.isArray(t)?t:void 0,h=(s=s||(l?void 0:t))?s.allKeys:void 0;return this._trans("readwrite",function(p){var v=a.schema.primKey,m=v.auto,v=v.keyPath;if(v&&l)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var x=e.length,v=v&&m?e.map(yn(v)):e;return a.core.mutate({trans:p,type:"put",keys:l,values:v,wantResults:h}).then(function(_){var y=_.numFailures,C=_.results,w=_.lastResult,_=_.failures;if(y===0)return h?C:w;throw new wt("".concat(a.name,".bulkPut(): ").concat(y," of ").concat(x," operations failed"),_)})})},de.prototype.bulkUpdate=function(e){var t=this,s=this.core,a=e.map(function(p){return p.key}),l=e.map(function(p){return p.changes}),h=[];return this._trans("readwrite",function(p){return s.getMany({trans:p,keys:a,cache:"clone"}).then(function(m){var x=[],v=[];e.forEach(function(y,C){var w=y.key,_=y.changes,E=m[C];if(E){for(var S=0,A=Object.keys(_);S<A.length;S++){var R=A[S],L=_[R];if(R===t.schema.primKey.keyPath){if(ae(L,w)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else ne(E,R,L)}h.push(C),x.push(w),v.push(E)}});var k=x.length;return s.mutate({trans:p,type:"put",keys:x,values:v,updates:{keys:a,changeSpecs:l}}).then(function(y){var C=y.numFailures,w=y.failures;if(C===0)return k;for(var _=0,E=Object.keys(w);_<E.length;_++){var S,A=E[_],R=h[Number(A)];R!=null&&(S=w[A],delete w[A],w[R]=S)}throw new wt("".concat(t.name,".bulkUpdate(): ").concat(C," of ").concat(k," operations failed"),w)})})})},de.prototype.bulkDelete=function(e){var t=this,s=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e})}).then(function(p){var l=p.numFailures,h=p.lastResult,p=p.failures;if(l===0)return h;throw new wt("".concat(t.name,".bulkDelete(): ").concat(l," of ").concat(s," operations failed"),p)})},de);function de(){}function Ft(e){function t(p,m){if(m){for(var x=arguments.length,v=new Array(x-1);--x;)v[x-1]=arguments[x];return s[p].subscribe.apply(null,v),e}if(typeof p=="string")return s[p]}var s={};t.addEventType=h;for(var a=1,l=arguments.length;a<l;++a)h(arguments[a]);return t;function h(p,m,x){if(typeof p!="object"){var v;m=m||Ko;var k={subscribers:[],fire:x=x||le,subscribe:function(y){k.subscribers.indexOf(y)===-1&&(k.subscribers.push(y),k.fire=m(k.fire,y))},unsubscribe:function(y){k.subscribers=k.subscribers.filter(function(C){return C!==y}),k.fire=k.subscribers.reduce(m,x)}};return s[p]=t[p]=k}f(v=p).forEach(function(y){var C=v[y];if(d(C))h(y,v[y][0],v[y][1]);else{if(C!=="asap")throw new W.InvalidArgument("Invalid event config");var w=h(y,Nt,function(){for(var _=arguments.length,E=new Array(_);_--;)E[_]=arguments[_];w.subscribers.forEach(function(S){se(function(){S.apply(null,E)})})})}})}}function Bt(e,t){return I(t).from({prototype:e}),t}function kt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function lr(e,t){e.filter=dt(e.filter,t)}function cr(e,t,s){var a=e.replayFilter;e.replayFilter=a?function(){return dt(a(),t())}:t,e.justLimit=s&&!a}function vn(e,t){if(e.isPrimKey)return t.primaryKey;var s=t.getIndexByKeyPath(e.index);if(!s)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return s}function di(e,t,s){var a=vn(e,t.schema);return t.openCursor({trans:s,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function bn(e,t,s,a){var l=e.replayFilter?dt(e.filter,e.replayFilter()):e.filter;if(e.or){var h={},p=function(m,x,v){var k,y;l&&!l(x,v,function(C){return x.stop(C)},function(C){return x.fail(C)})||((y=""+(k=x.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(k)),j(h,y)||(h[y]=!0,t(m,x,v)))};return Promise.all([e.or._iterate(p,s),pi(di(e,a,s),e.algorithm,p,!e.keysOnly&&e.valueMapper)])}return pi(di(e,a,s),dt(e.algorithm,l),t,!e.keysOnly&&e.valueMapper)}function pi(e,t,s,a){var l=pe(a?function(h,p,m){return s(a(h),p,m)}:s);return e.then(function(h){if(h)return h.start(function(){var p=function(){return h.continue()};t&&!t(h,function(m){return p=m},function(m){h.stop(m),p=le},function(m){h.fail(m),p=le})||l(h.value,h,function(m){return p=m}),p()})})}var He=Symbol(),Mt=(gi.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(d(t))return u(u([],d(e)?e:[],!0),t).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var s=this.remove;if(d(s))return d(e)?e.filter(function(a){return!s.includes(a)}).sort():[];if(typeof s=="number")return Number(e)-s;if(typeof s=="bigint")try{return BigInt(e)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},gi);function gi(e){Object.assign(this,e)}var Bo=(ie.prototype._read=function(e,t){var s=this._ctx;return s.error?s.table._trans(null,me.bind(null,s.error)):s.table._trans("readonly",e).then(t)},ie.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,me.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ie.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=dt(t.algorithm,e)},ie.prototype._iterate=function(e,t){return bn(this._ctx,e,t,this._ctx.table.core)},ie.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return e&&g(s,e),t._ctx=s,t},ie.prototype.raw=function(){return this._ctx.valueMapper=null,this},ie.prototype.each=function(e){var t=this._ctx;return this._read(function(s){return bn(t,e,s,t.table.core)})},ie.prototype.count=function(e){var t=this;return this._read(function(s){var a=t._ctx,l=a.table.core;if(kt(a,!0))return l.count({trans:s,query:{index:vn(a,l.schema),range:a.range}}).then(function(p){return Math.min(p,a.limit)});var h=0;return bn(a,function(){return++h,!1},s,l).then(function(){return h})}).then(e)},ie.prototype.sortBy=function(e,t){var s=e.split(".").reverse(),a=s[0],l=s.length-1;function h(x,v){return v?h(x[s[v]],v-1):x[a]}var p=this._ctx.dir==="next"?1:-1;function m(x,v){return x=h(x,l),v=h(v,l),x<v?-p:v<x?p:0}return this.toArray(function(x){return x.sort(m)}).then(t)},ie.prototype.toArray=function(e){var t=this;return this._read(function(s){var a=t._ctx;if(a.dir==="next"&&kt(a,!0)&&0<a.limit){var l=a.valueMapper,h=vn(a,a.table.core.schema);return a.table.core.query({trans:s,limit:a.limit,values:!0,query:{index:h,range:a.range}}).then(function(m){return m=m.result,l?m.map(l):m})}var p=[];return bn(a,function(m){return p.push(m)},s,a.table.core).then(function(){return p})},e)},ie.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,kt(t)?cr(t,function(){var s=e;return function(a,l){return s===0||(s===1?--s:l(function(){a.advance(s),s=0}),!1)}}):cr(t,function(){var s=e;return function(){return--s<0}})),this},ie.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),cr(this._ctx,function(){var t=e;return function(s,a,l){return--t<=0&&a(l),0<=t}},!0),this},ie.prototype.until=function(e,t){return lr(this._ctx,function(s,a,l){return!e(s.value)||(a(l),t)}),this},ie.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ie.prototype.last=function(e){return this.reverse().first(e)},ie.prototype.filter=function(e){var t;return lr(this._ctx,function(s){return e(s.value)}),(t=this._ctx).isMatch=dt(t.isMatch,e),this},ie.prototype.and=function(e){return this.filter(e)},ie.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ie.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ie.prototype.desc=function(){return this.reverse()},ie.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(s,a){e(a.key,a)})},ie.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ie.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(s,a){e(a.primaryKey,a)})},ie.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var s=[];return this.each(function(a,l){s.push(l.key)}).then(function(){return s}).then(e)},ie.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&kt(t,!0)&&0<t.limit)return this._read(function(a){var l=vn(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:l,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var s=[];return this.each(function(a,l){s.push(l.primaryKey)}).then(function(){return s}).then(e)},ie.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ie.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ie.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ie.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return lr(this._ctx,function(l){var a=l.primaryKey.toString(),l=j(t,a);return t[a]=!0,!l}),this},ie.prototype.modify=function(e){var t=this,s=this._ctx;return this._write(function(a){var l,h,p;p=typeof e=="function"?e:(l=f(e),h=l.length,function(S){for(var A=!1,R=0;R<h;++R){var L=l[R],N=e[L],K=ue(S,L);N instanceof Mt?(ne(S,L,N.execute(K)),A=!0):K!==N&&(ne(S,L,N),A=!0)}return A});function m(S,L){var R=L.failures,L=L.numFailures;_+=S-L;for(var N=0,K=f(R);N<K.length;N++){var F=K[N];w.push(R[F])}}var x=s.table.core,v=x.schema.primaryKey,k=v.outbound,y=v.extractKey,C=t.db._options.modifyChunkSize||200,w=[],_=0,E=[];return t.clone().primaryKeys().then(function(S){function A(L){var N=Math.min(C,S.length-L);return x.getMany({trans:a,keys:S.slice(L,L+N),cache:"immutable"}).then(function(K){for(var F=[],T=[],$=k?[]:null,B=[],D=0;D<N;++D){var G=K[D],Q={value:re(G),primKey:S[L+D]};p.call(Q,Q.value,Q)!==!1&&(Q.value==null?B.push(S[L+D]):k||ae(y(G),y(Q.value))===0?(T.push(Q.value),k&&$.push(S[L+D])):(B.push(S[L+D]),F.push(Q.value)))}return Promise.resolve(0<F.length&&x.mutate({trans:a,type:"add",values:F}).then(function(ee){for(var X in ee.failures)B.splice(parseInt(X),1);m(F.length,ee)})).then(function(){return(0<T.length||R&&typeof e=="object")&&x.mutate({trans:a,type:"put",keys:$,values:T,criteria:R,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<L}).then(function(ee){return m(T.length,ee)})}).then(function(){return(0<B.length||R&&e===fr)&&x.mutate({trans:a,type:"delete",keys:B,criteria:R,isAdditionalChunk:0<L}).then(function(ee){return m(B.length,ee)})}).then(function(){return S.length>L+N&&A(L+C)})})}var R=kt(s)&&s.limit===1/0&&(typeof e!="function"||e===fr)&&{index:s.index,range:s.range};return A(0).then(function(){if(0<w.length)throw new sn("Error modifying one or more objects",w,_,E);return S.length})})})},ie.prototype.delete=function(){var e=this._ctx,t=e.range;return kt(e)&&(e.isPrimKey||t.type===3)?this._write(function(s){var a=e.table.core.schema.primaryKey,l=t;return e.table.core.count({trans:s,query:{index:a,range:l}}).then(function(h){return e.table.core.mutate({trans:s,type:"deleteRange",range:l}).then(function(p){var m=p.failures;if(p.lastResult,p.results,p=p.numFailures,p)throw new sn("Could not delete some values",Object.keys(m).map(function(x){return m[x]}),h-p);return h-p})})}):this.modify(fr)},ie);function ie(){}var fr=function(e,t){return t.value=null};function Mo(e,t){return e<t?-1:e===t?0:1}function qo(e,t){return t<e?-1:e===t?0:1}function Le(e,t,s){return e=e instanceof yi?new e.Collection(e):e,e._ctx.error=new(s||TypeError)(t),e}function Pt(e){return new e.Collection(e,function(){return mi("")}).limit(0)}function wn(e,t,s,a){var l,h,p,m,x,v,k,y=s.length;if(!s.every(function(_){return typeof _=="string"}))return Le(e,ai);function C(_){l=_==="next"?function(S){return S.toUpperCase()}:function(S){return S.toLowerCase()},h=_==="next"?function(S){return S.toLowerCase()}:function(S){return S.toUpperCase()},p=_==="next"?Mo:qo;var E=s.map(function(S){return{lower:h(S),upper:l(S)}}).sort(function(S,A){return p(S.lower,A.lower)});m=E.map(function(S){return S.upper}),x=E.map(function(S){return S.lower}),k=(v=_)==="next"?"":a}C("next"),e=new e.Collection(e,function(){return rt(m[0],x[y-1]+a)}),e._ondirectionchange=function(_){C(_)};var w=0;return e._addAlgorithm(function(_,E,S){var A=_.key;if(typeof A!="string")return!1;var R=h(A);if(t(R,x,w))return!0;for(var L=null,N=w;N<y;++N){var K=function(F,T,$,B,D,G){for(var Q=Math.min(F.length,B.length),ee=-1,X=0;X<Q;++X){var De=T[X];if(De!==B[X])return D(F[X],$[X])<0?F.substr(0,X)+$[X]+$.substr(X+1):D(F[X],B[X])<0?F.substr(0,X)+B[X]+$.substr(X+1):0<=ee?F.substr(0,ee)+T[ee]+$.substr(ee+1):null;D(F[X],De)<0&&(ee=X)}return Q<B.length&&G==="next"?F+$.substr(F.length):Q<F.length&&G==="prev"?F.substr(0,$.length):ee<0?null:F.substr(0,ee)+B[ee]+$.substr(ee+1)}(A,R,m[N],x[N],p,v);K===null&&L===null?w=N+1:(L===null||0<p(L,K))&&(L=K)}return E(L!==null?function(){_.continue(L+k)}:S),!1}),e}function rt(e,t,s,a){return{type:2,lower:e,upper:t,lowerOpen:s,upperOpen:a}}function mi(e){return{type:1,lower:e,upper:e}}var yi=(Object.defineProperty(_e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_e.prototype.between=function(e,t,s,a){s=s!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(s||a)&&(!s||!a)?Pt(this):new this.Collection(this,function(){return rt(e,t,!s,!a)})}catch{return Le(this,ze)}},_e.prototype.equals=function(e){return e==null?Le(this,ze):new this.Collection(this,function(){return mi(e)})},_e.prototype.above=function(e){return e==null?Le(this,ze):new this.Collection(this,function(){return rt(e,void 0,!0)})},_e.prototype.aboveOrEqual=function(e){return e==null?Le(this,ze):new this.Collection(this,function(){return rt(e,void 0,!1)})},_e.prototype.below=function(e){return e==null?Le(this,ze):new this.Collection(this,function(){return rt(void 0,e,!1,!0)})},_e.prototype.belowOrEqual=function(e){return e==null?Le(this,ze):new this.Collection(this,function(){return rt(void 0,e)})},_e.prototype.startsWith=function(e){return typeof e!="string"?Le(this,ai):this.between(e,e+ht,!0,!0)},_e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):wn(this,function(t,s){return t.indexOf(s[0])===0},[e],ht)},_e.prototype.equalsIgnoreCase=function(e){return wn(this,function(t,s){return t===s[0]},[e],"")},_e.prototype.anyOfIgnoreCase=function(){var e=xe.apply(ge,arguments);return e.length===0?Pt(this):wn(this,function(t,s){return s.indexOf(t)!==-1},e,"")},_e.prototype.startsWithAnyOfIgnoreCase=function(){var e=xe.apply(ge,arguments);return e.length===0?Pt(this):wn(this,function(t,s){return s.some(function(a){return t.indexOf(a)===0})},e,ht)},_e.prototype.anyOf=function(){var e=this,t=xe.apply(ge,arguments),s=this._cmp;try{t.sort(s)}catch{return Le(this,ze)}if(t.length===0)return Pt(this);var a=new this.Collection(this,function(){return rt(t[0],t[t.length-1])});a._ondirectionchange=function(h){s=h==="next"?e._ascending:e._descending,t.sort(s)};var l=0;return a._addAlgorithm(function(h,p,m){for(var x=h.key;0<s(x,t[l]);)if(++l===t.length)return p(m),!1;return s(x,t[l])===0||(p(function(){h.continue(t[l])}),!1)}),a},_e.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_e.prototype.noneOf=function(){var e=xe.apply(ge,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Le(this,ze)}var t=e.reduce(function(s,a){return s?s.concat([[s[s.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},_e.prototype.inAnyRange=function(A,t){var s=this,a=this._cmp,l=this._ascending,h=this._descending,p=this._min,m=this._max;if(A.length===0)return Pt(this);if(!A.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&l(R[0],R[1])<=0}))return Le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var x=!t||t.includeLowers!==!1,v=t&&t.includeUppers===!0,k,y=l;function C(R,L){return y(R[0],L[0])}try{(k=A.reduce(function(R,L){for(var N=0,K=R.length;N<K;++N){var F=R[N];if(a(L[0],F[1])<0&&0<a(L[1],F[0])){F[0]=p(F[0],L[0]),F[1]=m(F[1],L[1]);break}}return N===K&&R.push(L),R},[])).sort(C)}catch{return Le(this,ze)}var w=0,_=v?function(R){return 0<l(R,k[w][1])}:function(R){return 0<=l(R,k[w][1])},E=x?function(R){return 0<h(R,k[w][0])}:function(R){return 0<=h(R,k[w][0])},S=_,A=new this.Collection(this,function(){return rt(k[0][0],k[k.length-1][1],!x,!v)});return A._ondirectionchange=function(R){y=R==="next"?(S=_,l):(S=E,h),k.sort(C)},A._addAlgorithm(function(R,L,N){for(var K,F=R.key;S(F);)if(++w===k.length)return L(N),!1;return!_(K=F)&&!E(K)||(s._cmp(F,k[w][1])===0||s._cmp(F,k[w][0])===0||L(function(){y===l?R.continue(k[w][0]):R.continue(k[w][1])}),!1)}),A},_e.prototype.startsWithAnyOf=function(){var e=xe.apply(ge,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Pt(this):this.inAnyRange(e.map(function(t){return[t,t+ht]})):Le(this,"startsWithAnyOf() only works with strings")},_e);function _e(){}function Be(e){return pe(function(t){return qt(t),e(t.target.error),!1})}function qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ut="storagemutated",hr="x-storagemutated-1",it=Ft(null,Ut),Uo=(Me.prototype._lock=function(){return J(!H.global),++this._reculock,this._reculock!==1||H.global||(H.lockOwnerFor=this),this},Me.prototype._unlock=function(){if(J(!H.global),--this._reculock==0)for(H.global||(H.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{ft(e[1],e[0])}catch{}}return this},Me.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this},Me.prototype.create=function(e){var t=this;if(!this.mode)return this;var s=this.db.idbdb,a=this.db._state.dbOpenError;if(J(!this.idbtrans),!e&&!s)switch(a&&a.name){case"DatabaseClosedError":throw new W.DatabaseClosed(a);case"MissingAPIError":throw new W.MissingAPI(a.message,a);default:throw new W.OpenFailed(a)}if(!this.active)throw new W.TransactionInactive;return J(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=pe(function(l){qt(l),t._reject(e.error)}),e.onabort=pe(function(l){qt(l),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(l)}),e.oncomplete=pe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&it.storagemutated.fire(e.mutatedParts)}),this},Me.prototype._promise=function(e,t,s){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return me(new W.ReadOnly("Transaction is readonly"));if(!this.active)return me(new W.TransactionInactive);if(this._locked())return new q(function(h,p){a._blockedFuncs.push([function(){a._promise(e,t,s).then(h,p)},H])});if(s)return et(function(){var h=new q(function(p,m){a._lock();var x=t(p,m,a);x&&x.then&&x.then(p,m)});return h.finally(function(){return a._unlock()}),h._lib=!0,h});var l=new q(function(h,p){var m=t(h,p,a);m&&m.then&&m.then(h,p)});return l._lib=!0,l},Me.prototype._root=function(){return this.parent?this.parent._root():this},Me.prototype.waitFor=function(e){var t,s=this._root(),a=q.resolve(e);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return a}):(s._waitingFor=a,s._waitingQueue=[],t=s.idbtrans.objectStore(s.storeNames[0]),function h(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(t.get(-1/0).onsuccess=h)}());var l=s._waitingFor;return new q(function(h,p){a.then(function(m){return s._waitingQueue.push(pe(h.bind(null,m)))},function(m){return s._waitingQueue.push(pe(p.bind(null,m)))}).finally(function(){s._waitingFor===l&&(s._waitingFor=null)})})},Me.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},Me.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(j(t,e))return t[e];var s=this.schema[e];if(!s)throw new W.NotFound("Table "+e+" not part of transaction");return s=new this.db.Table(e,s,this),s.core=this.db.core.table(e),t[e]=s},Me);function Me(){}function dr(e,t,s,a,l,h,p){return{name:e,keyPath:t,unique:s,multi:a,auto:l,compound:h,src:(s&&!p?"&":"")+(a?"*":"")+(l?"++":"")+vi(t)}}function vi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function pr(e,t,s){return{name:e,primKey:t,indexes:s,mappedClass:null,idxByName:(a=function(l){return[l.name,l]},s.reduce(function(l,h,p){return p=a(h,p),p&&(l[p[0]]=p[1]),l},{}))};var a}var Vt=function(e){try{return e.only([[]]),Vt=function(){return[[]]},[[]]}catch{return Vt=function(){return ht},ht}};function gr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(s){return s[t]}:function(s){return ue(s,t)}:function(s){return ue(s,e)};var t}function bi(e){return[].slice.call(e)}var Vo=0;function zt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function zo(e,t,x){function a(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=S.lower,_=S.upper,E=S.lowerOpen,S=S.upperOpen;return w===void 0?_===void 0?null:t.upperBound(_,!!S):_===void 0?t.lowerBound(w,!!E):t.bound(w,_,!!E,!!S)}function l(C){var w,_=C.name;return{name:_,schema:C,mutate:function(E){var S=E.trans,A=E.type,R=E.keys,L=E.values,N=E.range;return new Promise(function(K,F){K=pe(K);var T=S.objectStore(_),$=T.keyPath==null,B=A==="put"||A==="add";if(!B&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var D,G=(R||L||{length:1}).length;if(R&&L&&R.length!==L.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function Q(Ae){++De,qt(Ae)}var ee=[],X=[],De=0;if(A==="deleteRange"){if(N.type===4)return K({numFailures:De,failures:X,results:[],lastResult:void 0});N.type===3?ee.push(D=T.clear()):ee.push(D=T.delete(a(N)))}else{var $=B?$?[L,R]:[L,null]:[R,null],Z=$[0],ke=$[1];if(B)for(var Pe=0;Pe<G;++Pe)ee.push(D=ke&&ke[Pe]!==void 0?T[A](Z[Pe],ke[Pe]):T[A](Z[Pe])),D.onerror=Q;else for(Pe=0;Pe<G;++Pe)ee.push(D=T[A](Z[Pe])),D.onerror=Q}function Nn(Ae){Ae=Ae.target.result,ee.forEach(function(mt,Kr){return mt.error!=null&&(X[Kr]=mt.error)}),K({numFailures:De,failures:X,results:A==="delete"?R:ee.map(function(mt){return mt.result}),lastResult:Ae})}D.onerror=function(Ae){Q(Ae),Nn(Ae)},D.onsuccess=Nn})},getMany:function(E){var S=E.trans,A=E.keys;return new Promise(function(R,L){R=pe(R);for(var N,K=S.objectStore(_),F=A.length,T=new Array(F),$=0,B=0,D=function(ee){ee=ee.target,T[ee._pos]=ee.result,++B===$&&R(T)},G=Be(L),Q=0;Q<F;++Q)A[Q]!=null&&((N=K.get(A[Q]))._pos=Q,N.onsuccess=D,N.onerror=G,++$);$===0&&R(T)})},get:function(E){var S=E.trans,A=E.key;return new Promise(function(R,L){R=pe(R);var N=S.objectStore(_).get(A);N.onsuccess=function(K){return R(K.target.result)},N.onerror=Be(L)})},query:(w=v,function(E){return new Promise(function(S,A){S=pe(S);var R,L,N,$=E.trans,K=E.values,F=E.limit,D=E.query,T=F===1/0?void 0:F,B=D.index,D=D.range,$=$.objectStore(_),B=B.isPrimaryKey?$:$.index(B.name),D=a(D);if(F===0)return S({result:[]});w?((T=K?B.getAll(D,T):B.getAllKeys(D,T)).onsuccess=function(G){return S({result:G.target.result})},T.onerror=Be(A)):(R=0,L=!K&&"openKeyCursor"in B?B.openKeyCursor(D):B.openCursor(D),N=[],L.onsuccess=function(G){var Q=L.result;return Q?(N.push(K?Q.value:Q.primaryKey),++R===F?S({result:N}):void Q.continue()):S({result:N})},L.onerror=Be(A))})}),openCursor:function(E){var S=E.trans,A=E.values,R=E.query,L=E.reverse,N=E.unique;return new Promise(function(K,F){K=pe(K);var B=R.index,T=R.range,$=S.objectStore(_),$=B.isPrimaryKey?$:$.index(B.name),B=L?N?"prevunique":"prev":N?"nextunique":"next",D=!A&&"openKeyCursor"in $?$.openKeyCursor(a(T),B):$.openCursor(a(T),B);D.onerror=Be(F),D.onsuccess=pe(function(G){var Q,ee,X,De,Z=D.result;Z?(Z.___id=++Vo,Z.done=!1,Q=Z.continue.bind(Z),ee=(ee=Z.continuePrimaryKey)&&ee.bind(Z),X=Z.advance.bind(Z),De=function(){throw new Error("Cursor not stopped")},Z.trans=S,Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=function(){throw new Error("Cursor not started")},Z.fail=pe(F),Z.next=function(){var ke=this,Pe=1;return this.start(function(){return Pe--?ke.continue():ke.stop()}).then(function(){return ke})},Z.start=function(ke){function Pe(){if(D.result)try{ke()}catch(Ae){Z.fail(Ae)}else Z.done=!0,Z.start=function(){throw new Error("Cursor behind last entry")},Z.stop()}var Nn=new Promise(function(Ae,mt){Ae=pe(Ae),D.onerror=Be(mt),Z.fail=mt,Z.stop=function(Kr){Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=De,Ae(Kr)}});return D.onsuccess=pe(function(Ae){D.onsuccess=Pe,Pe()}),Z.continue=Q,Z.continuePrimaryKey=ee,Z.advance=X,Pe(),Nn},K(Z)):K(null)},F)})},count:function(E){var S=E.query,A=E.trans,R=S.index,L=S.range;return new Promise(function(N,K){var F=A.objectStore(_),T=R.isPrimaryKey?F:F.index(R.name),F=a(L),T=F?T.count(F):T.count();T.onsuccess=pe(function($){return N($.target.result)}),T.onerror=Be(K)})}}}var h,p,m,k=(p=x,m=bi((h=e).objectStoreNames),{schema:{name:h.name,tables:m.map(function(C){return p.objectStore(C)}).map(function(C){var w=C.keyPath,S=C.autoIncrement,_=d(w),E={},S={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:_,keyPath:w,autoIncrement:S,unique:!0,extractKey:gr(w)},indexes:bi(C.indexNames).map(function(A){return C.index(A)}).map(function(N){var R=N.name,L=N.unique,K=N.multiEntry,N=N.keyPath,K={name:R,compound:d(N),keyPath:N,unique:L,multiEntry:K,extractKey:gr(N)};return E[zt(N)]=K}),getIndexByKeyPath:function(A){return E[zt(A)]}};return E[":id"]=S.primaryKey,w!=null&&(E[zt(w)]=S.primaryKey),S})},hasGetAll:0<m.length&&"getAll"in p.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=k.schema,v=k.hasGetAll,k=x.tables.map(l),y={};return k.forEach(function(C){return y[C.name]=C}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(C){if(!y[C])throw new Error("Table '".concat(C,"' not found"));return y[C]},MIN_KEY:-1/0,MAX_KEY:Vt(t),schema:x}}function Ho(e,t,s,a){var l=s.IDBKeyRange;return s.indexedDB,{dbcore:(a=zo(t,l,a),e.dbcore.reduce(function(h,p){return p=p.create,o(o({},h),p(h))},a))}}function xn(e,a){var s=a.db,a=Ho(e._middlewares,s,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(l){var h=l.name;e.core.schema.tables.some(function(p){return p.name===h})&&(l.core=e.core.table(h),e[h]instanceof e.Table&&(e[h].core=l.core))})}function Sn(e,t,s,a){s.forEach(function(l){var h=a[l];t.forEach(function(p){var m=function x(v,k){return V(v,k)||(v=b(v))&&x(v,k)}(p,l);(!m||"value"in m&&m.value===void 0)&&(p===e.Transaction.prototype||p instanceof e.Transaction?M(p,l,{get:function(){return this.table(l)},set:function(x){U(this,l,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):p[l]=new e.Table(l,h))})})}function mr(e,t){t.forEach(function(s){for(var a in s)s[a]instanceof e.Table&&delete s[a]})}function Wo(e,t){return e._cfg.version-t._cfg.version}function Jo(e,t,s,a){var l=e._dbSchema;s.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=pr("$meta",xi("")[0],[]),e._storeNames.push("$meta"));var h=e._createTransaction("readwrite",e._storeNames,l);h.create(s),h._completion.catch(a);var p=h._reject.bind(h),m=H.transless||H;et(function(){return H.trans=h,H.transless=m,t!==0?(xn(e,s),v=t,((x=h).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(k){return k??v}):q.resolve(v)).then(function(k){return C=k,w=h,_=s,E=[],k=(y=e)._versions,S=y._dbSchema=On(0,y.idbdb,_),(k=k.filter(function(A){return A._cfg.version>=C})).length!==0?(k.forEach(function(A){E.push(function(){var R=S,L=A._cfg.dbschema;kn(y,R,_),kn(y,L,_),S=y._dbSchema=L;var N=yr(R,L);N.add.forEach(function(B){vr(_,B[0],B[1].primKey,B[1].indexes)}),N.change.forEach(function(B){if(B.recreate)throw new W.Upgrade("Not yet support for changing primary key");var D=_.objectStore(B.name);B.add.forEach(function(G){return _n(D,G)}),B.change.forEach(function(G){D.deleteIndex(G.name),_n(D,G)}),B.del.forEach(function(G){return D.deleteIndex(G)})});var K=A._cfg.contentUpgrade;if(K&&A._cfg.version>C){xn(y,_),w._memoizedTables={};var F=Ve(L);N.del.forEach(function(B){F[B]=R[B]}),mr(y,[y.Transaction.prototype]),Sn(y,[y.Transaction.prototype],f(F),F),w.schema=F;var T,$=Xe(K);return $&&_t(),N=q.follow(function(){var B;(T=K(w))&&$&&(B=tt.bind(null,null),T.then(B,B))}),T&&typeof T.then=="function"?q.resolve(T):N.then(function(){return T})}}),E.push(function(R){var L,N,K=A._cfg.dbschema;L=K,N=R,[].slice.call(N.db.objectStoreNames).forEach(function(F){return L[F]==null&&N.db.deleteObjectStore(F)}),mr(y,[y.Transaction.prototype]),Sn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),w.schema=y._dbSchema}),E.push(function(R){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===A._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(L){return L!=="$meta"})):R.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return E.length?q.resolve(E.shift()(w.idbtrans)).then(A):q.resolve()}().then(function(){wi(S,_)})):q.resolve();var y,C,w,_,E,S}).catch(p)):(f(l).forEach(function(k){vr(s,k,l[k].primKey,l[k].indexes)}),xn(e,s),void q.follow(function(){return e.on.populate.fire(h)}).catch(p));var x,v})}function Yo(e,t){wi(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var s=On(0,e.idbdb,t);kn(e,e._dbSchema,t);for(var a=0,l=yr(s,e._dbSchema).change;a<l.length;a++){var h=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=t.objectStore(p.name);p.add.forEach(function(x){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(x.src)),_n(m,x)})}(l[a]);if(typeof h=="object")return h.value}}function yr(e,t){var s,a={del:[],add:[],change:[]};for(s in e)t[s]||a.del.push(s);for(s in t){var l=e[s],h=t[s];if(l){var p={name:s,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||l.primKey.auto!==h.primKey.auto)p.recreate=!0,a.change.push(p);else{var m=l.idxByName,x=h.idxByName,v=void 0;for(v in m)x[v]||p.del.push(v);for(v in x){var k=m[v],y=x[v];k?k.src!==y.src&&p.change.push(y):p.add.push(y)}(0<p.del.length||0<p.add.length||0<p.change.length)&&a.change.push(p)}}else a.add.push([s,h])}return a}function vr(e,t,s,a){var l=e.db.createObjectStore(t,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return a.forEach(function(h){return _n(l,h)}),l}function wi(e,t){f(e).forEach(function(s){t.db.objectStoreNames.contains(s)||(Fe&&console.debug("Dexie: Creating missing table",s),vr(t,s,e[s].primKey,e[s].indexes))})}function _n(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function On(e,t,s){var a={};return z(t.objectStoreNames,0).forEach(function(l){for(var h=s.objectStore(l),p=dr(vi(v=h.keyPath),v||"",!0,!1,!!h.autoIncrement,v&&typeof v!="string",!0),m=[],x=0;x<h.indexNames.length;++x){var k=h.index(h.indexNames[x]),v=k.keyPath,k=dr(k.name,v,!!k.unique,!!k.multiEntry,!1,v&&typeof v!="string",!1);m.push(k)}a[l]=pr(l,p,m)}),a}function kn(e,t,s){for(var a=s.db.objectStoreNames,l=0;l<a.length;++l){var h=a[l],p=s.objectStore(h);e._hasGetAll="getAll"in p;for(var m=0;m<p.indexNames.length;++m){var x=p.indexNames[m],v=p.index(x).keyPath,k=typeof v=="string"?v:"["+z(v).join("+")+"]";!t[h]||(v=t[h].idxByName[k])&&(v.name=x,delete t[h].idxByName[k],t[h].idxByName[x]=v)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function xi(e){return e.split(",").map(function(t,s){var a=(t=t.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return dr(a,l||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),d(l),s===0)})}var Go=(Pn.prototype._parseStoresSpec=function(e,t){f(e).forEach(function(s){if(e[s]!==null){var a=xi(e[s]),l=a.shift();if(l.unique=!0,l.multi)throw new W.Schema("Primary key cannot be multi-valued");a.forEach(function(h){if(h.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!h.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),t[s]=pr(s,l,a)}})},Pn.prototype.stores=function(s){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,s):s;var s=t._versions,a={},l={};return s.forEach(function(h){g(a,h._cfg.storesSource),l=h._cfg.dbschema={},h._parseStoresSpec(a,l)}),t._dbSchema=l,mr(t,[t._allTables,t,t.Transaction.prototype]),Sn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],f(l),l),t._storeNames=f(l),this},Pn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Xn(this._cfg.contentUpgrade||le,e),this},Pn);function Pn(){}function br(e,t){var s=e._dbNamesDB;return s||(s=e._dbNamesDB=new We(mn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function wr(e){return e&&typeof e.databases=="function"}function xr(e){return et(function(){return H.letThrough=!0,e()})}function Sr(e){return!("from"in e)}var Oe=function(e,t){if(!this){var s=new Oe;return e&&"d"in e&&g(s,e),s}g(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Ht(e,t,s){var a=ae(t,s);if(!isNaN(a)){if(0<a)throw RangeError();if(Sr(e))return g(e,{from:t,to:s,d:1});var l=e.l,a=e.r;if(ae(s,e.from)<0)return l?Ht(l,t,s):e.l={from:t,to:s,d:1,l:null,r:null},Si(e);if(0<ae(t,e.to))return a?Ht(a,t,s):e.r={from:t,to:s,d:1,l:null,r:null},Si(e);ae(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<ae(s,e.to)&&(e.to=s,e.r=null,e.d=e.l?e.l.d+1:1),s=!e.r,l&&!e.l&&Wt(e,l),a&&s&&Wt(e,a)}}function Wt(e,t){Sr(t)||function s(a,x){var h=x.from,p=x.to,m=x.l,x=x.r;Ht(a,h,p),m&&s(a,m),x&&s(a,x)}(e,t)}function Cn(e,t){var s=_r(t),a=s.next();if(a.done)return!1;for(var l=a.value,h=_r(e),p=h.next(l.from),m=p.value;!a.done&&!p.done;){if(ae(m.from,l.to)<=0&&0<=ae(m.to,l.from))return!0;ae(l.from,m.from)<0?l=(a=s.next(m.from)).value:m=(p=h.next(l.from)).value}return!1}function _r(e){var t=Sr(e)?null:{s:0,n:e};return{next:function(s){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&ae(s,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||ae(s,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Si(e){var t,s,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((s=e.l)===null||s===void 0?void 0:s.d)||0),l=1<a?"r":a<-1?"l":"";l&&(t=l=="r"?"l":"r",s=o({},e),a=e[l],e.from=a.from,e.to=a.to,e[l]=a[l],s[l]=a[t],(e[t]=s).d=_i(s)),e.d=_i(e)}function _i(s){var t=s.r,s=s.l;return(t?s?Math.max(t.d,s.d):t.d:s?s.d:0)+1}function En(e,t){return f(t).forEach(function(s){e[s]?Wt(e[s],t[s]):e[s]=function a(l){var h,p,m={};for(h in l)j(l,h)&&(p=l[h],m[h]=!p||typeof p!="object"||$e.has(p.constructor)?p:a(p));return m}(t[s])}),e}function Or(e,t){return e.all||t.all||Object.keys(e).some(function(s){return t[s]&&Cn(t[s],e[s])})}P(Oe.prototype,((Ne={add:function(e){return Wt(this,e),this},addKey:function(e){return Ht(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(s){return Ht(t,s,s)}),this}})[je]=function(){return _r(this)},Ne));var pt={},kr={},Pr=!1;function An(e){En(kr,e),Pr||(Pr=!0,setTimeout(function(){Pr=!1,Cr(kr,!(kr={}))},0))}function Cr(e,t){t===void 0&&(t=!1);var s=new Set;if(e.all)for(var a=0,l=Object.values(pt);a<l.length;a++)Oi(p=l[a],e,s,t);else for(var h in e){var p,m=/^idb\:\/\/(.*)\/(.*)\//.exec(h);m&&(h=m[1],m=m[2],(p=pt["idb://".concat(h,"/").concat(m)])&&Oi(p,e,s,t))}s.forEach(function(x){return x()})}function Oi(e,t,s,a){for(var l=[],h=0,p=Object.entries(e.queries.query);h<p.length;h++){for(var m=p[h],x=m[0],v=[],k=0,y=m[1];k<y.length;k++){var C=y[k];Or(t,C.obsSet)?C.subscribers.forEach(function(S){return s.add(S)}):a&&v.push(C)}a&&l.push([x,v])}if(a)for(var w=0,_=l;w<_.length;w++){var E=_[w],x=E[0],v=E[1];e.queries.query[x]=v}}function Qo(e){var t=e._state,s=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?me(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,l=Math.round(10*e.verno),h=!1;function p(){if(t.openCanceller!==a)throw new W.DatabaseClosed("db.open() was cancelled")}function m(){return new q(function(C,w){if(p(),!s)throw new W.MissingAPI;var _=e.name,E=t.autoSchema||!l?s.open(_):s.open(_,l);if(!E)throw new W.MissingAPI;E.onerror=Be(w),E.onblocked=pe(e._fireOnBlocked),E.onupgradeneeded=pe(function(S){var A;k=E.transaction,t.autoSchema&&!e._options.allowEmptyDB?(E.onerror=qt,k.abort(),E.result.close(),(A=s.deleteDatabase(_)).onsuccess=A.onerror=pe(function(){w(new W.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(k.onerror=Be(w),S=S.oldVersion>Math.pow(2,62)?0:S.oldVersion,y=S<1,e.idbdb=E.result,h&&Yo(e,k),Jo(e,S/10,k,w))},w),E.onsuccess=pe(function(){k=null;var S,A,R,L,N,K=e.idbdb=E.result,F=z(K.objectStoreNames);if(0<F.length)try{var T=K.transaction((L=F).length===1?L[0]:L,"readonly");if(t.autoSchema)A=K,R=T,(S=e).verno=A.version/10,R=S._dbSchema=On(0,A,R),S._storeNames=z(A.objectStoreNames,0),Sn(S,[S._allTables],f(R),R);else if(kn(e,e._dbSchema,T),((N=yr(On(0,(N=e).idbdb,T),N._dbSchema)).add.length||N.change.some(function($){return $.add.length||$.change.length}))&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),l=K.version+1,h=!0,C(m());xn(e,T)}catch{}Ot.push(e),K.onversionchange=pe(function($){t.vcFired=!0,e.on("versionchange").fire($)}),K.onclose=pe(function($){e.on("close").fire($)}),y&&(N=e._deps,T=_,K=N.indexedDB,N=N.IDBKeyRange,wr(K)||T===mn||br(K,N).put({name:T}).catch(le)),C()},w)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<l)return l=0,m()}return q.reject(C)})}var x,v=t.dbReadyResolve,k=null,y=!1;return q.race([a,(typeof navigator>"u"?q.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function w(){return indexedDB.databases().finally(C)}x=setInterval(w,100),w()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(m)]).then(function(){return p(),t.onReadyBeingFired=[],q.resolve(xr(function(){return e.on.ready.fire(e.vip)})).then(function C(){if(0<t.onReadyBeingFired.length){var w=t.onReadyBeingFired.reduce(Xn,le);return t.onReadyBeingFired=[],q.resolve(xr(function(){return w(e.vip)})).then(C)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(C){t.dbOpenError=C;try{k&&k.abort()}catch{}return a===t.openCanceller&&e._close(),me(C)}).finally(function(){t.openComplete=!0,v()}).then(function(){var C;return y&&(C={},e.tables.forEach(function(w){w.schema.indexes.forEach(function(_){_.name&&(C["idb://".concat(e.name,"/").concat(w.name,"/").concat(_.name)]=new Oe(-1/0,[[[]]]))}),C["idb://".concat(e.name,"/").concat(w.name,"/")]=C["idb://".concat(e.name,"/").concat(w.name,"/:dels")]=new Oe(-1/0,[[[]]])}),it(Ut).fire(C),Cr(C,!0)),e})}function Er(e){function t(h){return e.next(h)}var s=l(t),a=l(function(h){return e.throw(h)});function l(h){return function(x){var m=h(x),x=m.value;return m.done?x:x&&typeof x.then=="function"?x.then(s,a):d(x)?Promise.all(x).then(s,a):s(x)}}return l(t)()}function Rn(e,t,s){for(var a=d(e)?e.slice():[e],l=0;l<s;++l)a.push(t);return a}var Xo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return o(o({},e),{table:function(t){var s=e.table(t),a=s.schema,l={},h=[];function p(y,C,w){var _=zt(y),E=l[_]=l[_]||[],S=y==null?0:typeof y=="string"?1:y.length,A=0<C,A=o(o({},w),{name:A?"".concat(_,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:A,keyTail:C,keyLength:S,extractKey:gr(y),unique:!A&&w.unique});return E.push(A),A.isPrimaryKey||h.push(A),1<S&&p(S===2?y[0]:y.slice(0,S-1),C+1,w),E.sort(function(R,L){return R.keyTail-L.keyTail}),A}t=p(a.primaryKey.keyPath,0,a.primaryKey),l[":id"]=[t];for(var m=0,x=a.indexes;m<x.length;m++){var v=x[m];p(v.keyPath,0,v)}function k(y){var C,w=y.query.index;return w.isVirtual?o(o({},y),{query:{index:w.lowLevelIndex,range:(C=y.query.range,w=w.keyTail,{type:C.type===1?2:C.type,lower:Rn(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,w),lowerOpen:!0,upper:Rn(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,w),upperOpen:!0})}}):y}return o(o({},s),{schema:o(o({},a),{primaryKey:t,indexes:h,getIndexByKeyPath:function(y){return(y=l[zt(y)])&&y[0]}}),count:function(y){return s.count(k(y))},query:function(y){return s.query(k(y))},openCursor:function(y){var C=y.query.index,w=C.keyTail,_=C.isVirtual,E=C.keyLength;return _?s.openCursor(k(y)).then(function(A){return A&&S(A)}):s.openCursor(y);function S(A){return Object.create(A,{continue:{value:function(R){R!=null?A.continue(Rn(R,y.reverse?e.MAX_KEY:e.MIN_KEY,w)):y.unique?A.continue(A.key.slice(0,E).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,w)):A.continue()}},continuePrimaryKey:{value:function(R,L){A.continuePrimaryKey(Rn(R,e.MAX_KEY,w),L)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var R=A.key;return E===1?R[0]:R.slice(0,E)}},value:{get:function(){return A.value}}})}}})}})}};function Ar(e,t,s,a){return s=s||{},a=a||"",f(e).forEach(function(l){var h,p,m;j(t,l)?(h=e[l],p=t[l],typeof h=="object"&&typeof p=="object"&&h&&p?(m=Re(h))!==Re(p)?s[a+l]=t[l]:m==="Object"?Ar(h,p,s,a+l+"."):h!==p&&(s[a+l]=t[l]):h!==p&&(s[a+l]=t[l])):s[a+l]=void 0}),f(t).forEach(function(l){j(e,l)||(s[a+l]=t[l])}),s}function Rr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Zo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return o(o({},e),{table:function(t){var s=e.table(t),a=s.schema.primaryKey;return o(o({},s),{mutate:function(l){var h=H.trans,p=h.table(t).hook,m=p.deleting,x=p.creating,v=p.updating;switch(l.type){case"add":if(x.fire===le)break;return h._promise("readwrite",function(){return k(l)},!0);case"put":if(x.fire===le&&v.fire===le)break;return h._promise("readwrite",function(){return k(l)},!0);case"delete":if(m.fire===le)break;return h._promise("readwrite",function(){return k(l)},!0);case"deleteRange":if(m.fire===le)break;return h._promise("readwrite",function(){return function y(C,w,_){return s.query({trans:C,values:!1,query:{index:a,range:w},limit:_}).then(function(E){var S=E.result;return k({type:"delete",keys:S,trans:C}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):S.length<_?{failures:[],numFailures:0,lastResult:void 0}:y(C,o(o({},w),{lower:S[S.length-1],lowerOpen:!0}),_)})})}(l.trans,l.range,1e4)},!0)}return s.mutate(l);function k(y){var C,w,_,E=H.trans,S=y.keys||Rr(a,y);if(!S)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?o(o({},y),{keys:S}):o({},y)).type!=="delete"&&(y.values=u([],y.values)),y.keys&&(y.keys=u([],y.keys)),C=s,_=S,((w=y).type==="add"?Promise.resolve([]):C.getMany({trans:w.trans,keys:_,cache:"immutable"})).then(function(A){var R=S.map(function(L,N){var K,F,T,$=A[N],B={onerror:null,onsuccess:null};return y.type==="delete"?m.fire.call(B,L,$,E):y.type==="add"||$===void 0?(K=x.fire.call(B,L,y.values[N],E),L==null&&K!=null&&(y.keys[N]=L=K,a.outbound||ne(y.values[N],a.keyPath,L))):(K=Ar($,y.values[N]),(F=v.fire.call(B,K,L,$,E))&&(T=y.values[N],Object.keys(F).forEach(function(D){j(T,D)?T[D]=F[D]:ne(T,D,F[D])}))),B});return s.mutate(y).then(function(L){for(var N=L.failures,K=L.results,F=L.numFailures,L=L.lastResult,T=0;T<S.length;++T){var $=(K||S)[T],B=R[T];$==null?B.onerror&&B.onerror(N[T]):B.onsuccess&&B.onsuccess(y.type==="put"&&A[T]?y.values[T]:$)}return{failures:N,results:K,numFailures:F,lastResult:L}}).catch(function(L){return R.forEach(function(N){return N.onerror&&N.onerror(L)}),Promise.reject(L)})})}}})}})}};function ki(e,t,s){try{if(!t||t.keys.length<e.length)return null;for(var a=[],l=0,h=0;l<t.keys.length&&h<e.length;++l)ae(t.keys[l],e[h])===0&&(a.push(s?re(t.values[l]):t.values[l]),++h);return a.length===e.length?a:null}catch{return null}}var es={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var s=e.table(t);return o(o({},s),{getMany:function(a){if(!a.cache)return s.getMany(a);var l=ki(a.keys,a.trans._cache,a.cache==="clone");return l?q.resolve(l):s.getMany(a).then(function(h){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?re(h):h},h})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),s.mutate(a)}})}}}};function Pi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ci(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ts={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,s=new Oe(e.MIN_KEY,e.MAX_KEY);return o(o({},e),{transaction:function(a,l,h){if(H.subscr&&l!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(H.querier));return e.transaction(a,l,h)},table:function(a){var l=e.table(a),h=l.schema,p=h.primaryKey,y=h.indexes,m=p.extractKey,x=p.outbound,v=p.autoIncrement&&y.filter(function(w){return w.compound&&w.keyPath.includes(p.keyPath)}),k=o(o({},l),{mutate:function(w){function _(D){return D="idb://".concat(t,"/").concat(a,"/").concat(D),L[D]||(L[D]=new Oe)}var E,S,A,R=w.trans,L=w.mutatedParts||(w.mutatedParts={}),N=_(""),K=_(":dels"),F=w.type,B=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Rr(p,w).filter(function(D){return D}),w.values]:[],T=B[0],$=B[1],B=w.trans._cache;return d(T)?(N.addKeys(T),(B=F==="delete"||T.length===$.length?ki(T,B):null)||K.addKeys(T),(B||$)&&(E=_,S=B,A=$,h.indexes.forEach(function(D){var G=E(D.name||"");function Q(X){return X!=null?D.extractKey(X):null}function ee(X){return D.multiEntry&&d(X)?X.forEach(function(De){return G.addKey(De)}):G.addKey(X)}(S||A).forEach(function(X,ke){var Z=S&&Q(S[ke]),ke=A&&Q(A[ke]);ae(Z,ke)!==0&&(Z!=null&&ee(Z),ke!=null&&ee(ke))})}))):T?($={from:T.lower,to:T.upper},K.add($),N.add($)):(N.add(s),K.add(s),h.indexes.forEach(function(D){return _(D.name).add(s)})),l.mutate(w).then(function(D){return!T||w.type!=="add"&&w.type!=="put"||(N.addKeys(D.results),v&&v.forEach(function(G){var Q=w.values.map(function(X){return G.extractKey(X)}),ee=G.keyPath.findIndex(function(X){return X===p.keyPath});D.results.forEach(function(X){return Q[ee]=X}),_(G.name).addKeys(Q)})),R.mutatedParts=En(R.mutatedParts||{},L),D})}}),y=function(_){var E=_.query,_=E.index,E=E.range;return[_,new Oe((_=E.lower)!==null&&_!==void 0?_:e.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},C={get:function(w){return[p,new Oe(w.key)]},getMany:function(w){return[p,new Oe().addKeys(w.keys)]},count:y,query:y,openCursor:y};return f(C).forEach(function(w){k[w]=function(_){var E=H.subscr,S=!!E,A=Pi(H,l)&&Ci(w,_)?_.obsSet={}:E;if(S){var R=function($){return $="idb://".concat(t,"/").concat(a,"/").concat($),A[$]||(A[$]=new Oe)},L=R(""),N=R(":dels"),E=C[w](_),S=E[0],E=E[1];if((w==="query"&&S.isPrimaryKey&&!_.values?N:R(S.name||"")).add(E),!S.isPrimaryKey){if(w!=="count"){var K=w==="query"&&x&&_.values&&l.query(o(o({},_),{values:!1}));return l[w].apply(this,arguments).then(function($){if(w==="query"){if(x&&_.values)return K.then(function(Q){return Q=Q.result,L.addKeys(Q),$});var B=_.values?$.result.map(m):$.result;(_.values?L:N).addKeys(B)}else if(w==="openCursor"){var D=$,G=_.values;return D&&Object.create(D,{key:{get:function(){return N.addKey(D.primaryKey),D.key}},primaryKey:{get:function(){var Q=D.primaryKey;return N.addKey(Q),Q}},value:{get:function(){return G&&L.addKey(D.primaryKey),D.value}}})}return $})}N.add(s)}}return l[w].apply(this,arguments)}}),k}})}};function Ei(e,t,s){if(s.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return s.numFailures===a?null:(t=o({},t),d(t.keys)&&(t.keys=t.keys.filter(function(l,h){return!(h in s.failures)})),"values"in t&&d(t.values)&&(t.values=t.values.filter(function(l,h){return!(h in s.failures)})),t)}function Lr(e,t){return s=e,((a=t).lower===void 0||(a.lowerOpen?0<ae(s,a.lower):0<=ae(s,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?ae(e,t.upper)<0:ae(e,t.upper)<=0));var s,a}function Ai(e,t,C,a,l,h){if(!C||C.length===0)return e;var p=t.query.index,m=p.multiEntry,x=t.query.range,v=a.schema.primaryKey.extractKey,k=p.extractKey,y=(p.lowLevelIndex||p).extractKey,C=C.reduce(function(w,_){var E=w,S=_.type==="add"||_.type==="put"?_.values.filter(function(N){return N=k(N),m&&d(N)?N.some(function(K){return Lr(K,x)}):Lr(N,x)}).map(function(N){return N=re(N),h&&Object.freeze(N),N}):[];switch(_.type){case"add":E=w.concat(t.values?S:S.map(function(K){return v(K)}));break;case"put":var A=new Oe().addKeys(_.values.map(function(K){return v(K)})),E=w.filter(function(K){return K=t.values?v(K):K,!Cn(new Oe(K),A)}).concat(t.values?S:S.map(function(K){return v(K)}));break;case"delete":var R=new Oe().addKeys(_.keys);E=w.filter(function(K){return K=t.values?v(K):K,!Cn(new Oe(K),R)});break;case"deleteRange":var L=_.range;E=w.filter(function(K){return!Lr(v(K),L)})}return E},e);return C===e?e:(C.sort(function(w,_){return ae(y(w),y(_))||ae(v(w),v(_))}),t.limit&&t.limit<1/0&&(C.length>t.limit?C.length=t.limit:e.length===t.limit&&C.length<t.limit&&(l.dirty=!0)),h?Object.freeze(C):C)}function Ri(e,t){return ae(e.lower,t.lower)===0&&ae(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ns(e,t){return function(s,a,l,h){if(s===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=ae(s,a))===0){if(l&&h)return 0;if(l)return 1;if(h)return-1}return a}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(s,a,l,h){if(s===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=ae(s,a))===0){if(l&&h)return 0;if(l)return-1;if(h)return 1}return a}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function rs(e,t,s,a){e.subscribers.add(s),a.addEventListener("abort",function(){var l,h;e.subscribers.delete(s),e.subscribers.size===0&&(l=e,h=t,setTimeout(function(){l.subscribers.size===0&&fe(h,l)},3e3))})}var is={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return o(o({},e),{transaction:function(s,a,l){var h,p,m=e.transaction(s,a,l);return a==="readwrite"&&(p=(h=new AbortController).signal,l=function(x){return function(){if(h.abort(),a==="readwrite"){for(var v=new Set,k=0,y=s;k<y.length;k++){var C=y[k],w=pt["idb://".concat(t,"/").concat(C)];if(w){var _=e.table(C),E=w.optimisticOps.filter(function(G){return G.trans===m});if(m._explicit&&x&&m.mutatedParts)for(var S=0,A=Object.values(w.queries.query);S<A.length;S++)for(var R=0,L=(F=A[S]).slice();R<L.length;R++)Or((T=L[R]).obsSet,m.mutatedParts)&&(fe(F,T),T.subscribers.forEach(function(G){return v.add(G)}));else if(0<E.length){w.optimisticOps=w.optimisticOps.filter(function(G){return G.trans!==m});for(var N=0,K=Object.values(w.queries.query);N<K.length;N++)for(var F,T,$,B=0,D=(F=K[N]).slice();B<D.length;B++)(T=D[B]).res!=null&&m.mutatedParts&&(x&&!T.dirty?($=Object.isFrozen(T.res),$=Ai(T.res,T.req,E,_,T,$),T.dirty?(fe(F,T),T.subscribers.forEach(function(G){return v.add(G)})):$!==T.res&&(T.res=$,T.promise=q.resolve({result:$}))):(T.dirty&&fe(F,T),T.subscribers.forEach(function(G){return v.add(G)})))}}}v.forEach(function(G){return G()})}}},m.addEventListener("abort",l(!1),{signal:p}),m.addEventListener("error",l(!1),{signal:p}),m.addEventListener("complete",l(!0),{signal:p})),m},table:function(s){var a=e.table(s),l=a.schema.primaryKey;return o(o({},a),{mutate:function(h){var p=H.trans;if(l.outbound||p.db._options.cache==="disabled"||p.explicit)return a.mutate(h);var m=pt["idb://".concat(t,"/").concat(s)];return m?(p=a.mutate(h),h.type!=="add"&&h.type!=="put"||!(50<=h.values.length||Rr(l,h).some(function(x){return x==null}))?(m.optimisticOps.push(h),h.mutatedParts&&An(h.mutatedParts),p.then(function(x){0<x.numFailures&&(fe(m.optimisticOps,h),(x=Ei(0,h,x))&&m.optimisticOps.push(x),h.mutatedParts&&An(h.mutatedParts))}),p.catch(function(){fe(m.optimisticOps,h),h.mutatedParts&&An(h.mutatedParts)})):p.then(function(x){var v=Ei(0,o(o({},h),{values:h.values.map(function(w,y){var C,w=(C=l.keyPath)!==null&&C!==void 0&&C.includes(".")?re(w):o({},w);return ne(w,l.keyPath,x.results[y]),w})}),x);m.optimisticOps.push(v),queueMicrotask(function(){return h.mutatedParts&&An(h.mutatedParts)})}),p):a.mutate(h)},query:function(h){if(!Pi(H,a)||!Ci("query",h))return a.query(h);var p=((v=H.trans)===null||v===void 0?void 0:v.db._options.cache)==="immutable",y=H,m=y.requery,x=y.signal,v=function(_,E,S,A){var R=pt["idb://".concat(_,"/").concat(E)];if(!R)return[];if(!(E=R.queries[S]))return[null,!1,R,null];var L=E[(A.query?A.query.index.name:null)||""];if(!L)return[null,!1,R,null];switch(S){case"query":var N=L.find(function(K){return K.req.limit===A.limit&&K.req.values===A.values&&Ri(K.req.query.range,A.query.range)});return N?[N,!0,R,L]:[L.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=A.limit&&(!A.values||K.req.values)&&ns(K.req.query.range,A.query.range)}),!1,R,L];case"count":return N=L.find(function(K){return Ri(K.req.query.range,A.query.range)}),[N,!!N,R,L]}}(t,s,"query",h),k=v[0],y=v[1],C=v[2],w=v[3];return k&&y?k.obsSet=h.obsSet:(y=a.query(h).then(function(_){var E=_.result;if(k&&(k.res=E),p){for(var S=0,A=E.length;S<A;++S)Object.freeze(E[S]);Object.freeze(E)}else _.result=re(E);return _}).catch(function(_){return w&&k&&fe(w,k),Promise.reject(_)}),k={obsSet:h.obsSet,promise:y,subscribers:new Set,type:"query",req:h,dirty:!1},w?w.push(k):(w=[k],(C=C||(pt["idb://".concat(t,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[h.query.index.name||""]=w)),rs(k,w,m,x),k.promise.then(function(_){return{result:Ai(_.result,h,C==null?void 0:C.optimisticOps,a,k,p)}})}})}})}};function Ln(e,t){return new Proxy(e,{get:function(s,a,l){return a==="db"?t:Reflect.get(s,a,l)}})}var We=(ye.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,s=t.filter(function(a){return a._cfg.version===e})[0];return s||(s=new this.Version(e),t.push(s),t.sort(Wo),s.stores({}),this._state.autoSchema=!1,s)},ye.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?e():new q(function(s,a){if(t._state.openComplete)return a(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new W.DatabaseClosed);t.open().catch(le)}t._state.dbReadyPromise.then(s,a)}).then(e)},ye.prototype.use=function(e){var t=e.stack,s=e.create,a=e.level,l=e.name;return l&&this.unuse({stack:t,name:l}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:s,level:a??10,name:l}),e.sort(function(h,p){return h.level-p.level}),this},ye.prototype.unuse=function(e){var t=e.stack,s=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(l){return a?l.create!==a:!!s&&l.name!==s})),this},ye.prototype.open=function(){var e=this;return ft(Ze,function(){return Qo(e)})},ye.prototype._close=function(){var e=this._state,t=Ot.indexOf(this);if(0<=t&&Ot.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new q(function(s){e.dbReadyResolve=s}),e.openCanceller=new q(function(s,a){e.cancelOpen=a}))},ye.prototype.close=function(s){var t=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;t?(s.isBeingOpened&&s.cancelOpen(new W.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new W.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},ye.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new q(function(l,h){function p(){t.close(e);var m=t._deps.indexedDB.deleteDatabase(t.name);m.onsuccess=pe(function(){var x,v,k;x=t._deps,v=t.name,k=x.indexedDB,x=x.IDBKeyRange,wr(k)||v===mn||br(k,x).delete(v).catch(le),l()}),m.onerror=Be(h),m.onblocked=t._fireOnBlocked}if(s)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(p):p()})},ye.prototype.backendDB=function(){return this.idbdb},ye.prototype.isOpen=function(){return this.idbdb!==null},ye.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ye.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ye.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ye.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ye.prototype.transaction=function(){var e=(function(t,s,a){var l=arguments.length;if(l<2)throw new W.InvalidArgument("Too few arguments");for(var h=new Array(l-1);--l;)h[l-1]=arguments[l];return a=h.pop(),[t,at(h),a]}).apply(this,arguments);return this._transaction.apply(this,e)},ye.prototype._transaction=function(e,t,s){var a=this,l=H.trans;l&&l.db===this&&e.indexOf("!")===-1||(l=null);var h,p,m=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(p=t.map(function(v){if(v=v instanceof a.Table?v.name:v,typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),e=="r"||e===ar)h=ar;else{if(e!="rw"&&e!=ur)throw new W.InvalidArgument("Invalid transaction mode: "+e);h=ur}if(l){if(l.mode===ar&&h===ur){if(!m)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l=null}l&&p.forEach(function(v){if(l&&l.storeNames.indexOf(v)===-1){if(!m)throw new W.SubTransaction("Table "+v+" not included in parent transaction.");l=null}}),m&&l&&!l.active&&(l=null)}}catch(v){return l?l._promise(null,function(k,y){y(v)}):me(v)}var x=(function v(k,y,C,w,_){return q.resolve().then(function(){var E=H.transless||H,S=k._createTransaction(y,C,k._dbSchema,w);if(S.explicit=!0,E={trans:S,transless:E},w)S.idbtrans=w.idbtrans;else try{S.create(),S.idbtrans._explicit=!0,k._state.PR1398_maxLoop=3}catch(L){return L.name===Qn.InvalidState&&k.isOpen()&&0<--k._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),k.close({disableAutoOpen:!1}),k.open().then(function(){return v(k,y,C,null,_)})):me(L)}var A,R=Xe(_);return R&&_t(),E=q.follow(function(){var L;(A=_.call(S,S))&&(R?(L=tt.bind(null,null),A.then(L,L)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=Er(A)))},E),(A&&typeof A.then=="function"?q.resolve(A).then(function(L){return S.active?L:me(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return A})).then(function(L){return w&&S._resolve(),S._completion.then(function(){return L})}).catch(function(L){return S._reject(L),me(L)})})}).bind(null,this,h,p,l,s);return l?l._promise(h,x,"lock"):H.trans?ft(H.transless,function(){return a._whenReady(x)}):this._whenReady(x)},ye.prototype.table=function(e){if(!j(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ye);function ye(e,t){var s=this;this._middlewares={},this.verno=0;var a=ye.dependencies;this._options=t=o({addons:ye.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l,h,p,m,x,v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:le,dbReadyPromise:null,cancelOpen:le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};v.dbReadyPromise=new q(function(y){v.dbReadyResolve=y}),v.openCanceller=new q(function(y,C){v.cancelOpen=C}),this._state=v,this.name=e,this.on=Ft(this,"populate","blocked","versionchange","close",{ready:[Xn,le]}),this.on.ready.subscribe=ce(this.on.ready.subscribe,function(y){return function(C,w){ye.vip(function(){var _,E=s._state;E.openComplete?(E.dbOpenError||q.resolve().then(C),w&&y(C)):E.onReadyBeingFired?(E.onReadyBeingFired.push(C),w&&y(C)):(y(C),_=s,w||y(function S(){_.on.ready.unsubscribe(C),_.on.ready.unsubscribe(S)}))})}}),this.Collection=(l=this,Bt(Bo.prototype,function(A,S){this.db=l;var w=ui,_=null;if(S)try{w=S()}catch(R){_=R}var E=A._ctx,S=E.table,A=S.hook.reading.fire;this._ctx={table:S,index:E.index,isPrimKey:!E.index||S.schema.primKey.keyPath&&E.index===S.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:E.or,valueMapper:A!==Nt?A:null}})),this.Table=(h=this,Bt(hi.prototype,function(y,C,w){this.db=h,this._tx=w,this.name=y,this.schema=C,this.hook=h._allTables[y]?h._allTables[y].hook:Ft(null,{creating:[Lo,le],reading:[Ro,Nt],updating:[No,le],deleting:[jo,le]})})),this.Transaction=(p=this,Bt(Uo.prototype,function(y,C,w,_,E){var S=this;this.db=p,this.mode=y,this.storeNames=C,this.schema=w,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=Ft(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(A,R){S._resolve=A,S._reject=R}),this._completion.then(function(){S.active=!1,S.on.complete.fire()},function(A){var R=S.active;return S.active=!1,S.on.error.fire(A),S.parent?S.parent._reject(A):R&&S.idbtrans&&S.idbtrans.abort(),me(A)})})),this.Version=(m=this,Bt(Go.prototype,function(y){this.db=m,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Bt(yi.prototype,function(y,C,w){if(this.db=x,this._ctx={table:y,index:C===":id"?null:C,or:w},this._cmp=this._ascending=ae,this._descending=function(_,E){return ae(E,_)},this._max=function(_,E){return 0<ae(_,E)?_:E},this._min=function(_,E){return ae(_,E)<0?_:E},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Vt(t.IDBKeyRange),this._createTransaction=function(y,C,w,_){return new s.Transaction(y,C,w,s._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(y){s.on("blocked").fire(y),Ot.filter(function(C){return C.name===s.name&&C!==s&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(y)})},this.use(es),this.use(is),this.use(ts),this.use(Xo),this.use(Zo);var k=new Proxy(this,{get:function(y,C,w){if(C==="_vip")return!0;if(C==="table")return function(E){return Ln(s.table(E),k)};var _=Reflect.get(y,C,w);return _ instanceof hi?Ln(_,k):C==="tables"?_.map(function(E){return Ln(E,k)}):C==="_createTransaction"?function(){return Ln(_.apply(this,arguments),k)}:_}});this.vip=k,a.forEach(function(y){return y(s)})}var jn,Ne=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",os=(jr.prototype.subscribe=function(e,t,s){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:s})},jr.prototype[Ne]=function(){return this},jr);function jr(e){this._subscribe=e}try{jn={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{jn={indexedDB:null,IDBKeyRange:null}}function Li(e){var t,s=!1,a=new os(function(l){var h=Xe(e),p,m=!1,x={},v={},k={get closed(){return m},unsubscribe:function(){m||(m=!0,p&&p.abort(),y&&it.storagemutated.unsubscribe(w))}};l.start&&l.start(k);var y=!1,C=function(){return sr(_)},w=function(E){En(x,E),Or(v,x)&&C()},_=function(){var E,S,A;!m&&jn.indexedDB&&(x={},E={},p&&p.abort(),p=new AbortController,A=function(R){var L=xt();try{h&&_t();var N=et(e,R);return N=h?N.finally(tt):N}finally{L&&St()}}(S={subscr:E,signal:p.signal,requery:C,querier:e,trans:null}),Promise.resolve(A).then(function(R){s=!0,t=R,m||S.signal.aborted||(x={},function(L){for(var N in L)if(j(L,N))return;return 1}(v=E)||y||(it(Ut,w),y=!0),sr(function(){return!m&&l.next&&l.next(R)}))},function(R){s=!1,["DatabaseClosedError","AbortError"].includes(R==null?void 0:R.name)||m||sr(function(){m||l.error&&l.error(R)})}))};return setTimeout(C,0),k});return a.hasValue=function(){return s},a.getValue=function(){return t},a}var gt=We;function Nr(e){var t=ot;try{ot=!0,it.storagemutated.fire(e),Cr(e,!0)}finally{ot=t}}P(gt,o(o({},an),{delete:function(e){return new gt(e,{addons:[]}).delete()},exists:function(e){return new gt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=gt.dependencies,s=t.indexedDB,t=t.IDBKeyRange,(wr(s)?Promise.resolve(s.databases()).then(function(a){return a.map(function(l){return l.name}).filter(function(l){return l!==mn})}):br(s,t).toCollection().primaryKeys()).then(e)}catch{return me(new W.MissingAPI)}var t,s},defineClass:function(){return function(e){g(this,e)}},ignoreTransaction:function(e){return H.trans?ft(H.transless,e):e()},vip:xr,async:function(e){return function(){try{var t=Er(e.apply(this,arguments));return t&&typeof t.then=="function"?t:q.resolve(t)}catch(s){return me(s)}}},spawn:function(e,t,s){try{var a=Er(e.apply(s,t||[]));return a&&typeof a.then=="function"?a:q.resolve(a)}catch(l){return me(l)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(e,t){return t=q.resolve(typeof e=="function"?gt.ignoreTransaction(e):e).timeout(t||6e4),H.trans?H.trans.waitFor(t):t},Promise:q,debug:{get:function(){return Fe},set:function(e){ti(e)}},derive:I,extend:g,props:P,override:ce,Events:Ft,on:it,liveQuery:Li,extendObservabilitySet:En,getByKeyPath:ue,setByKeyPath:ne,delByKeyPath:function(e,t){typeof t=="string"?ne(e,t,void 0):"length"in t&&[].map.call(t,function(s){ne(e,s,void 0)})},shallowClone:Ve,deepClone:re,getObjectDiff:Ar,cmp:ae,asap:se,minKey:-1/0,addons:[],connections:Ot,errnames:Qn,dependencies:jn,cache:pt,semVer:"4.0.7",version:"4.0.7".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,s){return e+t/Math.pow(10,2*s)})})),gt.maxKey=Vt(gt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(it(Ut,function(e){ot||(e=new CustomEvent(hr,{detail:e}),ot=!0,dispatchEvent(e),ot=!1)}),addEventListener(hr,function(e){e=e.detail,ot||Nr(e)}));var Ct,ot=!1,ji=function(){};return typeof BroadcastChannel<"u"&&((ji=function(){(Ct=new BroadcastChannel(hr)).onmessage=function(e){return e.data&&Nr(e.data)}})(),typeof Ct.unref=="function"&&Ct.unref(),it(Ut,function(e){ot||Ct.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!We.disableBfCache&&e.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),Ct!=null&&Ct.close();for(var t=0,s=Ot;t<s.length;t++)s[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!We.disableBfCache&&e.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),ji(),Nr({all:new Oe(-1/0,[[]])}))})),q.rejectionMapper=function(e,t){return!e||e instanceof bt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ei[e.name]?e:(t=new ei[e.name](t||e.message,e),"stack"in e&&M(t,"stack",{get:function(){return this.inner.stack}}),t)},ti(Fe),o(We,Object.freeze({__proto__:null,Dexie:We,liveQuery:Li,Entity:li,cmp:ae,PropModSymbol:He,PropModification:Mt,replacePrefix:function(e,t){return new Mt({replacePrefix:[e,t]})},add:function(e){return new Mt({add:e})},remove:function(e){return new Mt({remove:e})},default:We,RangeSet:Oe,mergeRanges:Wt,rangesOverlap:Cn}),{default:We}),We})})(Oo);var Ca=Oo.exports;const Vr=Pa(Ca),Vi=Symbol.for("Dexie"),zr=globalThis[Vi]||(globalThis[Vi]=Vr);if(Vr.semVer!==zr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Vr.semVer} and ${zr.semVer}`);const Ea=[{name:"Dominion"},{name:"Renaissance"},{name:"Empires"}],Aa=[{name:"Village"},{name:"Smithy"}],Ra=[{name:"Border Guard"},{name:"Ducat"}],zi=i=>n=>({...n,expansionName:i}),La=[...Aa.map(zi("Dominion")),...Ra.map(zi("Renaissance"))],ja=1,Zt=new zr("dominion");Zt.version(ja).stores({expansions:"++id, &name",cards:"++id, &name, expansionId"});async function Na(){const i=Zt.table("expansions"),n=Zt.table("cards");for(const r of Ea)await i.get({name:r.name})==null&&await i.add(r);for(const r of La){if(await n.get({name:r.name})!=null)continue;const u=await i.get({name:r.expansionName});if(u==null)throw new Error(`Card is set with an expansion name that does not exist, please check, card: ${r.name}, expansion: ${r.expansionName}`);const c=u.id;await n.add({name:r.name,expansionId:c})}}Na().catch(console.error);const Ka={expansions:qe([])[0]},ko=Jn(Ka);function Ta(i){const[n,r]=qe([]);return Zt.table("expansions").toArray().then(o=>{console.log("JJ: Expansion values",o),r(o)}).catch(console.error),we(ko.Provider,{value:{expansions:n},get children(){return i.children}})}function Ia(){return nn(ko)}const Da={"selection-list":"_selection-list_sahnb_1"};var $a=Qe("<h1>"),Fa=Qe("<div>"),Ba=Qe("<label>"),Ma=Qe("<input type=checkbox>");function qa(){const{expansions:i}=Ia(),{t:n}=_o();return console.log("JJ: Expansions",i),[(()=>{var r=$a();return Ye(r,()=>n("Set selection")),r})(),(()=>{var r=Fa();return Ye(r,we(ws,{get each(){return i()},children:o=>{const u=`expansion-${o.name}`;return[(()=>{var c=Ba();return Lt(c,"for",u),Ye(c,()=>o.name),c})(),(()=>{var c=Ma();return Lt(c,"id",u),c})()]}})),Ke(()=>Gt(r,Da["selection-list"])),r})()]}var Ua=Qe("<h1>Page 2");function Va(){return Ua()}const za=[{path:"/",component:ka,children:[{path:"/",component:qa},{path:"/page-2",component:Va}]}];function Ha(){return we(Ta,{get children(){return we(ga,{get base(){return"/jack-of-all-dominion-2"},children:za})}})}const Wa={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,n){console&&console[i]&&console[i].apply(console,n)}};class Un{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,r)}init(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||Wa,this.options=r,this.debug=r.debug}log(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"log","",!0)}warn(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"warn","",!0)}error(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"error","")}deprecate(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(n,r,o,u){return u&&!this.debug?null:(typeof n[0]=="string"&&(n[0]=`${o}${this.prefix} ${n[0]}`),this.logger[r](n))}create(n){return new Un(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new Un(this.logger,n)}}var Ue=new Un;class Gn{constructor(){this.observers={}}on(n,r){return n.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const u=this.observers[o].get(r)||0;this.observers[o].set(r,u+1)}),this}off(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n].delete(r)}}emit(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(f=>{let[d,g]=f;for(let b=0;b<g;b++)d(...o)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(f=>{let[d,g]=f;for(let b=0;b<g;b++)d.apply(d,[n,...o])})}}function Jt(){let i,n;const r=new Promise((o,u)=>{i=o,n=u});return r.resolve=i,r.reject=n,r}function Hi(i){return i==null?"":""+i}function Ja(i,n,r){i.forEach(o=>{n[o]&&(r[o]=n[o])})}const Ya=/###/g;function Qt(i,n,r){function o(d){return d&&d.indexOf("###")>-1?d.replace(Ya,"."):d}function u(){return!i||typeof i=="string"}const c=typeof n!="string"?n:n.split(".");let f=0;for(;f<c.length-1;){if(u())return{};const d=o(c[f]);!i[d]&&r&&(i[d]=new r),Object.prototype.hasOwnProperty.call(i,d)?i=i[d]:i={},++f}return u()?{}:{obj:i,k:o(c[f])}}function Wi(i,n,r){const{obj:o,k:u}=Qt(i,n,Object);if(o!==void 0||n.length===1){o[u]=r;return}let c=n[n.length-1],f=n.slice(0,n.length-1),d=Qt(i,f,Object);for(;d.obj===void 0&&f.length;)c=`${f[f.length-1]}.${c}`,f=f.slice(0,f.length-1),d=Qt(i,f,Object),d&&d.obj&&typeof d.obj[`${d.k}.${c}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${c}`]=r}function Ga(i,n,r,o){const{obj:u,k:c}=Qt(i,n,Object);u[c]=u[c]||[],u[c].push(r)}function Vn(i,n){const{obj:r,k:o}=Qt(i,n);if(r)return r[o]}function Qa(i,n,r){const o=Vn(i,r);return o!==void 0?o:Vn(n,r)}function Po(i,n,r){for(const o in n)o!=="__proto__"&&o!=="constructor"&&(o in i?typeof i[o]=="string"||i[o]instanceof String||typeof n[o]=="string"||n[o]instanceof String?r&&(i[o]=n[o]):Po(i[o],n[o],r):i[o]=n[o]);return i}function At(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Za(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,n=>Xa[n]):i}class eu{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const r=this.regExpMap.get(n);if(r!==void 0)return r;const o=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,o),this.regExpQueue.push(n),o}}const tu=[" ",",","?","!",";"],nu=new eu(20);function ru(i,n,r){n=n||"",r=r||"";const o=tu.filter(f=>n.indexOf(f)<0&&r.indexOf(f)<0);if(o.length===0)return!0;const u=nu.getRegExp(`(${o.map(f=>f==="?"?"\\?":f).join("|")})`);let c=!u.test(i);if(!c){const f=i.indexOf(r);f>0&&!u.test(i.substring(0,f))&&(c=!0)}return c}function Hr(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[n])return i[n];const o=n.split(r);let u=i;for(let c=0;c<o.length;){if(!u||typeof u!="object")return;let f,d="";for(let g=c;g<o.length;++g)if(g!==c&&(d+=r),d+=o[g],f=u[d],f!==void 0){if(["string","number","boolean"].indexOf(typeof f)>-1&&g<o.length-1)continue;c+=g-c+1;break}u=f}return u}function zn(i){return i&&i.indexOf("_")>0?i.replace("_","-"):i}class Ji extends Gn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const r=this.options.ns.indexOf(n);r>-1&&this.options.ns.splice(r,1)}getResource(n,r,o){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,f=u.ignoreJSONStructure!==void 0?u.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;n.indexOf(".")>-1?d=n.split("."):(d=[n,r],o&&(Array.isArray(o)?d.push(...o):typeof o=="string"&&c?d.push(...o.split(c)):d.push(o)));const g=Vn(this.data,d);return!g&&!r&&!o&&n.indexOf(".")>-1&&(n=d[0],r=d[1],o=d.slice(2).join(".")),g||!f||typeof o!="string"?g:Hr(this.data&&this.data[n]&&this.data[n][r],o,c)}addResource(n,r,o,u){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const f=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let d=[n,r];o&&(d=d.concat(f?o.split(f):o)),n.indexOf(".")>-1&&(d=n.split("."),u=r,r=d[1]),this.addNamespaces(r),Wi(this.data,d,u),c.silent||this.emit("added",n,r,o,u)}addResources(n,r,o){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const c in o)(typeof o[c]=="string"||Object.prototype.toString.apply(o[c])==="[object Array]")&&this.addResource(n,r,c,o[c],{silent:!0});u.silent||this.emit("added",n,r,o)}addResourceBundle(n,r,o,u,c){let f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},d=[n,r];n.indexOf(".")>-1&&(d=n.split("."),u=o,o=r,r=d[1]),this.addNamespaces(r);let g=Vn(this.data,d)||{};f.skipCopy||(o=JSON.parse(JSON.stringify(o))),u?Po(g,o,c):g={...g,...o},Wi(this.data,d,g),f.silent||this.emit("added",n,r,o)}removeResourceBundle(n,r){this.hasResourceBundle(n,r)&&delete this.data[n][r],this.removeNamespaces(r),this.emit("removed",n,r)}hasResourceBundle(n,r){return this.getResource(n,r)!==void 0}getResourceBundle(n,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(n,r)}:this.getResource(n,r)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const r=this.getDataByLanguage(n);return!!(r&&Object.keys(r)||[]).find(u=>r[u]&&Object.keys(r[u]).length>0)}toJSON(){return this.data}}var Co={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,n,r,o,u){return i.forEach(c=>{this.processors[c]&&(n=this.processors[c].process(n,r,o,u))}),n}};const Yi={};class Hn extends Gn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ja(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ue.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const o=this.resolve(n,r);return o&&o.res!==void 0}extractFromKey(n,r){let o=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const u=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let c=r.ns||this.options.defaultNS||[];const f=o&&n.indexOf(o)>-1,d=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!ru(n,o,u);if(f&&!d){const g=n.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:n,namespaces:c};const b=n.split(o);(o!==u||o===u&&this.options.ns.indexOf(b[0])>-1)&&(c=b.shift()),n=b.join(u)}return typeof c=="string"&&(c=[c]),{key:n,namespaces:c}}translate(n,r,o){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const u=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,c=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:f,namespaces:d}=this.extractFromKey(n[n.length-1],r),g=d[d.length-1],b=r.lng||this.language,O=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(b&&b.toLowerCase()==="cimode"){if(O){const J=r.nsSeparator||this.options.nsSeparator;return u?{res:`${g}${J}${f}`,usedKey:f,exactUsedKey:f,usedLng:b,usedNS:g,usedParams:this.getUsedParamsDetails(r)}:`${g}${J}${f}`}return u?{res:f,usedKey:f,exactUsedKey:f,usedLng:b,usedNS:g,usedParams:this.getUsedParamsDetails(r)}:f}const j=this.resolve(n,r);let P=j&&j.res;const U=j&&j.usedKey||f,M=j&&j.exactUsedKey||f,I=Object.prototype.toString.apply(P),V=["[object Number]","[object Function]","[object RegExp]"],Y=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,z=!this.i18nFormat||this.i18nFormat.handleAsObject;if(z&&P&&(typeof P!="string"&&typeof P!="boolean"&&typeof P!="number")&&V.indexOf(I)<0&&!(typeof Y=="string"&&I==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const J=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,P,{...r,ns:d}):`key '${f} (${this.language})' returned an object instead of string.`;return u?(j.res=J,j.usedParams=this.getUsedParamsDetails(r),j):J}if(c){const J=I==="[object Array]",se=J?[]:{},ue=J?M:U;for(const ne in P)if(Object.prototype.hasOwnProperty.call(P,ne)){const Ve=`${ue}${c}${ne}`;se[ne]=this.translate(Ve,{...r,joinArrays:!1,ns:d}),se[ne]===Ve&&(se[ne]=P[ne])}P=se}}else if(z&&typeof Y=="string"&&I==="[object Array]")P=P.join(Y),P&&(P=this.extendTranslation(P,n,r,o));else{let J=!1,se=!1;const ue=r.count!==void 0&&typeof r.count!="string",ne=Hn.hasDefaultValue(r),Ve=ue?this.pluralResolver.getSuffix(b,r.count,r):"",jt=r.ordinal&&ue?this.pluralResolver.getSuffix(b,r.count,{ordinal:!1}):"",at=ue&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),$e=at&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${Ve}`]||r[`defaultValue${jt}`]||r.defaultValue;!this.isValidLookup(P)&&ne&&(J=!0,P=$e),this.isValidLookup(P)||(se=!0,P=f);const re=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:P,be=ne&&$e!==P&&this.options.updateMissing;if(se||J||be){if(this.logger.log(be?"updateKey":"missingKey",b,g,f,be?$e:P),c){const fe=this.resolve(f,{...r,keySeparator:!1});fe&&fe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Re=[];const je=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&je&&je[0])for(let fe=0;fe<je.length;fe++)Re.push(je[fe]);else this.options.saveMissingTo==="all"?Re=this.languageUtils.toResolveHierarchy(r.lng||this.language):Re.push(r.lng||this.language);const Ie=(fe,ge,xe)=>{const Xe=ne&&xe!==P?xe:re;this.options.missingKeyHandler?this.options.missingKeyHandler(fe,g,ge,Xe,be,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(fe,g,ge,Xe,be,r),this.emit("missingKey",fe,g,ge,P)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ue?Re.forEach(fe=>{const ge=this.pluralResolver.getSuffixes(fe,r);at&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&ge.push(`${this.options.pluralSeparator}zero`),ge.forEach(xe=>{Ie([fe],f+xe,r[`defaultValue${xe}`]||$e)})}):Ie(Re,f,$e))}P=this.extendTranslation(P,n,r,j,o),se&&P===f&&this.options.appendNamespaceToMissingKey&&(P=`${g}:${f}`),(se||J)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?P=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}:${f}`:f,J?P:void 0):P=this.options.parseMissingKeyHandler(P))}return u?(j.res=P,j.usedParams=this.getUsedParamsDetails(r),j):P}extendTranslation(n,r,o,u,c){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||u.usedLng,u.usedNS,u.usedKey,{resolved:u});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const b=typeof n=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let O;if(b){const P=n.match(this.interpolator.nestingRegexp);O=P&&P.length}let j=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(j={...this.options.interpolation.defaultVariables,...j}),n=this.interpolator.interpolate(n,j,o.lng||this.language,o),b){const P=n.match(this.interpolator.nestingRegexp),U=P&&P.length;O<U&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&u&&u.res&&(o.lng=u.usedLng),o.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var P=arguments.length,U=new Array(P),M=0;M<P;M++)U[M]=arguments[M];return c&&c[0]===U[0]&&!o.context?(f.logger.warn(`It seems you are nesting recursively key: ${U[0]} in key: ${r[0]}`),null):f.translate(...U,r)},o)),o.interpolation&&this.interpolator.reset()}const d=o.postProcess||this.options.postProcess,g=typeof d=="string"?[d]:d;return n!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(n=Co.handle(g,n,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...u,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),n}resolve(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,u,c,f,d;return typeof n=="string"&&(n=[n]),n.forEach(g=>{if(this.isValidLookup(o))return;const b=this.extractFromKey(g,r),O=b.key;u=O;let j=b.namespaces;this.options.fallbackNS&&(j=j.concat(this.options.fallbackNS));const P=r.count!==void 0&&typeof r.count!="string",U=P&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),M=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",I=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);j.forEach(V=>{this.isValidLookup(o)||(d=V,!Yi[`${I[0]}-${V}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(d)&&(Yi[`${I[0]}-${V}`]=!0,this.logger.warn(`key "${u}" for languages "${I.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(Y=>{if(this.isValidLookup(o))return;f=Y;const z=[O];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(z,O,Y,V,r);else{let J;P&&(J=this.pluralResolver.getSuffix(Y,r.count,r));const se=`${this.options.pluralSeparator}zero`,ue=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(P&&(z.push(O+J),r.ordinal&&J.indexOf(ue)===0&&z.push(O+J.replace(ue,this.options.pluralSeparator)),U&&z.push(O+se)),M){const ne=`${O}${this.options.contextSeparator}${r.context}`;z.push(ne),P&&(z.push(ne+J),r.ordinal&&J.indexOf(ue)===0&&z.push(ne+J.replace(ue,this.options.pluralSeparator)),U&&z.push(ne+se))}}let ce;for(;ce=z.pop();)this.isValidLookup(o)||(c=ce,o=this.getResource(Y,V,ce,r))}))})}),{res:o,usedKey:u,exactUsedKey:c,usedLng:f,usedNS:d}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,r,o){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,r,o,u):this.resourceStore.getResource(n,r,o,u)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=n.replace&&typeof n.replace!="string";let u=o?n.replace:n;if(o&&typeof n.count<"u"&&(u.count=n.count),this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),!o){u={...u};for(const c of r)delete u[c]}return u}static hasDefaultValue(n){const r="defaultValue";for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&r===o.substring(0,r.length)&&n[o]!==void 0)return!0;return!1}}function Fr(i){return i.charAt(0).toUpperCase()+i.slice(1)}class Gi{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ue.create("languageUtils")}getScriptPartFromCode(n){if(n=zn(n),!n||n.indexOf("-")<0)return null;const r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(n){if(n=zn(n),!n||n.indexOf("-")<0)return n;const r=n.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(n){if(typeof n=="string"&&n.indexOf("-")>-1){const r=["hans","hant","latn","cyrl","cans","mong","arab"];let o=n.split("-");return this.options.lowerCaseLng?o=o.map(u=>u.toLowerCase()):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),r.indexOf(o[1].toLowerCase())>-1&&(o[1]=Fr(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),r.indexOf(o[1].toLowerCase())>-1&&(o[1]=Fr(o[1].toLowerCase())),r.indexOf(o[2].toLowerCase())>-1&&(o[2]=Fr(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let r;return n.forEach(o=>{if(r)return;const u=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(u))&&(r=u)}),!r&&this.options.supportedLngs&&n.forEach(o=>{if(r)return;const u=this.getLanguagePartFromCode(o);if(this.isSupportedCode(u))return r=u;r=this.options.supportedLngs.find(c=>{if(c===u)return c;if(!(c.indexOf("-")<0&&u.indexOf("-")<0)&&(c.indexOf("-")>0&&u.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===u||c.indexOf(u)===0&&u.length>1))return c})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];let o=n[r];return o||(o=n[this.getScriptPartFromCode(r)]),o||(o=n[this.formatLanguageCode(r)]),o||(o=n[this.getLanguagePartFromCode(r)]),o||(o=n.default),o||[]}toResolveHierarchy(n,r){const o=this.getFallbackCodes(r||this.options.fallbackLng||[],n),u=[],c=f=>{f&&(this.isSupportedCode(f)?u.push(f):this.logger.warn(`rejecting language code not found in supportedLngs: ${f}`))};return typeof n=="string"&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(n))):typeof n=="string"&&c(this.formatLanguageCode(n)),o.forEach(f=>{u.indexOf(f)<0&&c(this.formatLanguageCode(f))}),u}}let iu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ou={1:function(i){return+(i>1)},2:function(i){return+(i!=1)},3:function(i){return 0},4:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},5:function(i){return i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5},6:function(i){return i==1?0:i>=2&&i<=4?1:2},7:function(i){return i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},8:function(i){return i==1?0:i==2?1:i!=8&&i!=11?2:3},9:function(i){return+(i>=2)},10:function(i){return i==1?0:i==2?1:i<7?2:i<11?3:4},11:function(i){return i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3},12:function(i){return+(i%10!=1||i%100==11)},13:function(i){return+(i!==0)},14:function(i){return i==1?0:i==2?1:i==3?2:3},15:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2},16:function(i){return i%10==1&&i%100!=11?0:i!==0?1:2},17:function(i){return i==1||i%10==1&&i%100!=11?0:1},18:function(i){return i==0?0:i==1?1:2},19:function(i){return i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3},20:function(i){return i==1?0:i==0||i%100>0&&i%100<20?1:2},21:function(i){return i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0},22:function(i){return i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3}};const su=["v1","v2","v3"],au=["v4"],Qi={zero:0,one:1,two:2,few:3,many:4,other:5};function uu(){const i={};return iu.forEach(n=>{n.lngs.forEach(r=>{i[r]={numbers:n.nr,plurals:ou[n.fc]}})}),i}class lu{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=r,this.logger=Ue.create("pluralResolver"),(!this.options.compatibilityJSON||au.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=uu()}addRule(n,r){this.rules[n]=r}getRule(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(zn(n==="dev"?"en":n),{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}needsPlural(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getRule(n,r);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}getPluralFormsOfKey(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,o).map(u=>`${r}${u}`)}getSuffixes(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getRule(n,r);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort((u,c)=>Qi[u]-Qi[c]).map(u=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${u}`):o.numbers.map(u=>this.getSuffix(n,u,r)):[]}getSuffix(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const u=this.getRule(n,o);return u?this.shouldUseIntlApi()?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${u.select(r)}`:this.getSuffixRetroCompatible(u,r):(this.logger.warn(`no plural rule found for: ${n}`),"")}getSuffixRetroCompatible(n,r){const o=n.noAbs?n.plurals(r):n.plurals(Math.abs(r));let u=n.numbers[o];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(u===2?u="plural":u===1&&(u=""));const c=()=>this.options.prepend&&u.toString()?this.options.prepend+u.toString():u.toString();return this.options.compatibilityJSON==="v1"?u===1?"":typeof u=="number"?`_plural_${u.toString()}`:c():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?c():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}shouldUseIntlApi(){return!su.includes(this.options.compatibilityJSON)}}function Xi(i,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,c=Qa(i,n,r);return!c&&u&&typeof r=="string"&&(c=Hr(i,r,o),c===void 0&&(c=Hr(n,r,o))),c}class cu{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ue.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||(r=>r),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:r,escapeValue:o,useRawValueToEscape:u,prefix:c,prefixEscaped:f,suffix:d,suffixEscaped:g,formatSeparator:b,unescapeSuffix:O,unescapePrefix:j,nestingPrefix:P,nestingPrefixEscaped:U,nestingSuffix:M,nestingSuffixEscaped:I,nestingOptionsSeparator:V,maxReplaces:Y,alwaysFormat:z}=n.interpolation;this.escape=r!==void 0?r:Za,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=u!==void 0?u:!1,this.prefix=c?At(c):f||"{{",this.suffix=d?At(d):g||"}}",this.formatSeparator=b||",",this.unescapePrefix=O?"":j||"-",this.unescapeSuffix=this.unescapePrefix?"":O||"",this.nestingPrefix=P?At(P):U||At("$t("),this.nestingSuffix=M?At(M):I||At(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=Y||1e3,this.alwaysFormat=z!==void 0?z:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(r,o)=>r&&r.source===o?(r.lastIndex=0,r):new RegExp(o,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,r,o,u){let c,f,d;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function b(M){return M.replace(/\$/g,"$$$$")}const O=M=>{if(M.indexOf(this.formatSeparator)<0){const z=Xi(r,g,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(z,void 0,o,{...u,...r,interpolationkey:M}):z}const I=M.split(this.formatSeparator),V=I.shift().trim(),Y=I.join(this.formatSeparator).trim();return this.format(Xi(r,g,V,this.options.keySeparator,this.options.ignoreJSONStructure),Y,o,{...u,...r,interpolationkey:V})};this.resetRegExp();const j=u&&u.missingInterpolationHandler||this.options.missingInterpolationHandler,P=u&&u.interpolation&&u.interpolation.skipOnVariables!==void 0?u.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>b(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?b(this.escape(M)):b(M)}].forEach(M=>{for(d=0;c=M.regex.exec(n);){const I=c[1].trim();if(f=O(I),f===void 0)if(typeof j=="function"){const Y=j(n,c,u);f=typeof Y=="string"?Y:""}else if(u&&Object.prototype.hasOwnProperty.call(u,I))f="";else if(P){f=c[0];continue}else this.logger.warn(`missed to pass in variable ${I} for interpolating ${n}`),f="";else typeof f!="string"&&!this.useRawValueToEscape&&(f=Hi(f));const V=M.safeValue(f);if(n=n.replace(c[0],V),P?(M.regex.lastIndex+=f.length,M.regex.lastIndex-=c[0].length):M.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),n}nest(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u,c,f;function d(g,b){const O=this.nestingOptionsSeparator;if(g.indexOf(O)<0)return g;const j=g.split(new RegExp(`${O}[ ]*{`));let P=`{${j[1]}`;g=j[0],P=this.interpolate(P,f);const U=P.match(/'/g),M=P.match(/"/g);(U&&U.length%2===0&&!M||M.length%2!==0)&&(P=P.replace(/'/g,'"'));try{f=JSON.parse(P),b&&(f={...b,...f})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,I),`${g}${O}${P}`}return f.defaultValue&&f.defaultValue.indexOf(this.prefix)>-1&&delete f.defaultValue,g}for(;u=this.nestingRegexp.exec(n);){let g=[];f={...o},f=f.replace&&typeof f.replace!="string"?f.replace:f,f.applyPostProcessor=!1,delete f.defaultValue;let b=!1;if(u[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(u[1])){const O=u[1].split(this.formatSeparator).map(j=>j.trim());u[1]=O.shift(),g=O,b=!0}if(c=r(d.call(this,u[1].trim(),f),f),c&&u[0]===n&&typeof c!="string")return c;typeof c!="string"&&(c=Hi(c)),c||(this.logger.warn(`missed to resolve ${u[1]} for nesting ${n}`),c=""),b&&(c=g.reduce((O,j)=>this.format(O,j,o.lng,{...o,interpolationkey:u[1].trim()}),c.trim())),n=n.replace(u[0],c),this.regexp.lastIndex=0}return n}}function fu(i){let n=i.toLowerCase().trim();const r={};if(i.indexOf("(")>-1){const o=i.split("(");n=o[0].toLowerCase().trim();const u=o[1].substring(0,o[1].length-1);n==="currency"&&u.indexOf(":")<0?r.currency||(r.currency=u.trim()):n==="relativetime"&&u.indexOf(":")<0?r.range||(r.range=u.trim()):u.split(";").forEach(f=>{if(!f)return;const[d,...g]=f.split(":"),b=g.join(":").trim().replace(/^'+|'+$/g,"");r[d.trim()]||(r[d.trim()]=b),b==="false"&&(r[d.trim()]=!1),b==="true"&&(r[d.trim()]=!0),isNaN(b)||(r[d.trim()]=parseInt(b,10))})}return{formatName:n,formatOptions:r}}function Rt(i){const n={};return function(o,u,c){const f=u+JSON.stringify(c);let d=n[f];return d||(d=i(zn(u),c),n[f]=d),d(o)}}class hu{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ue.create("formatter"),this.options=n,this.formats={number:Rt((r,o)=>{const u=new Intl.NumberFormat(r,{...o});return c=>u.format(c)}),currency:Rt((r,o)=>{const u=new Intl.NumberFormat(r,{...o,style:"currency"});return c=>u.format(c)}),datetime:Rt((r,o)=>{const u=new Intl.DateTimeFormat(r,{...o});return c=>u.format(c)}),relativetime:Rt((r,o)=>{const u=new Intl.RelativeTimeFormat(r,{...o});return c=>u.format(c,o.range||"day")}),list:Rt((r,o)=>{const u=new Intl.ListFormat(r,{...o});return c=>u.format(c)})},this.init(n)}init(n){const o=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}add(n,r){this.formats[n.toLowerCase().trim()]=r}addCached(n,r){this.formats[n.toLowerCase().trim()]=Rt(r)}format(n,r,o){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((d,g)=>{const{formatName:b,formatOptions:O}=fu(g);if(this.formats[b]){let j=d;try{const P=u&&u.formatParams&&u.formatParams[u.interpolationkey]||{},U=P.locale||P.lng||u.locale||u.lng||o;j=this.formats[b](d,U,{...O,...u,...P})}catch(P){this.logger.warn(P)}return j}else this.logger.warn(`there was no format function for ${b}`);return d},n)}}function du(i,n){i.pending[n]!==void 0&&(delete i.pending[n],i.pendingCount--)}class pu extends Gn{constructor(n,r,o){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=r,this.services=o,this.languageUtils=o.languageUtils,this.options=u,this.logger=Ue.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=u.maxParallelReads||10,this.readingCalls=0,this.maxRetries=u.maxRetries>=0?u.maxRetries:5,this.retryTimeout=u.retryTimeout>=1?u.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(o,u.backend,u)}queueLoad(n,r,o,u){const c={},f={},d={},g={};return n.forEach(b=>{let O=!0;r.forEach(j=>{const P=`${b}|${j}`;!o.reload&&this.store.hasResourceBundle(b,j)?this.state[P]=2:this.state[P]<0||(this.state[P]===1?f[P]===void 0&&(f[P]=!0):(this.state[P]=1,O=!1,f[P]===void 0&&(f[P]=!0),c[P]===void 0&&(c[P]=!0),g[j]===void 0&&(g[j]=!0)))}),O||(d[b]=!0)}),(Object.keys(c).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:u}),{toLoad:Object.keys(c),pending:Object.keys(f),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(g)}}loaded(n,r,o){const u=n.split("|"),c=u[0],f=u[1];r&&this.emit("failedLoading",c,f,r),o&&this.store.addResourceBundle(c,f,o,void 0,void 0,{skipCopy:!0}),this.state[n]=r?-1:2;const d={};this.queue.forEach(g=>{Ga(g.loaded,[c],f),du(g,n),r&&g.errors.push(r),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(b=>{d[b]||(d[b]={});const O=g.loaded[b];O.length&&O.forEach(j=>{d[b][j]===void 0&&(d[b][j]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(g=>!g.done)}read(n,r,o){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,f=arguments.length>5?arguments[5]:void 0;if(!n.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:r,fcName:o,tried:u,wait:c,callback:f});return}this.readingCalls++;const d=(b,O)=>{if(this.readingCalls--,this.waitingReads.length>0){const j=this.waitingReads.shift();this.read(j.lng,j.ns,j.fcName,j.tried,j.wait,j.callback)}if(b&&O&&u<this.maxRetries){setTimeout(()=>{this.read.call(this,n,r,o,u+1,c*2,f)},c);return}f(b,O)},g=this.backend[o].bind(this.backend);if(g.length===2){try{const b=g(n,r);b&&typeof b.then=="function"?b.then(O=>d(null,O)).catch(d):d(null,b)}catch(b){d(b)}return}return g(n,r,d)}prepareLoading(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof r=="string"&&(r=[r]);const c=this.queueLoad(n,r,o,u);if(!c.toLoad.length)return c.pending.length||u(),null;c.toLoad.forEach(f=>{this.loadOne(f)})}load(n,r,o){this.prepareLoading(n,r,{},o)}reload(n,r,o){this.prepareLoading(n,r,{reload:!0},o)}loadOne(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const o=n.split("|"),u=o[0],c=o[1];this.read(u,c,"read",void 0,void 0,(f,d)=>{f&&this.logger.warn(`${r}loading namespace ${c} for language ${u} failed`,f),!f&&d&&this.logger.log(`${r}loaded namespace ${c} for language ${u}`,d),this.loaded(n,f,d)})}saveMissing(n,r,o,u,c){let f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${o}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){const g={...f,isUpdate:c},b=this.backend.create.bind(this.backend);if(b.length<6)try{let O;b.length===5?O=b(n,r,o,u,g):O=b(n,r,o,u),O&&typeof O.then=="function"?O.then(j=>d(null,j)).catch(d):d(null,O)}catch(O){d(O)}else b(n,r,o,u,d,g)}!n||!n[0]||this.store.addResource(n[0],r,o,u)}}}function Zi(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(n){let r={};if(typeof n[1]=="object"&&(r=n[1]),typeof n[1]=="string"&&(r.defaultValue=n[1]),typeof n[2]=="string"&&(r.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const o=n[3]||n[2];Object.keys(o).forEach(u=>{r[u]=o[u]})}return r},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function eo(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function In(){}function gu(i){Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(r=>{typeof i[r]=="function"&&(i[r]=i[r].bind(i))})}class en extends Gn{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=eo(n),this.services={},this.logger=Ue,this.modules={external:[]},gu(this),r&&!this.isInitialized&&!n.isClone){if(!this.options.initImmediate)return this.init(n,r),this;setTimeout(()=>{this.init(n,r)},0)}}init(){var n=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(o=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const u=Zi();this.options={...u,...this.options,...eo(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...u.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function c(O){return O?typeof O=="function"?new O:O:null}if(!this.options.isClone){this.modules.logger?Ue.init(c(this.modules.logger),this.options):Ue.init(null,this.options);let O;this.modules.formatter?O=this.modules.formatter:typeof Intl<"u"&&(O=hu);const j=new Gi(this.options);this.store=new Ji(this.options.resources,this.options);const P=this.services;P.logger=Ue,P.resourceStore=this.store,P.languageUtils=j,P.pluralResolver=new lu(j,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),O&&(!this.options.interpolation.format||this.options.interpolation.format===u.interpolation.format)&&(P.formatter=c(O),P.formatter.init(P,this.options),this.options.interpolation.format=P.formatter.format.bind(P.formatter)),P.interpolator=new cu(this.options),P.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},P.backendConnector=new pu(c(this.modules.backend),P.resourceStore,P,this.options),P.backendConnector.on("*",function(U){for(var M=arguments.length,I=new Array(M>1?M-1:0),V=1;V<M;V++)I[V-1]=arguments[V];n.emit(U,...I)}),this.modules.languageDetector&&(P.languageDetector=c(this.modules.languageDetector),P.languageDetector.init&&P.languageDetector.init(P,this.options.detection,this.options)),this.modules.i18nFormat&&(P.i18nFormat=c(this.modules.i18nFormat),P.i18nFormat.init&&P.i18nFormat.init(this)),this.translator=new Hn(this.services,this.options),this.translator.on("*",function(U){for(var M=arguments.length,I=new Array(M>1?M-1:0),V=1;V<M;V++)I[V-1]=arguments[V];n.emit(U,...I)}),this.modules.external.forEach(U=>{U.init&&U.init(this)})}if(this.format=this.options.interpolation.format,o||(o=In),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const O=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);O.length>0&&O[0]!=="dev"&&(this.options.lng=O[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(O=>{this[O]=function(){return n.store[O](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(O=>{this[O]=function(){return n.store[O](...arguments),n}});const g=Jt(),b=()=>{const O=(j,P)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),g.resolve(P),o(j,P)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return O(null,this.t.bind(this));this.changeLanguage(this.options.lng,O)};return this.options.resources||!this.options.initImmediate?b():setTimeout(b,0),g}loadResources(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In;const u=typeof n=="string"?n:this.language;if(typeof n=="function"&&(o=n),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const c=[],f=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(b=>{b!=="cimode"&&c.indexOf(b)<0&&c.push(b)})};u?f(u):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>f(g)),this.options.preload&&this.options.preload.forEach(d=>f(d)),this.services.backendConnector.load(c,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(d)})}else o(null)}reloadResources(n,r,o){const u=Jt();return n||(n=this.languages),r||(r=this.options.ns),o||(o=In),this.services.backendConnector.reload(n,r,c=>{u.resolve(),o(c)}),u}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&Co.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(let r=0;r<this.languages.length;r++){const o=this.languages[r];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}changeLanguage(n,r){var o=this;this.isLanguageChangingTo=n;const u=Jt();this.emit("languageChanging",n);const c=g=>{this.language=g,this.languages=this.services.languageUtils.toResolveHierarchy(g),this.resolvedLanguage=void 0,this.setResolvedLanguage(g)},f=(g,b)=>{b?(c(b),this.translator.changeLanguage(b),this.isLanguageChangingTo=void 0,this.emit("languageChanged",b),this.logger.log("languageChanged",b)):this.isLanguageChangingTo=void 0,u.resolve(function(){return o.t(...arguments)}),r&&r(g,function(){return o.t(...arguments)})},d=g=>{!n&&!g&&this.services.languageDetector&&(g=[]);const b=typeof g=="string"?g:this.services.languageUtils.getBestMatchFromCodes(g);b&&(this.language||c(b),this.translator.language||this.translator.changeLanguage(b),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(b)),this.loadResources(b,O=>{f(O,b)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(n),u}getFixedT(n,r,o){var u=this;const c=function(f,d){let g;if(typeof d!="object"){for(var b=arguments.length,O=new Array(b>2?b-2:0),j=2;j<b;j++)O[j-2]=arguments[j];g=u.options.overloadTranslationOptionHandler([f,d].concat(O))}else g={...d};g.lng=g.lng||c.lng,g.lngs=g.lngs||c.lngs,g.ns=g.ns||c.ns,g.keyPrefix=g.keyPrefix||o||c.keyPrefix;const P=u.options.keySeparator||".";let U;return g.keyPrefix&&Array.isArray(f)?U=f.map(M=>`${g.keyPrefix}${P}${M}`):U=g.keyPrefix?`${g.keyPrefix}${P}${f}`:f,u.t(U,g)};return typeof n=="string"?c.lng=n:c.lngs=n,c.ns=r,c.keyPrefix=o,c}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=r.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const f=(d,g)=>{const b=this.services.backendConnector.state[`${d}|${g}`];return b===-1||b===2};if(r.precheck){const d=r.precheck(this,f);if(d!==void 0)return d}return!!(this.hasResourceBundle(o,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,n)&&(!u||f(c,n)))}loadNamespaces(n,r){const o=Jt();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(u=>{this.options.ns.indexOf(u)<0&&this.options.ns.push(u)}),this.loadResources(u=>{o.resolve(),r&&r(u)}),o):(r&&r(),Promise.resolve())}loadLanguages(n,r){const o=Jt();typeof n=="string"&&(n=[n]);const u=this.options.preload||[],c=n.filter(f=>u.indexOf(f)<0&&this.services.languageUtils.isSupportedCode(f));return c.length?(this.options.preload=u.concat(c),this.loadResources(f=>{o.resolve(),r&&r(f)}),o):(r&&r(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new Gi(Zi());return r.indexOf(o.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new en(n,r)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In;const o=n.forkResourceStore;o&&delete n.forkResourceStore;const u={...this.options,...n,isClone:!0},c=new en(u);return(n.debug!==void 0||n.prefix!==void 0)&&(c.logger=c.logger.clone(n)),["store","services","language"].forEach(d=>{c[d]=this[d]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},o&&(c.store=new Ji(this.store.data,u),c.services.resourceStore=c.store),c.translator=new Hn(c.services,u),c.translator.on("*",function(d){for(var g=arguments.length,b=new Array(g>1?g-1:0),O=1;O<g;O++)b[O-1]=arguments[O];c.emit(d,...b)}),c.init(u,r),c.translator.options=u,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ee=en.createInstance();Ee.createInstance=en.createInstance;Ee.createInstance;Ee.dir;Ee.init;Ee.loadResources;Ee.reloadResources;Ee.use;Ee.changeLanguage;Ee.getFixedT;Ee.t;Ee.exists;Ee.setDefaultNamespace;Ee.hasLoadedNamespace;Ee.loadNamespaces;Ee.loadLanguages;console.log("JJ: Database",Zt);const mu=document.getElementById("root"),yu=Object.keys(Bi).reduce((i,n)=>(i[n]={translation:Bi[n]},i),{});Ee.init({lng:"en",fallbackLng:"en",resources:yu}).then(i=>{As(()=>we(va,{t:i,get children(){return we(Ha,{})}}),mu)}).catch(console.error);
