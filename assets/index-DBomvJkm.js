(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();const us=(i,n)=>i===n,$n=Symbol("solid-proxy"),ls=Symbol("solid-track"),Fn={equals:us};let no=co;const st=1,Bn=2,ro={owned:null,cleanups:null,context:null,owner:null};var oe=null;let Tr=null,cs=null,he=null,Ce=null,Qe=null,Wn=0;function Gt(i,n){const r=he,o=oe,a=i.length===0,c=n===void 0?o:n,f=a?ro:{owned:null,cleanups:null,context:c?c.context:null,owner:c},h=a?i:()=>i(()=>De(()=>Yn(f)));oe=f,he=null;try{return bt(h,!0)}finally{he=r,oe=o}}function Ie(i,n){n=n?Object.assign({},Fn,n):Fn;const r={value:i,observers:null,observerSlots:null,comparator:n.equals||void 0},o=a=>(typeof a=="function"&&(a=a(r.value)),lo(r,a));return[uo.bind(r),o]}function je(i,n,r){const o=Jr(i,n,!1,st);rn(o)}function Ti(i,n,r){no=ps;const o=Jr(i,n,!1,st);o.user=!0,Qe?Qe.push(o):rn(o)}function ve(i,n,r){r=r?Object.assign({},Fn,r):Fn;const o=Jr(i,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=r.equals||void 0,rn(o),uo.bind(o)}function De(i){if(he===null)return i();const n=he;he=null;try{return i()}finally{he=n}}function io(i,n,r){const o=Array.isArray(i);let a;return c=>{let f;if(o){f=Array(i.length);for(let g=0;g<i.length;g++)f[g]=i[g]()}else f=i();const h=De(()=>n(f,a,c));return a=f,h}}function tn(i){return oe===null||(oe.cleanups===null?oe.cleanups=[i]:oe.cleanups.push(i)),i}function oo(){return oe}function so(i,n){const r=oe,o=he;oe=i,he=null;try{return bt(n,!0)}catch(a){Yr(a)}finally{oe=r,he=o}}function fs(i){const n=he,r=oe;return Promise.resolve().then(()=>{he=n,oe=r;let o;return bt(i,!1),he=oe=null,o?o.done:void 0})}function Jn(i,n){const r=Symbol("context");return{id:r,Provider:ms(r),defaultValue:i}}function nn(i){return oe&&oe.context&&oe.context[i.id]!==void 0?oe.context[i.id]:i.defaultValue}function ao(i){const n=ve(i),r=ve(()=>Mr(n()));return r.toArray=()=>{const o=r();return Array.isArray(o)?o:o!=null?[o]:[]},r}function uo(){if(this.sources&&this.state)if(this.state===st)rn(this);else{const i=Ce;Ce=null,bt(()=>qn(this),!1),Ce=i}if(he){const i=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(i)):(he.sources=[this],he.sourceSlots=[i]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function lo(i,n,r){let o=i.value;return(!i.comparator||!i.comparator(o,n))&&(i.value=n,i.observers&&i.observers.length&&bt(()=>{for(let a=0;a<i.observers.length;a+=1){const c=i.observers[a],f=Tr&&Tr.running;f&&Tr.disposed.has(c),(f?!c.tState:!c.state)&&(c.pure?Ce.push(c):Qe.push(c),c.observers&&fo(c)),f||(c.state=st)}if(Ce.length>1e6)throw Ce=[],new Error},!1)),n}function rn(i){if(!i.fn)return;Yn(i);const n=Wn;hs(i,i.value,n)}function hs(i,n,r){let o;const a=oe,c=he;he=oe=i;try{o=i.fn(n)}catch(f){return i.pure&&(i.state=st,i.owned&&i.owned.forEach(Yn),i.owned=null),i.updatedAt=r+1,Yr(f)}finally{he=c,oe=a}(!i.updatedAt||i.updatedAt<=r)&&(i.updatedAt!=null&&"observers"in i?lo(i,o):i.value=o,i.updatedAt=r)}function Jr(i,n,r,o=st,a){const c={fn:i,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:oe,context:oe?oe.context:null,pure:r};return oe===null||oe!==ro&&(oe.owned?oe.owned.push(c):oe.owned=[c]),c}function Mn(i){if(i.state===0)return;if(i.state===Bn)return qn(i);if(i.suspense&&De(i.suspense.inFallback))return i.suspense.effects.push(i);const n=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<Wn);)i.state&&n.push(i);for(let r=n.length-1;r>=0;r--)if(i=n[r],i.state===st)rn(i);else if(i.state===Bn){const o=Ce;Ce=null,bt(()=>qn(i,n[0]),!1),Ce=o}}function bt(i,n){if(Ce)return i();let r=!1;n||(Ce=[]),Qe?r=!0:Qe=[],Wn++;try{const o=i();return ds(r),o}catch(o){r||(Qe=null),Ce=null,Yr(o)}}function ds(i){if(Ce&&(co(Ce),Ce=null),i)return;const n=Qe;Qe=null,n.length&&bt(()=>no(n),!1)}function co(i){for(let n=0;n<i.length;n++)Mn(i[n])}function ps(i){let n,r=0;for(n=0;n<i.length;n++){const o=i[n];o.user?i[r++]=o:Mn(o)}for(n=0;n<r;n++)Mn(i[n])}function qn(i,n){i.state=0;for(let r=0;r<i.sources.length;r+=1){const o=i.sources[r];if(o.sources){const a=o.state;a===st?o!==n&&(!o.updatedAt||o.updatedAt<Wn)&&Mn(o):a===Bn&&qn(o,n)}}}function fo(i){for(let n=0;n<i.observers.length;n+=1){const r=i.observers[n];r.state||(r.state=Bn,r.pure?Ce.push(r):Qe.push(r),r.observers&&fo(r))}}function Yn(i){let n;if(i.sources)for(;i.sources.length;){const r=i.sources.pop(),o=i.sourceSlots.pop(),a=r.observers;if(a&&a.length){const c=a.pop(),f=r.observerSlots.pop();o<a.length&&(c.sourceSlots[f]=o,a[o]=c,r.observerSlots[o]=f)}}if(i.owned){for(n=i.owned.length-1;n>=0;n--)Yn(i.owned[n]);i.owned=null}if(i.cleanups){for(n=i.cleanups.length-1;n>=0;n--)i.cleanups[n]();i.cleanups=null}i.state=0}function gs(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function Yr(i,n=oe){throw gs(i)}function Mr(i){if(typeof i=="function"&&!i.length)return Mr(i());if(Array.isArray(i)){const n=[];for(let r=0;r<i.length;r++){const o=Mr(i[r]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return i}function ms(i,n){return function(o){let a;return je(()=>a=De(()=>(oe.context={...oe.context,[i]:o.value},ao(()=>o.children))),void 0),a}}const ys=Symbol("fallback");function Ii(i){for(let n=0;n<i.length;n++)i[n]()}function vs(i,n,r={}){let o=[],a=[],c=[],f=0,h=n.length>1?[]:null;return tn(()=>Ii(c)),()=>{let g=i()||[],v,S;return g[ls],De(()=>{let k=g.length,U,M,I,V,Y,H,ce,J,se;if(k===0)f!==0&&(Ii(c),c=[],o=[],a=[],f=0,h&&(h=[])),r.fallback&&(o=[ys],a[0]=Gt(ue=>(c[0]=ue,r.fallback())),f=1);else if(f===0){for(a=new Array(k),S=0;S<k;S++)o[S]=g[S],a[S]=Gt(R);f=k}else{for(I=new Array(k),V=new Array(k),h&&(Y=new Array(k)),H=0,ce=Math.min(f,k);H<ce&&o[H]===g[H];H++);for(ce=f-1,J=k-1;ce>=H&&J>=H&&o[ce]===g[J];ce--,J--)I[J]=a[ce],V[J]=c[ce],h&&(Y[J]=h[ce]);for(U=new Map,M=new Array(J+1),S=J;S>=H;S--)se=g[S],v=U.get(se),M[S]=v===void 0?-1:v,U.set(se,S);for(v=H;v<=ce;v++)se=o[v],S=U.get(se),S!==void 0&&S!==-1?(I[S]=a[v],V[S]=c[v],h&&(Y[S]=h[v]),S=M[S],U.set(se,S)):c[v]();for(S=H;S<k;S++)S in I?(a[S]=I[S],c[S]=V[S],h&&(h[S]=Y[S],h[S](S))):a[S]=Gt(R);a=a.slice(0,f=k),o=g.slice(0)}return a});function R(k){if(c[S]=k,h){const[U,M]=Ie(S);return h[S]=M,n(g[S],U)}return n(g[S])}}}function be(i,n){return De(()=>i(n||{}))}function Kn(){return!0}const qr={get(i,n,r){return n===$n?r:i.get(n)},has(i,n){return n===$n?!0:i.has(n)},set:Kn,deleteProperty:Kn,getOwnPropertyDescriptor(i,n){return{configurable:!0,enumerable:!0,get(){return i.get(n)},set:Kn,deleteProperty:Kn}},ownKeys(i){return i.keys()}};function Ir(i){return(i=typeof i=="function"?i():i)?i:{}}function bs(){for(let i=0,n=this.length;i<n;++i){const r=this[i]();if(r!==void 0)return r}}function Di(...i){let n=!1;for(let f=0;f<i.length;f++){const h=i[f];n=n||!!h&&$n in h,i[f]=typeof h=="function"?(n=!0,ve(h)):h}if(n)return new Proxy({get(f){for(let h=i.length-1;h>=0;h--){const g=Ir(i[h])[f];if(g!==void 0)return g}},has(f){for(let h=i.length-1;h>=0;h--)if(f in Ir(i[h]))return!0;return!1},keys(){const f=[];for(let h=0;h<i.length;h++)f.push(...Object.keys(Ir(i[h])));return[...new Set(f)]}},qr);const r={},o=Object.create(null);for(let f=i.length-1;f>=0;f--){const h=i[f];if(!h)continue;const g=Object.getOwnPropertyNames(h);for(let v=g.length-1;v>=0;v--){const S=g[v];if(S==="__proto__"||S==="constructor")continue;const R=Object.getOwnPropertyDescriptor(h,S);if(!o[S])o[S]=R.get?{enumerable:!0,configurable:!0,get:bs.bind(r[S]=[R.get.bind(h)])}:R.value!==void 0?R:void 0;else{const k=r[S];k&&(R.get?k.push(R.get.bind(h)):R.value!==void 0&&k.push(()=>R.value))}}}const a={},c=Object.keys(o);for(let f=c.length-1;f>=0;f--){const h=c[f],g=o[h];g&&g.get?Object.defineProperty(a,h,g):a[h]=g?g.value:void 0}return a}function ws(i,...n){if($n in i){const a=new Set(n.length>1?n.flat():n[0]),c=n.map(f=>new Proxy({get(h){return f.includes(h)?i[h]:void 0},has(h){return f.includes(h)&&h in i},keys(){return f.filter(h=>h in i)}},qr));return c.push(new Proxy({get(f){return a.has(f)?void 0:i[f]},has(f){return a.has(f)?!1:f in i},keys(){return Object.keys(i).filter(f=>!a.has(f))}},qr)),c}const r={},o=n.map(()=>({}));for(const a of Object.getOwnPropertyNames(i)){const c=Object.getOwnPropertyDescriptor(i,a),f=!c.get&&!c.set&&c.enumerable&&c.writable&&c.configurable;let h=!1,g=0;for(const v of n)v.includes(a)&&(h=!0,f?o[g][a]=c.value:Object.defineProperty(o[g],a,c)),++g;h||(f?r[a]=c.value:Object.defineProperty(r,a,c))}return[...o,r]}const xs=i=>`Stale read from <${i}>.`;function ho(i){const n="fallback"in i&&{fallback:()=>i.fallback};return ve(vs(()=>i.each,i.children,n||void 0))}function Gr(i){const n=i.keyed,r=ve(()=>i.when,void 0,{equals:(o,a)=>n?o===a:!o==!a});return ve(()=>{const o=r();if(o){const a=i.children;return typeof a=="function"&&a.length>0?De(()=>a(n?o:()=>{if(!De(r))throw xs("Show");return i.when})):a}return i.fallback},void 0,void 0)}const Ss=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],_s=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Ss]),Os=new Set(["innerHTML","textContent","innerText","children"]),ks=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Ps=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Cs(i,n){const r=Ps[i];return typeof r=="object"?r[n]?r.$:void 0:r}const Es=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function As(i,n,r){let o=r.length,a=n.length,c=o,f=0,h=0,g=n[a-1].nextSibling,v=null;for(;f<a||h<c;){if(n[f]===r[h]){f++,h++;continue}for(;n[a-1]===r[c-1];)a--,c--;if(a===f){const S=c<o?h?r[h-1].nextSibling:r[c-h]:g;for(;h<c;)i.insertBefore(r[h++],S)}else if(c===h)for(;f<a;)(!v||!v.has(n[f]))&&n[f].remove(),f++;else if(n[f]===r[c-1]&&r[h]===n[a-1]){const S=n[--a].nextSibling;i.insertBefore(r[h++],n[f++].nextSibling),i.insertBefore(r[--c],S),n[a]=r[c]}else{if(!v){v=new Map;let R=h;for(;R<c;)v.set(r[R],R++)}const S=v.get(n[f]);if(S!=null)if(h<S&&S<c){let R=f,k=1,U;for(;++R<a&&R<c&&!((U=v.get(n[R]))==null||U!==S+k);)k++;if(k>S-h){const M=n[f];for(;h<S;)i.insertBefore(r[h++],M)}else i.replaceChild(r[h++],n[f++])}else f++;else n[f++].remove()}}}const $i="_$DX_DELEGATE";function Rs(i,n,r,o={}){let a;return Gt(c=>{a=c,n===document?i():Te(n,i(),n.firstChild?null:void 0,r)},o.owner),()=>{a(),n.textContent=""}}function Be(i,n,r){let o;const a=()=>{const f=document.createElement("template");return f.innerHTML=i,f.content.firstChild},c=()=>(o||(o=a())).cloneNode(!0);return c.cloneNode=c,c}function Qr(i,n=window.document){const r=n[$i]||(n[$i]=new Set);for(let o=0,a=i.length;o<a;o++){const c=i[o];r.has(c)||(r.add(c),n.addEventListener(c,Ds))}}function jt(i,n,r){r==null?i.removeAttribute(n):i.setAttribute(n,r)}function Qt(i,n){n==null?i.removeAttribute("class"):i.className=n}function Ls(i,n,r,o){if(o)Array.isArray(r)?(i[`$$${n}`]=r[0],i[`$$${n}Data`]=r[1]):i[`$$${n}`]=r;else if(Array.isArray(r)){const a=r[0];i.addEventListener(n,r[0]=c=>a.call(i,r[1],c))}else i.addEventListener(n,r)}function po(i,n,r={}){const o=Object.keys(n||{}),a=Object.keys(r);let c,f;for(c=0,f=a.length;c<f;c++){const h=a[c];!h||h==="undefined"||n[h]||(Fi(i,h,!1),delete r[h])}for(c=0,f=o.length;c<f;c++){const h=o[c],g=!!n[h];!h||h==="undefined"||r[h]===g||!g||(Fi(i,h,!0),r[h]=g)}return r}function js(i,n,r){if(!n)return r?jt(i,"style"):n;const o=i.style;if(typeof n=="string")return o.cssText=n;typeof r=="string"&&(o.cssText=r=void 0),r||(r={}),n||(n={});let a,c;for(c in r)n[c]==null&&o.removeProperty(c),delete r[c];for(c in n)a=n[c],a!==r[c]&&(o.setProperty(c,a),r[c]=a);return r}function Ns(i,n={},r,o){const a={};return je(()=>a.children=Zt(i,n.children,a.children)),je(()=>typeof n.ref=="function"?Ks(n.ref,i):n.ref=i),je(()=>Ts(i,n,r,!0,a,!0)),a}function Ks(i,n,r){return De(()=>i(n,r))}function Te(i,n,r,o){if(r!==void 0&&!o&&(o=[]),typeof n!="function")return Zt(i,n,o,r);je(a=>Zt(i,n(),a,r),o)}function Ts(i,n,r,o,a={},c=!1){n||(n={});for(const f in a)if(!(f in n)){if(f==="children")continue;a[f]=Bi(i,f,null,a[f],r,c)}for(const f in n){if(f==="children")continue;const h=n[f];a[f]=Bi(i,f,h,a[f],r,c)}}function Is(i){return i.toLowerCase().replace(/-([a-z])/g,(n,r)=>r.toUpperCase())}function Fi(i,n,r){const o=n.trim().split(/\s+/);for(let a=0,c=o.length;a<c;a++)i.classList.toggle(o[a],r)}function Bi(i,n,r,o,a,c){let f,h,g,v,S;if(n==="style")return js(i,r,o);if(n==="classList")return po(i,r,o);if(r===o)return o;if(n==="ref")c||r(i);else if(n.slice(0,3)==="on:"){const R=n.slice(3);o&&i.removeEventListener(R,o),r&&i.addEventListener(R,r)}else if(n.slice(0,10)==="oncapture:"){const R=n.slice(10);o&&i.removeEventListener(R,o,!0),r&&i.addEventListener(R,r,!0)}else if(n.slice(0,2)==="on"){const R=n.slice(2).toLowerCase(),k=Es.has(R);if(!k&&o){const U=Array.isArray(o)?o[0]:o;i.removeEventListener(R,U)}(k||r)&&(Ls(i,R,r,k),k&&Qr([R]))}else n.slice(0,5)==="attr:"?jt(i,n.slice(5),r):(S=n.slice(0,5)==="prop:")||(g=Os.has(n))||(v=Cs(n,i.tagName))||(h=_s.has(n))||(f=i.nodeName.includes("-"))?(S&&(n=n.slice(5),h=!0),n==="class"||n==="className"?Qt(i,r):f&&!h&&!g?i[Is(n)]=r:i[v||n]=r):jt(i,ks[n]||n,r);return r}function Ds(i){const n=`$$${i.type}`;let r=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==r&&Object.defineProperty(i,"target",{configurable:!0,value:r}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return r||document}});r;){const o=r[n];if(o&&!r.disabled){const a=r[`${n}Data`];if(a!==void 0?o.call(r,a,i):o.call(r,i),i.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function Zt(i,n,r,o,a){for(;typeof r=="function";)r=r();if(n===r)return r;const c=typeof n,f=o!==void 0;if(i=f&&r[0]&&r[0].parentNode||i,c==="string"||c==="number")if(c==="number"&&(n=n.toString()),f){let h=r[0];h&&h.nodeType===3?h.data!==n&&(h.data=n):h=document.createTextNode(n),r=At(i,r,o,h)}else r!==""&&typeof r=="string"?r=i.firstChild.data=n:r=i.textContent=n;else if(n==null||c==="boolean")r=At(i,r,o);else{if(c==="function")return je(()=>{let h=n();for(;typeof h=="function";)h=h();r=Zt(i,h,r,o)}),()=>r;if(Array.isArray(n)){const h=[],g=r&&Array.isArray(r);if(Ur(h,n,r,a))return je(()=>r=Zt(i,h,r,o,!0)),()=>r;if(h.length===0){if(r=At(i,r,o),f)return r}else g?r.length===0?Mi(i,h,o):As(i,r,h):(r&&At(i),Mi(i,h));r=h}else if(n.nodeType){if(Array.isArray(r)){if(f)return r=At(i,r,o,n);At(i,r,null,n)}else r==null||r===""||!i.firstChild?i.appendChild(n):i.replaceChild(n,i.firstChild);r=n}}return r}function Ur(i,n,r,o){let a=!1;for(let c=0,f=n.length;c<f;c++){let h=n[c],g=r&&r[i.length],v;if(!(h==null||h===!0||h===!1))if((v=typeof h)=="object"&&h.nodeType)i.push(h);else if(Array.isArray(h))a=Ur(i,h,g)||a;else if(v==="function")if(o){for(;typeof h=="function";)h=h();a=Ur(i,Array.isArray(h)?h:[h],Array.isArray(g)?g:[g])||a}else i.push(h),a=!0;else{const S=String(h);g&&g.nodeType===3&&g.data===S?i.push(g):i.push(document.createTextNode(S))}}return a}function Mi(i,n,r=null){for(let o=0,a=n.length;o<a;o++)i.insertBefore(n[o],r)}function At(i,n,r,o){if(r===void 0)return i.textContent="";const a=o||document.createTextNode("");if(n.length){let c=!1;for(let f=n.length-1;f>=0;f--){const h=n[f];if(a!==h){const g=h.parentNode===i;!c&&!f?g?i.replaceChild(a,h):i.insertBefore(a,r):g&&h.remove()}else c=!0}}else i.insertBefore(a,r);return[a]}const $s=!1,Fs={Home:"Home",Kingdom:"Kingdom","Open navigation menu":"Open navigation menu","Close navigation menu":"Close navigation menu","Kingdom Builder":"Kingdom Builder","Set selection":"Set selection"},qi={en:Fs};function go(){let i=new Set;function n(a){return i.add(a),()=>i.delete(a)}let r=!1;function o(a,c){if(r)return!(r=!1);const f={to:a,options:c,defaultPrevented:!1,preventDefault:()=>f.defaultPrevented=!0};for(const h of i)h.listener({...f,from:h.location,retry:g=>{g&&(r=!0),h.navigate(a,{...c,resolve:!1})}});return!f.defaultPrevented}return{subscribe:n,confirm:o}}let Vr;function Xr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Vr=window.history.state._depth}Xr();function Bs(i){return{...i,_depth:window.history.state&&window.history.state._depth}}function Ms(i,n){let r=!1;return()=>{const o=Vr;Xr();const a=o==null?null:Vr-o;if(r){r=!1;return}a&&n(a)?(r=!0,window.history.go(-a)):i()}}const qs=/^(?:[a-z0-9]+:)?\/\//i,Us=/^\/+|(\/)\/+$/g,mo="http://sr";function vt(i,n=!1){const r=i.replace(Us,"$1");return r?n||/^[?#]/.test(r)?r:"/"+r:""}function Dn(i,n,r){if(qs.test(n))return;const o=vt(i),a=r&&vt(r);let c="";return!a||n.startsWith("/")?c=o:a.toLowerCase().indexOf(o.toLowerCase())!==0?c=o+a:c=a,(c||"/")+vt(n,!c)}function Vs(i,n){if(i==null)throw new Error(n);return i}function Hs(i,n){return vt(i).replace(/\/*(\*.*)?$/g,"")+vt(n)}function yo(i){const n={};return i.searchParams.forEach((r,o)=>{n[o]=r}),n}function zs(i,n,r){const[o,a]=i.split("/*",2),c=o.split("/").filter(Boolean),f=c.length;return h=>{const g=h.split("/").filter(Boolean),v=g.length-f;if(v<0||v>0&&a===void 0&&!n)return null;const S={path:f?"":"/",params:{}},R=k=>r===void 0?void 0:r[k];for(let k=0;k<f;k++){const U=c[k],M=g[k],I=U[0]===":",V=I?U.slice(1):U;if(I&&Dr(M,R(V)))S.params[V]=M;else if(I||!Dr(M,U))return null;S.path+=`/${M}`}if(a){const k=v?g.slice(-v).join("/"):"";if(Dr(k,R(a)))S.params[a]=k;else return null}return S}}function Dr(i,n){const r=o=>o.localeCompare(i,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?r(n):typeof n=="function"?n(i):Array.isArray(n)?n.some(r):n instanceof RegExp?n.test(i):!1}function Ws(i){const[n,r]=i.pattern.split("/*",2),o=n.split("/").filter(Boolean);return o.reduce((a,c)=>a+(c.startsWith(":")?2:3),o.length-(r===void 0?0:1))}function vo(i){const n=new Map,r=oo();return new Proxy({},{get(o,a){return n.has(a)||so(r,()=>n.set(a,ve(()=>i()[a]))),n.get(a)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function bo(i){let n=/(\/?\:[^\/]+)\?/.exec(i);if(!n)return[i];let r=i.slice(0,n.index),o=i.slice(n.index+n[0].length);const a=[r,r+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(o);)a.push(r+=n[1]),o=o.slice(n[0].length);return bo(o).reduce((c,f)=>[...c,...a.map(h=>h+f)],[])}const Js=100,wo=Jn(),Zr=Jn(),on=()=>Vs(nn(wo),"<A> and 'use' router primitives can be only used inside a Route."),Ys=()=>nn(Zr)||on().base,Gs=i=>{const n=Ys();return ve(()=>n.resolvePath(i()))},Qs=i=>{const n=on();return ve(()=>{const r=i();return r!==void 0?n.renderPath(r):r})},Xs=()=>on().navigatorFactory(),xo=()=>on().location,Zs=i=>{const n=on().beforeLeave.subscribe({listener:i,location:xo(),navigate:Xs()});tn(n)};function ea(i,n=""){const{component:r,load:o,children:a,info:c}=i,f=!a||Array.isArray(a)&&!a.length,h={key:i,component:r,load:o,info:c};return So(i.path).reduce((g,v)=>{for(const S of bo(v)){const R=Hs(n,S);let k=f?R:R.split("/*",1)[0];k=k.split("/").map(U=>U.startsWith(":")||U.startsWith("*")?U:encodeURIComponent(U)).join("/"),g.push({...h,originalPath:v,pattern:k,matcher:zs(k,!f,i.matchFilters)})}return g},[])}function ta(i,n=0){return{routes:i,score:Ws(i[i.length-1])*1e4-n,matcher(r){const o=[];for(let a=i.length-1;a>=0;a--){const c=i[a],f=c.matcher(r);if(!f)return null;o.unshift({...f,route:c})}return o}}}function So(i){return Array.isArray(i)?i:[i]}function _o(i,n="",r=[],o=[]){const a=So(i);for(let c=0,f=a.length;c<f;c++){const h=a[c];if(h&&typeof h=="object"){h.hasOwnProperty("path")||(h.path="");const g=ea(h,n);for(const v of g){r.push(v);const S=Array.isArray(h.children)&&h.children.length===0;if(h.children&&!S)_o(h.children,v.pattern,r,o);else{const R=ta([...r],o.length);o.push(R)}r.pop()}}}return r.length?o:o.sort((c,f)=>f.score-c.score)}function $r(i,n){for(let r=0,o=i.length;r<o;r++){const a=i[r].matcher(n);if(a)return a}return[]}function na(i,n){const r=new URL(mo),o=ve(g=>{const v=i();try{return new URL(v,r)}catch{return console.error(`Invalid path ${v}`),g}},r,{equals:(g,v)=>g.href===v.href}),a=ve(()=>o().pathname),c=ve(()=>o().search,!0),f=ve(()=>o().hash),h=()=>"";return{get pathname(){return a()},get search(){return c()},get hash(){return f()},get state(){return n()},get key(){return h()},query:vo(io(c,()=>yo(o())))}}let Ge;function ra(){return Ge}function ia(i,n,r,o={}){const{signal:[a,c],utils:f={}}=i,h=f.parsePath||(te=>te),g=f.renderPath||(te=>te),v=f.beforeLeave||go(),S=Dn("",o.base||"");if(S===void 0)throw new Error(`${S} is not a valid base path`);S&&!a().value&&c({value:S,replace:!0,scroll:!1});const[R,k]=Ie(!1),U=async te=>{k(!0);try{await fs(te)}finally{k(!1)}},[M,I]=Ie(a().value),[V,Y]=Ie(a().state),H=na(M,V),ce=[],J=Ie([]),se=ve(()=>typeof o.transformUrl=="function"?$r(n(),o.transformUrl(H.pathname)):$r(n(),H.pathname)),ue=vo(()=>{const te=se(),re={};for(let we=0;we<te.length;we++)Object.assign(re,te[we].params);return re}),ne={pattern:S,path:()=>S,outlet:()=>null,resolvePath(te){return Dn(S,te)}};return je(()=>{const{value:te,state:re}=a();De(()=>{U(()=>{Ge="native",te!==M()&&I(te),Y(re),J[1]([])}).then(()=>{Ge=void 0})})}),{base:ne,location:H,params:ue,isRouting:R,renderPath:g,parsePath:h,navigatorFactory:Nt,matches:se,beforeLeave:v,preloadRoute:Me,singleFlight:o.singleFlight===void 0?!0:o.singleFlight,submissions:J};function ze(te,re,we){De(()=>{if(typeof re=="number"){re&&(f.go?f.go(re):console.warn("Router integration does not support relative routing"));return}const{replace:Re,resolve:Ne,scroll:$e,state:fe}={replace:!1,resolve:!0,scroll:!0,...we},ge=Ne?te.resolvePath(re):Dn("",re);if(ge===void 0)throw new Error(`Path '${re}' is not a routable path`);if(ce.length>=Js)throw new Error("Too many redirects");const xe=M();if((ge!==xe||fe!==V())&&!$s){if(v.confirm(ge,we)){const Xe=ce.push({value:xe,replace:Re,scroll:$e,state:V()});U(()=>{Ge="navigate",I(ge),Y(fe),J[1]([])}).then(()=>{ce.length===Xe&&(Ge=void 0,at({value:ge,state:fe}))})}}})}function Nt(te){return te=te||nn(Zr)||ne,(re,we)=>ze(te,re,we)}function at(te){const re=ce[0];re&&((te.value!==re.value||te.state!==re.state)&&c({...te,replace:re.replace,scroll:re.scroll}),ce.length=0)}function Me(te,re){const we=$r(n(),te.pathname),Re=Ge;Ge="preload";for(let Ne in we){const{route:$e,params:fe}=we[Ne];$e.component&&$e.component.preload&&$e.component.preload();const{load:ge}=$e;re&&ge&&so(r(),()=>ge({params:fe,location:{pathname:te.pathname,search:te.search,hash:te.hash,query:yo(te),state:null,key:""},intent:"preload"}))}Ge=Re}}function oa(i,n,r,o){const{base:a,location:c,params:f}=i,{pattern:h,component:g,load:v}=o().route,S=ve(()=>o().path);g&&g.preload&&g.preload();const R=v?v({params:f,location:c,intent:Ge||"initial"}):void 0;return{parent:n,pattern:h,path:S,outlet:()=>g?be(g,{params:f,location:c,data:R,get children(){return r()}}):r(),resolvePath(U){return Dn(a.path(),U,S())}}}const sa=i=>n=>{const{base:r}=n,o=ao(()=>n.children),a=ve(()=>_o(o(),n.base||""));let c;const f=ia(i,a,()=>c,{base:r,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return i.create&&i.create(f),be(wo.Provider,{value:f,get children(){return be(aa,{routerState:f,get root(){return n.root},get load(){return n.rootLoad},get children(){return[ve(()=>(c=oo())&&null),be(ua,{routerState:f,get branches(){return a()}})]}})}})};function aa(i){const n=i.routerState.location,r=i.routerState.params,o=ve(()=>i.load&&De(()=>{i.load({params:r,location:n,intent:ra()||"initial"})}));return be(Gr,{get when(){return i.root},keyed:!0,get fallback(){return i.children},children:a=>be(a,{params:r,location:n,get data(){return o()},get children(){return i.children}})})}function ua(i){const n=[];let r;const o=ve(io(i.routerState.matches,(a,c,f)=>{let h=c&&a.length===c.length;const g=[];for(let v=0,S=a.length;v<S;v++){const R=c&&c[v],k=a[v];f&&R&&k.route.key===R.route.key?g[v]=f[v]:(h=!1,n[v]&&n[v](),Gt(U=>{n[v]=U,g[v]=oa(i.routerState,g[v-1]||i.routerState.base,Ui(()=>o()[v+1]),()=>i.routerState.matches()[v])}))}return n.splice(a.length).forEach(v=>v()),f&&h?f:(r=g[0],g)}));return Ui(()=>o()&&r)()}const Ui=i=>()=>be(Gr,{get when(){return i()},keyed:!0,children:n=>be(Zr.Provider,{value:n,get children(){return n.outlet()}})});function la([i,n],r,o){return[i,o?a=>n(o(a)):n]}function ca(i){if(i==="#")return null;try{return document.querySelector(i)}catch{return null}}function fa(i){let n=!1;const r=a=>typeof a=="string"?{value:a}:a,o=la(Ie(r(i.get()),{equals:(a,c)=>a.value===c.value&&a.state===c.state}),void 0,a=>(!n&&i.set(a),a));return i.init&&tn(i.init((a=i.get())=>{n=!0,o[1](r(a)),n=!1})),sa({signal:o,create:i.create,utils:i.utils})}function ha(i,n,r){return i.addEventListener(n,r),()=>i.removeEventListener(n,r)}function da(i,n){const r=ca(`#${i}`);r?r.scrollIntoView():n&&window.scrollTo(0,0)}const pa=new Map;function ga(i=!0,n=!1,r="/_server",o){return a=>{const c=a.base.path(),f=a.navigatorFactory(a.base);let h={};function g(I){return I.namespaceURI==="http://www.w3.org/2000/svg"}function v(I){if(I.defaultPrevented||I.button!==0||I.metaKey||I.altKey||I.ctrlKey||I.shiftKey)return;const V=I.composedPath().find(ue=>ue instanceof Node&&ue.nodeName.toUpperCase()==="A");if(!V||n&&!V.hasAttribute("link"))return;const Y=g(V),H=Y?V.href.baseVal:V.href;if((Y?V.target.baseVal:V.target)||!H&&!V.hasAttribute("state"))return;const J=(V.getAttribute("rel")||"").split(/\s+/);if(V.hasAttribute("download")||J&&J.includes("external"))return;const se=Y?new URL(H,document.baseURI):new URL(H);if(!(se.origin!==window.location.origin||c&&se.pathname&&!se.pathname.toLowerCase().startsWith(c.toLowerCase())))return[V,se]}function S(I){const V=v(I);if(!V)return;const[Y,H]=V,ce=a.parsePath(H.pathname+H.search+H.hash),J=Y.getAttribute("state");I.preventDefault(),f(ce,{resolve:!1,replace:Y.hasAttribute("replace"),scroll:!Y.hasAttribute("noscroll"),state:J&&JSON.parse(J)})}function R(I){const V=v(I);if(!V)return;const[Y,H]=V;typeof o=="function"&&(H.pathname=o(H.pathname)),h[H.pathname]||a.preloadRoute(H,Y.getAttribute("preload")!=="false")}function k(I){const V=v(I);if(!V)return;const[Y,H]=V;typeof o=="function"&&(H.pathname=o(H.pathname)),!h[H.pathname]&&(h[H.pathname]=setTimeout(()=>{a.preloadRoute(H,Y.getAttribute("preload")!=="false"),delete h[H.pathname]},200))}function U(I){const V=v(I);if(!V)return;const[,Y]=V;typeof o=="function"&&(Y.pathname=o(Y.pathname)),h[Y.pathname]&&(clearTimeout(h[Y.pathname]),delete h[Y.pathname])}function M(I){if(I.defaultPrevented)return;let V=I.submitter&&I.submitter.hasAttribute("formaction")?I.submitter.getAttribute("formaction"):I.target.getAttribute("action");if(!V)return;if(!V.startsWith("https://action/")){const H=new URL(V,mo);if(V=a.parsePath(H.pathname+H.search),!V.startsWith(r))return}if(I.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const Y=pa.get(V);if(Y){I.preventDefault();const H=new FormData(I.target);I.submitter&&I.submitter.name&&H.append(I.submitter.name,I.submitter.value),Y.call({r:a,f:I.target},H)}}Qr(["click","submit"]),document.addEventListener("click",S),i&&(document.addEventListener("mouseover",k),document.addEventListener("mouseout",U),document.addEventListener("focusin",R),document.addEventListener("touchstart",R)),document.addEventListener("submit",M),tn(()=>{document.removeEventListener("click",S),i&&(document.removeEventListener("mouseover",k),document.removeEventListener("mouseout",U),document.removeEventListener("focusin",R),document.removeEventListener("touchstart",R)),document.removeEventListener("submit",M)})}}function ma(i){const n=()=>{const o=window.location.pathname+window.location.search;return{value:i.transformUrl?i.transformUrl(o)+window.location.hash:o+window.location.hash,state:window.history.state}},r=go();return fa({get:n,set({value:o,replace:a,scroll:c,state:f}){a?window.history.replaceState(Bs(f),"",o):window.history.pushState(f,"",o),da(window.location.hash.slice(1),c),Xr()},init:o=>ha(window,"popstate",Ms(o,a=>{if(a&&a<0)return!r.confirm(a);{const c=n();return!r.confirm(c.value,{state:c.state})}})),create:ga(i.preload,i.explicitLinks,i.actionBase,i.transformUrl),utils:{go:o=>window.history.go(o),beforeLeave:r}})(i)}var ya=Be("<a>");function Vi(i){i=Di({inactiveClass:"inactive",activeClass:"active"},i);const[,n]=ws(i,["href","state","class","activeClass","inactiveClass","end"]),r=Gs(()=>i.href),o=Qs(r),a=xo(),c=ve(()=>{const f=r();if(f===void 0)return[!1,!1];const h=vt(f.split(/[?#]/,1)[0]).toLowerCase(),g=vt(a.pathname).toLowerCase();return[i.end?h===g:g.startsWith(h),h===g]});return(()=>{var f=ya();return Ns(f,Di(n,{get href(){return o()||i.href},get state(){return JSON.stringify(i.state)},get classList(){return{...i.class&&{[i.class]:!0},[i.inactiveClass]:!c()[0],[i.activeClass]:c()[0],...n.classList}},link:"",get"aria-current"(){return c()[1]?"page":void 0}}),!1),f})()}const va={t:i=>i},Oo=Jn(va);function ba(i){return be(Oo.Provider,{get value(){return{t:i.t}},get children(){return i.children}})}function ei(){return nn(Oo)}const wa="_nav_1j5nq_5",xa="_backdrop_1j5nq_30",Tn={"menu-button":"_menu-button_1j5nq_1",nav:wa,"navigation-items":"_navigation-items_1j5nq_22",backdrop:xa};var Sa=Be('<nav><button class="button-icon close-button"></button><div>'),_a=Be("<div>"),Oa=Be("<header><button>");function ka(){const{t:i}=ei(),[n,r]=Ie(!1),[o,a]=Ie();Ti(()=>{var g;n()&&((g=o())==null||g.focus())});const c=()=>{r(h=>!h)},f=()=>{r(!1)};return Ti(()=>{const h=g=>{g.key==="Escape"&&f()};document.addEventListener("keydown",h),tn(()=>{document.removeEventListener("keydown",h)})}),Zs(()=>{f()}),(()=>{var h=Oa(),g=h.firstChild;return g.$$click=c,Te(g,()=>i("Open navigation menu")),Te(h,be(Gr,{get when(){return n()},get children(){return[(()=>{var v=Sa(),S=v.firstChild,R=S.nextSibling;return S.$$click=f,Te(S,()=>i("Close navigation menu")),Te(R,be(Vi,{href:"/",ref:a,get children(){return i("Set selection")}}),null),Te(R,be(Vi,{href:"/kingdom",get children(){return i("Kingdom")}}),null),je(k=>{var U=Tn.nav,M=Tn["navigation-items"];return U!==k.e&&Qt(v,k.e=U),M!==k.t&&Qt(R,k.t=M),k},{e:void 0,t:void 0}),v})(),(()=>{var v=_a();return v.$$click=f,je(S=>po(v,{[Tn.backdrop]:n()},S)),v})()]}}),null),je(v=>{var S=`button-icon ${Tn["menu-button"]}`,R=n();return S!==v.e&&Qt(g,v.e=S),R!==v.t&&jt(g,"aria-expanded",v.t=R),v},{e:void 0,t:void 0}),h})()}Qr(["click"]);function Pa(i){return[be(ka,{}),ve(()=>i.children)]}var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ca(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ko={exports:{}};(function(i,n){(function(r,o){i.exports=o()})(Hi,function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(s[l]=u[l])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,s=1,u=arguments.length;s<u;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function a(e,t,s){for(var u,l=0,d=t.length;l<d;l++)!u&&l in t||((u=u||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(u||Array.prototype.slice.call(t))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hi,f=Object.keys,h=Array.isArray;function g(e,t){return typeof t!="object"||f(t).forEach(function(s){e[s]=t[s]}),e}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var v=Object.getPrototypeOf,S={}.hasOwnProperty;function R(e,t){return S.call(e,t)}function k(e,t){typeof t=="function"&&(t=t(v(e))),(typeof Reflect>"u"?f:Reflect.ownKeys)(t).forEach(function(s){M(e,s,t[s])})}var U=Object.defineProperty;function M(e,t,s,u){U(e,t,g(s&&R(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},u))}function I(e){return{from:function(t){return e.prototype=Object.create(t.prototype),M(e.prototype,"constructor",e),{extend:k.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,Y=[].slice;function H(e,t,s){return Y.call(e,t,s)}function ce(e,t){return t(e)}function J(e){if(!e)throw new Error("Assertion Failed")}function se(e){c.setImmediate?setImmediate(e):setTimeout(e,0)}function ue(e,t){if(typeof t=="string"&&R(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var s=[],u=0,l=t.length;u<l;++u){var d=ue(e,t[u]);s.push(d)}return s}var p=t.indexOf(".");if(p!==-1){var m=e[t.substr(0,p)];return m==null?void 0:ue(m,t.substr(p+1))}}function ne(e,t,s){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){J(typeof s!="string"&&"length"in s);for(var u=0,l=t.length;u<l;++u)ne(e,t[u],s[u])}else{var d,p,m=t.indexOf(".");m!==-1?(d=t.substr(0,m),(p=t.substr(m+1))===""?s===void 0?h(e)&&!isNaN(parseInt(d))?e.splice(d,1):delete e[d]:e[d]=s:ne(m=!(m=e[d])||!R(e,d)?e[d]={}:m,p,s)):s===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=s}}function ze(e){var t,s={};for(t in e)R(e,t)&&(s[t]=e[t]);return s}var Nt=[].concat;function at(e){return Nt.apply([],e)}var Je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(at([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return c[e]}),Me=new Set(Je.map(function(e){return c[e]})),te=null;function re(e){return te=new WeakMap,e=function t(s){if(!s||typeof s!="object")return s;var u=te.get(s);if(u)return u;if(h(s)){u=[],te.set(s,u);for(var l=0,d=s.length;l<d;++l)u.push(t(s[l]))}else if(Me.has(s.constructor))u=s;else{var p,m=v(s);for(p in u=m===Object.prototype?{}:Object.create(m),te.set(s,u),s)R(s,p)&&(u[p]=t(s[p]))}return u}(e),te=null,e}var we={}.toString;function Re(e){return we.call(e).slice(8,-1)}var Ne=typeof Symbol<"u"?Symbol.iterator:"@@iterator",$e=typeof Ne=="symbol"?function(e){var t;return e!=null&&(t=e[Ne])&&t.apply(e)}:function(){return null};function fe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var ge={};function xe(e){var t,s,u,l;if(arguments.length===1){if(h(e))return e.slice();if(this===ge&&typeof e=="string")return[e];if(l=$e(e)){for(s=[];!(u=l.next()).done;)s.push(u.value);return s}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(s=new Array(t);t--;)s[t]=e[t];return s}for(t=arguments.length,s=new Array(t);t--;)s[t]=arguments[t];return s}var Xe=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},It=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ke=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(It),Ro={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wt(e,t){this.name=e,this.message=t}function ti(e,t){return e+". Errors: "+Object.keys(t).map(function(s){return t[s].toString()}).filter(function(s,u,l){return l.indexOf(s)===u}).join(`
`)}function sn(e,t,s,u){this.failures=t,this.failedKeys=u,this.successCount=s,this.message=ti(e,t)}function xt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(s){return t[s]}),this.failuresByPos=t,this.message=ti(e,this.failures)}I(wt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(sn).from(wt),I(xt).from(wt);var Qn=Ke.reduce(function(e,t){return e[t]=t+"Error",e},{}),Lo=wt,W=Ke.reduce(function(e,t){var s=t+"Error";function u(l,d){this.name=s,l?typeof l=="string"?(this.message="".concat(l).concat(d?`
 `+d:""),this.inner=d||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=Ro[t]||s,this.inner=null)}return I(u).from(Lo),e[t]=u,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var ni=It.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),an=Ke.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=W[t]),e},{});function le(){}function Kt(e){return e}function jo(e,t){return e==null||e===Kt?t:function(s){return t(e(s))}}function ut(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function No(e,t){return e===le?t:function(){var s=e.apply(this,arguments);s!==void 0&&(arguments[0]=s);var u=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var d=t.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?ut(u,this.onsuccess):u),l&&(this.onerror=this.onerror?ut(l,this.onerror):l),d!==void 0?d:s}}function Ko(e,t){return e===le?t:function(){e.apply(this,arguments);var s=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?ut(s,this.onsuccess):s),u&&(this.onerror=this.onerror?ut(u,this.onerror):u)}}function To(e,t){return e===le?t:function(s){var u=e.apply(this,arguments);g(s,u);var l=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,s=t.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?ut(l,this.onsuccess):l),d&&(this.onerror=this.onerror?ut(d,this.onerror):d),u===void 0?s===void 0?void 0:s:g(u,s)}}function Io(e,t){return e===le?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Xn(e,t){return e===le?t:function(){var s=e.apply(this,arguments);if(s&&typeof s.then=="function"){for(var u=this,l=arguments.length,d=new Array(l);l--;)d[l]=arguments[l];return s.then(function(){return t.apply(u,d)})}return t.apply(this,arguments)}}an.ModifyError=sn,an.DexieError=wt,an.BulkError=xt;var qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ri(e){qe=e}var Tt={},ii=100,Je=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,v(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,v(t),e]}(),It=Je[0],Ke=Je[1],Je=Je[2],Ke=Ke&&Ke.then,Dt=It&&It.constructor,Zn=!!Je,$t=function(e,t){Ft.push([e,t]),un&&(queueMicrotask($o),un=!1)},er=!0,un=!0,lt=[],ln=[],tr=Kt,Ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:le,pgp:!1,env:{},finalize:le},z=Ze,Ft=[],ct=0,cn=[];function q(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=z;if(typeof e!="function"){if(e!==Tt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&rr(this,this._value))}this._state=null,this._value=null,++t.ref,function s(u,l){try{l(function(d){if(u._state===null){if(d===u)throw new TypeError("A promise cannot be resolved with itself.");var p=u._lib&&St();d&&typeof d.then=="function"?s(u,function(m,x){d instanceof q?d._then(m,x):d.then(m,x)}):(u._state=!0,u._value=d,si(u)),p&&_t()}},rr.bind(null,u))}catch(d){rr(u,d)}}(this,e)}var nr={get:function(){var e=z,t=pn;function s(u,l){var d=this,p=!e.global&&(e!==z||t!==pn),m=p&&!tt(),x=new q(function(b,P){ir(d,new oi(ui(u,e,p,m),ui(l,e,p,m),b,P,e))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return s.prototype=Tt,s},set:function(e){M(this,"then",e&&e.prototype===Tt?nr:{get:function(){return e},set:nr.set})}};function oi(e,t,s,u,l){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=s,this.reject=u,this.psd=l}function rr(e,t){var s,u;ln.push(t),e._state===null&&(s=e._lib&&St(),t=tr(t),e._state=!1,e._value=t,u=e,lt.some(function(l){return l._value===u._value})||lt.push(u),si(e),s&&_t())}function si(e){var t=e._listeners;e._listeners=[];for(var s=0,u=t.length;s<u;++s)ir(e,t[s]);var l=e._PSD;--l.ref||l.finalize(),ct===0&&(++ct,$t(function(){--ct==0&&or()},[]))}function ir(e,t){if(e._state!==null){var s=e._state?t.onFulfilled:t.onRejected;if(s===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ct,$t(Do,[s,e,t])}else e._listeners.push(t)}function Do(e,t,s){try{var u,l=t._value;!t._state&&ln.length&&(ln=[]),u=qe&&t._consoleTask?t._consoleTask.run(function(){return e(l)}):e(l),t._state||ln.indexOf(l)!==-1||function(d){for(var p=lt.length;p;)if(lt[--p]._value===d._value)return lt.splice(p,1)}(t),s.resolve(u)}catch(d){s.reject(d)}finally{--ct==0&&or(),--s.psd.ref||s.psd.finalize()}}function $o(){ft(Ze,function(){St()&&_t()})}function St(){var e=er;return un=er=!1,e}function _t(){var e,t,s;do for(;0<Ft.length;)for(e=Ft,Ft=[],s=e.length,t=0;t<s;++t){var u=e[t];u[0].apply(null,u[1])}while(0<Ft.length);un=er=!0}function or(){var e=lt;lt=[],e.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var t=cn.slice(0),s=t.length;s;)t[--s]()}function fn(e){return new q(Tt,!1,e)}function pe(e,t){var s=z;return function(){var u=St(),l=z;try{return nt(s,!0),e.apply(this,arguments)}catch(d){t&&t(d)}finally{nt(l,!1),u&&_t()}}}k(q.prototype,{then:nr,_then:function(e,t){ir(this,new oi(null,null,e,t,z))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,s=arguments[1];return typeof t=="function"?this.then(null,function(u){return(u instanceof t?s:fn)(u)}):this.then(null,function(u){return(u&&u.name===t?s:fn)(u)})},finally:function(e){return this.then(function(t){return q.resolve(e()).then(function(){return t})},function(t){return q.resolve(e()).then(function(){return fn(t)})})},timeout:function(e,t){var s=this;return e<1/0?new q(function(u,l){var d=setTimeout(function(){return l(new W.Timeout(t))},e);s.then(u,l).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(q.prototype,Symbol.toStringTag,"Dexie.Promise"),Ze.env=ai(),k(q,{all:function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t,s){e.length===0&&t([]);var u=e.length;e.forEach(function(l,d){return q.resolve(l).then(function(p){e[d]=p,--u||t(e)},s)})})},resolve:function(e){return e instanceof q?e:e&&typeof e.then=="function"?new q(function(t,s){e.then(t,s)}):new q(Tt,!0,e)},reject:fn,race:function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t,s){e.map(function(u){return q.resolve(u).then(t,s)})})},PSD:{get:function(){return z},set:function(e){return z=e}},totalEchoes:{get:function(){return pn}},newPSD:et,usePSD:ft,scheduler:{get:function(){return $t},set:function(e){$t=e}},rejectionMapper:{get:function(){return tr},set:function(e){tr=e}},follow:function(e,t){return new q(function(s,u){return et(function(l,d){var p=z;p.unhandleds=[],p.onunhandled=d,p.finalize=ut(function(){var m,x=this;m=function(){x.unhandleds.length===0?l():d(x.unhandleds[0])},cn.push(function b(){m(),cn.splice(cn.indexOf(b),1)}),++ct,$t(function(){--ct==0&&or()},[])},p.finalize),e()},t,s,u)})}}),Dt&&(Dt.allSettled&&M(q,"allSettled",function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t){e.length===0&&t([]);var s=e.length,u=new Array(s);e.forEach(function(l,d){return q.resolve(l).then(function(p){return u[d]={status:"fulfilled",value:p}},function(p){return u[d]={status:"rejected",reason:p}}).then(function(){return--s||t(u)})})})}),Dt.any&&typeof AggregateError<"u"&&M(q,"any",function(){var e=xe.apply(null,arguments).map(gn);return new q(function(t,s){e.length===0&&s(new AggregateError([]));var u=e.length,l=new Array(u);e.forEach(function(d,p){return q.resolve(d).then(function(m){return t(m)},function(m){l[p]=m,--u||s(new AggregateError(l))})})})}));var Se={awaits:0,echoes:0,id:0},Fo=0,hn=[],dn=0,pn=0,Bo=0;function et(e,t,s,u){var l=z,d=Object.create(l);return d.parent=l,d.ref=0,d.global=!1,d.id=++Bo,Ze.env,d.env=Zn?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},t&&g(d,t),++l.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},u=ft(d,e,s,u),d.ref===0&&d.finalize(),u}function Ot(){return Se.id||(Se.id=++Fo),++Se.awaits,Se.echoes+=ii,Se.id}function tt(){return!!Se.awaits&&(--Se.awaits==0&&(Se.id=0),Se.echoes=Se.awaits*ii,!0)}function gn(e){return Se.echoes&&e&&e.constructor===Dt?(Ot(),e.then(function(t){return tt(),t},function(t){return tt(),me(t)})):e}function Mo(){var e=hn[hn.length-1];hn.pop(),nt(e,!1)}function nt(e,t){var s,u=z;(t?!Se.echoes||dn++&&e===z:!dn||--dn&&e===z)||queueMicrotask(t?(function(l){++pn,Se.echoes&&--Se.echoes!=0||(Se.echoes=Se.awaits=Se.id=0),hn.push(z),nt(l,!0)}).bind(null,e):Mo),e!==z&&(z=e,u===Ze&&(Ze.env=ai()),Zn&&(s=Ze.env.Promise,t=e.env,(u.global||e.global)&&(Object.defineProperty(c,"Promise",t.PromiseProp),s.all=t.all,s.race=t.race,s.resolve=t.resolve,s.reject=t.reject,t.allSettled&&(s.allSettled=t.allSettled),t.any&&(s.any=t.any))))}function ai(){var e=c.Promise;return Zn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ft(e,t,s,u,l){var d=z;try{return nt(e,!0),t(s,u,l)}finally{nt(d,!1)}}function ui(e,t,s,u){return typeof e!="function"?e:function(){var l=z;s&&Ot(),nt(t,!0);try{return e.apply(this,arguments)}finally{nt(l,!1),u&&queueMicrotask(tt)}}}function sr(e){Promise===Dt&&Se.echoes===0?dn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ke).indexOf("[native code]")===-1&&(Ot=tt=le);var me=q.reject,ht="￿",We="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",li="String expected.",kt=[],mn="__dbnames",ar="readonly",ur="readwrite";function dt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ci={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=re(t))[e],t}}function fi(){throw W.Type()}function ae(e,t){try{var s=hi(e),u=hi(t);if(s!==u)return s==="Array"?1:u==="Array"?-1:s==="binary"?1:u==="binary"?-1:s==="string"?1:u==="string"?-1:s==="Date"?1:u!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(l,d){for(var p=l.length,m=d.length,x=p<m?p:m,b=0;b<x;++b)if(l[b]!==d[b])return l[b]<d[b]?-1:1;return p===m?0:p<m?-1:1}(di(e),di(t));case"Array":return function(l,d){for(var p=l.length,m=d.length,x=p<m?p:m,b=0;b<x;++b){var P=ae(l[b],d[b]);if(P!==0)return P}return p===m?0:p<m?-1:1}(e,t)}}catch{}return NaN}function hi(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Re(e),e==="ArrayBuffer"?"binary":e)}function di(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var pi=(de.prototype._trans=function(e,t,s){var u=this._tx||z.trans,l=this.name,d=qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function p(b,P,y){if(!y.schema[l])throw new W.NotFound("Table "+l+" not part of transaction");return t(y.idbtrans,y)}var m=St();try{var x=u&&u.db._novip===this.db._novip?u===z.trans?u._promise(e,p,s):et(function(){return u._promise(e,p,s)},{trans:u,transless:z.transless||z}):function b(P,y,C,w){if(P.idbdb&&(P._state.openComplete||z.letThrough||P._vip)){var O=P._createTransaction(y,C,P._dbSchema);try{O.create(),P._state.PR1398_maxLoop=3}catch(E){return E.name===Qn.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return b(P,y,C,w)})):me(E)}return O._promise(y,function(E,_){return et(function(){return z.trans=O,w(E,_,O)})}).then(function(E){if(y==="readwrite")try{O.idbtrans.commit()}catch{}return y==="readonly"?E:O._completion.then(function(){return E})})}if(P._state.openComplete)return me(new W.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return me(new W.DatabaseClosed);P.open().catch(le)}return P._state.dbReadyPromise.then(function(){return b(P,y,C,w)})}(this.db,e,[this.name],p);return d&&(x._consoleTask=d,x=x.catch(function(b){return console.trace(b),me(b)})),x}finally{m&&_t()}},de.prototype.get=function(e,t){var s=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?me(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return s.core.get({trans:u,key:e}).then(function(l){return s.hook.reading.fire(l)})}).then(t)},de.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=f(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&t.every(function(P){return 0<=x.keyPath.indexOf(P)})){for(var b=0;b<t.length;++b)if(t.indexOf(x.keyPath[b])===-1)return!1;return!0}return!1}).sort(function(x,b){return x.keyPath.length-b.keyPath.length})[0];if(s&&this.db._maxKey!==ht){var p=s.keyPath.slice(0,t.length);return this.where(p).equals(p.map(function(b){return e[b]}))}!s&&qe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var u=this.schema.idxByName,l=this.db._deps.indexedDB;function d(x,b){return l.cmp(x,b)===0}var m=t.reduce(function(C,b){var P=C[0],y=C[1],C=u[b],w=e[b];return[P||C,P||!C?dt(y,C&&C.multi?function(O){return O=ue(O,b),h(O)&&O.some(function(E){return d(w,E)})}:function(O){return d(w,ue(O,b))}):y]},[null,null]),p=m[0],m=m[1];return p?this.where(p.name).equals(e[p.keyPath]).filter(m):s?this.filter(m):this.where(t).equals("")},de.prototype.filter=function(e){return this.toCollection().and(e)},de.prototype.count=function(e){return this.toCollection().count(e)},de.prototype.offset=function(e){return this.toCollection().offset(e)},de.prototype.limit=function(e){return this.toCollection().limit(e)},de.prototype.each=function(e){return this.toCollection().each(e)},de.prototype.toArray=function(e){return this.toCollection().toArray(e)},de.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},de.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},de.prototype.reverse=function(){return this.toCollection().reverse()},de.prototype.mapToClass=function(e){var t,s=this.db,u=this.name;function l(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof fi&&(function(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function P(){this.constructor=x}r(x,b),x.prototype=b===null?Object.create(b):(P.prototype=b.prototype,new P)}(l,t=e),Object.defineProperty(l.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),l.prototype.table=function(){return u},e=l);for(var d=new Set,p=e.prototype;p;p=v(p))Object.getOwnPropertyNames(p).forEach(function(x){return d.add(x)});function m(x){if(!x)return x;var b,P=Object.create(e.prototype);for(b in x)if(!d.has(b))try{P[b]=x[b]}catch{}return P}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),e},de.prototype.defineClass=function(){return this.mapToClass(function(e){g(this,e)})},de.prototype.add=function(e,t){var s=this,u=this.schema.primKey,l=u.auto,d=u.keyPath,p=e;return d&&l&&(p=yn(d)(e)),this._trans("readwrite",function(m){return s.core.mutate({trans:m,type:"add",keys:t!=null?[t]:null,values:[p]})}).then(function(m){return m.numFailures?q.reject(m.failures[0]):m.lastResult}).then(function(m){if(d)try{ne(e,d,m)}catch{}return m})},de.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=ue(e,this.schema.primKey.keyPath),e===void 0?me(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},de.prototype.put=function(e,t){var s=this,u=this.schema.primKey,l=u.auto,d=u.keyPath,p=e;return d&&l&&(p=yn(d)(e)),this._trans("readwrite",function(m){return s.core.mutate({trans:m,type:"put",values:[p],keys:t!=null?[t]:null})}).then(function(m){return m.numFailures?q.reject(m.failures[0]):m.lastResult}).then(function(m){if(d)try{ne(e,d,m)}catch{}return m})},de.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(s){return t.core.mutate({trans:s,type:"delete",keys:[e]})}).then(function(s){return s.numFailures?q.reject(s.failures[0]):void 0})},de.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ci})}).then(function(t){return t.numFailures?q.reject(t.failures[0]):void 0})},de.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(s){return t.core.getMany({keys:e,trans:s}).then(function(u){return u.map(function(l){return t.hook.reading.fire(l)})})})},de.prototype.bulkAdd=function(e,t,s){var u=this,l=Array.isArray(t)?t:void 0,d=(s=s||(l?void 0:t))?s.allKeys:void 0;return this._trans("readwrite",function(p){var b=u.schema.primKey,m=b.auto,b=b.keyPath;if(b&&l)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var x=e.length,b=b&&m?e.map(yn(b)):e;return u.core.mutate({trans:p,type:"add",keys:l,values:b,wantResults:d}).then(function(O){var y=O.numFailures,C=O.results,w=O.lastResult,O=O.failures;if(y===0)return d?C:w;throw new xt("".concat(u.name,".bulkAdd(): ").concat(y," of ").concat(x," operations failed"),O)})})},de.prototype.bulkPut=function(e,t,s){var u=this,l=Array.isArray(t)?t:void 0,d=(s=s||(l?void 0:t))?s.allKeys:void 0;return this._trans("readwrite",function(p){var b=u.schema.primKey,m=b.auto,b=b.keyPath;if(b&&l)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var x=e.length,b=b&&m?e.map(yn(b)):e;return u.core.mutate({trans:p,type:"put",keys:l,values:b,wantResults:d}).then(function(O){var y=O.numFailures,C=O.results,w=O.lastResult,O=O.failures;if(y===0)return d?C:w;throw new xt("".concat(u.name,".bulkPut(): ").concat(y," of ").concat(x," operations failed"),O)})})},de.prototype.bulkUpdate=function(e){var t=this,s=this.core,u=e.map(function(p){return p.key}),l=e.map(function(p){return p.changes}),d=[];return this._trans("readwrite",function(p){return s.getMany({trans:p,keys:u,cache:"clone"}).then(function(m){var x=[],b=[];e.forEach(function(y,C){var w=y.key,O=y.changes,E=m[C];if(E){for(var _=0,A=Object.keys(O);_<A.length;_++){var L=A[_],j=O[L];if(L===t.schema.primKey.keyPath){if(ae(j,w)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else ne(E,L,j)}d.push(C),x.push(w),b.push(E)}});var P=x.length;return s.mutate({trans:p,type:"put",keys:x,values:b,updates:{keys:u,changeSpecs:l}}).then(function(y){var C=y.numFailures,w=y.failures;if(C===0)return P;for(var O=0,E=Object.keys(w);O<E.length;O++){var _,A=E[O],L=d[Number(A)];L!=null&&(_=w[A],delete w[A],w[L]=_)}throw new xt("".concat(t.name,".bulkUpdate(): ").concat(C," of ").concat(P," operations failed"),w)})})})},de.prototype.bulkDelete=function(e){var t=this,s=e.length;return this._trans("readwrite",function(u){return t.core.mutate({trans:u,type:"delete",keys:e})}).then(function(p){var l=p.numFailures,d=p.lastResult,p=p.failures;if(l===0)return d;throw new xt("".concat(t.name,".bulkDelete(): ").concat(l," of ").concat(s," operations failed"),p)})},de);function de(){}function Bt(e){function t(p,m){if(m){for(var x=arguments.length,b=new Array(x-1);--x;)b[x-1]=arguments[x];return s[p].subscribe.apply(null,b),e}if(typeof p=="string")return s[p]}var s={};t.addEventType=d;for(var u=1,l=arguments.length;u<l;++u)d(arguments[u]);return t;function d(p,m,x){if(typeof p!="object"){var b;m=m||Io;var P={subscribers:[],fire:x=x||le,subscribe:function(y){P.subscribers.indexOf(y)===-1&&(P.subscribers.push(y),P.fire=m(P.fire,y))},unsubscribe:function(y){P.subscribers=P.subscribers.filter(function(C){return C!==y}),P.fire=P.subscribers.reduce(m,x)}};return s[p]=t[p]=P}f(b=p).forEach(function(y){var C=b[y];if(h(C))d(y,b[y][0],b[y][1]);else{if(C!=="asap")throw new W.InvalidArgument("Invalid event config");var w=d(y,Kt,function(){for(var O=arguments.length,E=new Array(O);O--;)E[O]=arguments[O];w.subscribers.forEach(function(_){se(function(){_.apply(null,E)})})})}})}}function Mt(e,t){return I(t).from({prototype:e}),t}function Pt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function lr(e,t){e.filter=dt(e.filter,t)}function cr(e,t,s){var u=e.replayFilter;e.replayFilter=u?function(){return dt(u(),t())}:t,e.justLimit=s&&!u}function vn(e,t){if(e.isPrimKey)return t.primaryKey;var s=t.getIndexByKeyPath(e.index);if(!s)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return s}function gi(e,t,s){var u=vn(e,t.schema);return t.openCursor({trans:s,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:u,range:e.range}})}function bn(e,t,s,u){var l=e.replayFilter?dt(e.filter,e.replayFilter()):e.filter;if(e.or){var d={},p=function(m,x,b){var P,y;l&&!l(x,b,function(C){return x.stop(C)},function(C){return x.fail(C)})||((y=""+(P=x.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(P)),R(d,y)||(d[y]=!0,t(m,x,b)))};return Promise.all([e.or._iterate(p,s),mi(gi(e,u,s),e.algorithm,p,!e.keysOnly&&e.valueMapper)])}return mi(gi(e,u,s),dt(e.algorithm,l),t,!e.keysOnly&&e.valueMapper)}function mi(e,t,s,u){var l=pe(u?function(d,p,m){return s(u(d),p,m)}:s);return e.then(function(d){if(d)return d.start(function(){var p=function(){return d.continue()};t&&!t(d,function(m){return p=m},function(m){d.stop(m),p=le},function(m){d.fail(m),p=le})||l(d.value,d,function(m){return p=m}),p()})})}var Je=Symbol(),qt=(yi.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(h(t))return a(a([],h(e)?e:[],!0),t).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var s=this.remove;if(h(s))return h(e)?e.filter(function(u){return!s.includes(u)}).sort():[];if(typeof s=="number")return Number(e)-s;if(typeof s=="bigint")try{return BigInt(e)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},yi);function yi(e){Object.assign(this,e)}var qo=(ie.prototype._read=function(e,t){var s=this._ctx;return s.error?s.table._trans(null,me.bind(null,s.error)):s.table._trans("readonly",e).then(t)},ie.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,me.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ie.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=dt(t.algorithm,e)},ie.prototype._iterate=function(e,t){return bn(this._ctx,e,t,this._ctx.table.core)},ie.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return e&&g(s,e),t._ctx=s,t},ie.prototype.raw=function(){return this._ctx.valueMapper=null,this},ie.prototype.each=function(e){var t=this._ctx;return this._read(function(s){return bn(t,e,s,t.table.core)})},ie.prototype.count=function(e){var t=this;return this._read(function(s){var u=t._ctx,l=u.table.core;if(Pt(u,!0))return l.count({trans:s,query:{index:vn(u,l.schema),range:u.range}}).then(function(p){return Math.min(p,u.limit)});var d=0;return bn(u,function(){return++d,!1},s,l).then(function(){return d})}).then(e)},ie.prototype.sortBy=function(e,t){var s=e.split(".").reverse(),u=s[0],l=s.length-1;function d(x,b){return b?d(x[s[b]],b-1):x[u]}var p=this._ctx.dir==="next"?1:-1;function m(x,b){return x=d(x,l),b=d(b,l),x<b?-p:b<x?p:0}return this.toArray(function(x){return x.sort(m)}).then(t)},ie.prototype.toArray=function(e){var t=this;return this._read(function(s){var u=t._ctx;if(u.dir==="next"&&Pt(u,!0)&&0<u.limit){var l=u.valueMapper,d=vn(u,u.table.core.schema);return u.table.core.query({trans:s,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(m){return m=m.result,l?m.map(l):m})}var p=[];return bn(u,function(m){return p.push(m)},s,u.table.core).then(function(){return p})},e)},ie.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Pt(t)?cr(t,function(){var s=e;return function(u,l){return s===0||(s===1?--s:l(function(){u.advance(s),s=0}),!1)}}):cr(t,function(){var s=e;return function(){return--s<0}})),this},ie.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),cr(this._ctx,function(){var t=e;return function(s,u,l){return--t<=0&&u(l),0<=t}},!0),this},ie.prototype.until=function(e,t){return lr(this._ctx,function(s,u,l){return!e(s.value)||(u(l),t)}),this},ie.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ie.prototype.last=function(e){return this.reverse().first(e)},ie.prototype.filter=function(e){var t;return lr(this._ctx,function(s){return e(s.value)}),(t=this._ctx).isMatch=dt(t.isMatch,e),this},ie.prototype.and=function(e){return this.filter(e)},ie.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ie.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ie.prototype.desc=function(){return this.reverse()},ie.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(s,u){e(u.key,u)})},ie.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ie.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(s,u){e(u.primaryKey,u)})},ie.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var s=[];return this.each(function(u,l){s.push(l.key)}).then(function(){return s}).then(e)},ie.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Pt(t,!0)&&0<t.limit)return this._read(function(u){var l=vn(t,t.table.core.schema);return t.table.core.query({trans:u,values:!1,limit:t.limit,query:{index:l,range:t.range}})}).then(function(u){return u.result}).then(e);t.keysOnly=!t.isMatch;var s=[];return this.each(function(u,l){s.push(l.primaryKey)}).then(function(){return s}).then(e)},ie.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ie.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ie.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ie.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return lr(this._ctx,function(l){var u=l.primaryKey.toString(),l=R(t,u);return t[u]=!0,!l}),this},ie.prototype.modify=function(e){var t=this,s=this._ctx;return this._write(function(u){var l,d,p;p=typeof e=="function"?e:(l=f(e),d=l.length,function(_){for(var A=!1,L=0;L<d;++L){var j=l[L],N=e[j],K=ue(_,j);N instanceof qt?(ne(_,j,N.execute(K)),A=!0):K!==N&&(ne(_,j,N),A=!0)}return A});function m(_,j){var L=j.failures,j=j.numFailures;O+=_-j;for(var N=0,K=f(L);N<K.length;N++){var F=K[N];w.push(L[F])}}var x=s.table.core,b=x.schema.primaryKey,P=b.outbound,y=b.extractKey,C=t.db._options.modifyChunkSize||200,w=[],O=0,E=[];return t.clone().primaryKeys().then(function(_){function A(j){var N=Math.min(C,_.length-j);return x.getMany({trans:u,keys:_.slice(j,j+N),cache:"immutable"}).then(function(K){for(var F=[],T=[],$=P?[]:null,B=[],D=0;D<N;++D){var G=K[D],Q={value:re(G),primKey:_[j+D]};p.call(Q,Q.value,Q)!==!1&&(Q.value==null?B.push(_[j+D]):P||ae(y(G),y(Q.value))===0?(T.push(Q.value),P&&$.push(_[j+D])):(B.push(_[j+D]),F.push(Q.value)))}return Promise.resolve(0<F.length&&x.mutate({trans:u,type:"add",values:F}).then(function(ee){for(var X in ee.failures)B.splice(parseInt(X),1);m(F.length,ee)})).then(function(){return(0<T.length||L&&typeof e=="object")&&x.mutate({trans:u,type:"put",keys:$,values:T,criteria:L,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<j}).then(function(ee){return m(T.length,ee)})}).then(function(){return(0<B.length||L&&e===fr)&&x.mutate({trans:u,type:"delete",keys:B,criteria:L,isAdditionalChunk:0<j}).then(function(ee){return m(B.length,ee)})}).then(function(){return _.length>j+N&&A(j+C)})})}var L=Pt(s)&&s.limit===1/0&&(typeof e!="function"||e===fr)&&{index:s.index,range:s.range};return A(0).then(function(){if(0<w.length)throw new sn("Error modifying one or more objects",w,O,E);return _.length})})})},ie.prototype.delete=function(){var e=this._ctx,t=e.range;return Pt(e)&&(e.isPrimKey||t.type===3)?this._write(function(s){var u=e.table.core.schema.primaryKey,l=t;return e.table.core.count({trans:s,query:{index:u,range:l}}).then(function(d){return e.table.core.mutate({trans:s,type:"deleteRange",range:l}).then(function(p){var m=p.failures;if(p.lastResult,p.results,p=p.numFailures,p)throw new sn("Could not delete some values",Object.keys(m).map(function(x){return m[x]}),d-p);return d-p})})}):this.modify(fr)},ie);function ie(){}var fr=function(e,t){return t.value=null};function Uo(e,t){return e<t?-1:e===t?0:1}function Vo(e,t){return t<e?-1:e===t?0:1}function Le(e,t,s){return e=e instanceof bi?new e.Collection(e):e,e._ctx.error=new(s||TypeError)(t),e}function Ct(e){return new e.Collection(e,function(){return vi("")}).limit(0)}function wn(e,t,s,u){var l,d,p,m,x,b,P,y=s.length;if(!s.every(function(O){return typeof O=="string"}))return Le(e,li);function C(O){l=O==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},d=O==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},p=O==="next"?Uo:Vo;var E=s.map(function(_){return{lower:d(_),upper:l(_)}}).sort(function(_,A){return p(_.lower,A.lower)});m=E.map(function(_){return _.upper}),x=E.map(function(_){return _.lower}),P=(b=O)==="next"?"":u}C("next"),e=new e.Collection(e,function(){return rt(m[0],x[y-1]+u)}),e._ondirectionchange=function(O){C(O)};var w=0;return e._addAlgorithm(function(O,E,_){var A=O.key;if(typeof A!="string")return!1;var L=d(A);if(t(L,x,w))return!0;for(var j=null,N=w;N<y;++N){var K=function(F,T,$,B,D,G){for(var Q=Math.min(F.length,B.length),ee=-1,X=0;X<Q;++X){var Fe=T[X];if(Fe!==B[X])return D(F[X],$[X])<0?F.substr(0,X)+$[X]+$.substr(X+1):D(F[X],B[X])<0?F.substr(0,X)+B[X]+$.substr(X+1):0<=ee?F.substr(0,ee)+T[ee]+$.substr(ee+1):null;D(F[X],Fe)<0&&(ee=X)}return Q<B.length&&G==="next"?F+$.substr(F.length):Q<F.length&&G==="prev"?F.substr(0,$.length):ee<0?null:F.substr(0,ee)+B[ee]+$.substr(ee+1)}(A,L,m[N],x[N],p,b);K===null&&j===null?w=N+1:(j===null||0<p(j,K))&&(j=K)}return E(j!==null?function(){O.continue(j+P)}:_),!1}),e}function rt(e,t,s,u){return{type:2,lower:e,upper:t,lowerOpen:s,upperOpen:u}}function vi(e){return{type:1,lower:e,upper:e}}var bi=(Object.defineProperty(_e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_e.prototype.between=function(e,t,s,u){s=s!==!1,u=u===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(s||u)&&(!s||!u)?Ct(this):new this.Collection(this,function(){return rt(e,t,!s,!u)})}catch{return Le(this,We)}},_e.prototype.equals=function(e){return e==null?Le(this,We):new this.Collection(this,function(){return vi(e)})},_e.prototype.above=function(e){return e==null?Le(this,We):new this.Collection(this,function(){return rt(e,void 0,!0)})},_e.prototype.aboveOrEqual=function(e){return e==null?Le(this,We):new this.Collection(this,function(){return rt(e,void 0,!1)})},_e.prototype.below=function(e){return e==null?Le(this,We):new this.Collection(this,function(){return rt(void 0,e,!1,!0)})},_e.prototype.belowOrEqual=function(e){return e==null?Le(this,We):new this.Collection(this,function(){return rt(void 0,e)})},_e.prototype.startsWith=function(e){return typeof e!="string"?Le(this,li):this.between(e,e+ht,!0,!0)},_e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):wn(this,function(t,s){return t.indexOf(s[0])===0},[e],ht)},_e.prototype.equalsIgnoreCase=function(e){return wn(this,function(t,s){return t===s[0]},[e],"")},_e.prototype.anyOfIgnoreCase=function(){var e=xe.apply(ge,arguments);return e.length===0?Ct(this):wn(this,function(t,s){return s.indexOf(t)!==-1},e,"")},_e.prototype.startsWithAnyOfIgnoreCase=function(){var e=xe.apply(ge,arguments);return e.length===0?Ct(this):wn(this,function(t,s){return s.some(function(u){return t.indexOf(u)===0})},e,ht)},_e.prototype.anyOf=function(){var e=this,t=xe.apply(ge,arguments),s=this._cmp;try{t.sort(s)}catch{return Le(this,We)}if(t.length===0)return Ct(this);var u=new this.Collection(this,function(){return rt(t[0],t[t.length-1])});u._ondirectionchange=function(d){s=d==="next"?e._ascending:e._descending,t.sort(s)};var l=0;return u._addAlgorithm(function(d,p,m){for(var x=d.key;0<s(x,t[l]);)if(++l===t.length)return p(m),!1;return s(x,t[l])===0||(p(function(){d.continue(t[l])}),!1)}),u},_e.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_e.prototype.noneOf=function(){var e=xe.apply(ge,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Le(this,We)}var t=e.reduce(function(s,u){return s?s.concat([[s[s.length-1][1],u]]):[[-1/0,u]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},_e.prototype.inAnyRange=function(A,t){var s=this,u=this._cmp,l=this._ascending,d=this._descending,p=this._min,m=this._max;if(A.length===0)return Ct(this);if(!A.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&l(L[0],L[1])<=0}))return Le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var x=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,P,y=l;function C(L,j){return y(L[0],j[0])}try{(P=A.reduce(function(L,j){for(var N=0,K=L.length;N<K;++N){var F=L[N];if(u(j[0],F[1])<0&&0<u(j[1],F[0])){F[0]=p(F[0],j[0]),F[1]=m(F[1],j[1]);break}}return N===K&&L.push(j),L},[])).sort(C)}catch{return Le(this,We)}var w=0,O=b?function(L){return 0<l(L,P[w][1])}:function(L){return 0<=l(L,P[w][1])},E=x?function(L){return 0<d(L,P[w][0])}:function(L){return 0<=d(L,P[w][0])},_=O,A=new this.Collection(this,function(){return rt(P[0][0],P[P.length-1][1],!x,!b)});return A._ondirectionchange=function(L){y=L==="next"?(_=O,l):(_=E,d),P.sort(C)},A._addAlgorithm(function(L,j,N){for(var K,F=L.key;_(F);)if(++w===P.length)return j(N),!1;return!O(K=F)&&!E(K)||(s._cmp(F,P[w][1])===0||s._cmp(F,P[w][0])===0||j(function(){y===l?L.continue(P[w][0]):L.continue(P[w][1])}),!1)}),A},_e.prototype.startsWithAnyOf=function(){var e=xe.apply(ge,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Ct(this):this.inAnyRange(e.map(function(t){return[t,t+ht]})):Le(this,"startsWithAnyOf() only works with strings")},_e);function _e(){}function Ue(e){return pe(function(t){return Ut(t),e(t.target.error),!1})}function Ut(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Vt="storagemutated",hr="x-storagemutated-1",it=Bt(null,Vt),Ho=(Ve.prototype._lock=function(){return J(!z.global),++this._reculock,this._reculock!==1||z.global||(z.lockOwnerFor=this),this},Ve.prototype._unlock=function(){if(J(!z.global),--this._reculock==0)for(z.global||(z.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{ft(e[1],e[0])}catch{}}return this},Ve.prototype._locked=function(){return this._reculock&&z.lockOwnerFor!==this},Ve.prototype.create=function(e){var t=this;if(!this.mode)return this;var s=this.db.idbdb,u=this.db._state.dbOpenError;if(J(!this.idbtrans),!e&&!s)switch(u&&u.name){case"DatabaseClosedError":throw new W.DatabaseClosed(u);case"MissingAPIError":throw new W.MissingAPI(u.message,u);default:throw new W.OpenFailed(u)}if(!this.active)throw new W.TransactionInactive;return J(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=pe(function(l){Ut(l),t._reject(e.error)}),e.onabort=pe(function(l){Ut(l),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(l)}),e.oncomplete=pe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&it.storagemutated.fire(e.mutatedParts)}),this},Ve.prototype._promise=function(e,t,s){var u=this;if(e==="readwrite"&&this.mode!=="readwrite")return me(new W.ReadOnly("Transaction is readonly"));if(!this.active)return me(new W.TransactionInactive);if(this._locked())return new q(function(d,p){u._blockedFuncs.push([function(){u._promise(e,t,s).then(d,p)},z])});if(s)return et(function(){var d=new q(function(p,m){u._lock();var x=t(p,m,u);x&&x.then&&x.then(p,m)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var l=new q(function(d,p){var m=t(d,p,u);m&&m.then&&m.then(d,p)});return l._lib=!0,l},Ve.prototype._root=function(){return this.parent?this.parent._root():this},Ve.prototype.waitFor=function(e){var t,s=this._root(),u=q.resolve(e);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return u}):(s._waitingFor=u,s._waitingQueue=[],t=s.idbtrans.objectStore(s.storeNames[0]),function d(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(t.get(-1/0).onsuccess=d)}());var l=s._waitingFor;return new q(function(d,p){u.then(function(m){return s._waitingQueue.push(pe(d.bind(null,m)))},function(m){return s._waitingQueue.push(pe(p.bind(null,m)))}).finally(function(){s._waitingFor===l&&(s._waitingFor=null)})})},Ve.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},Ve.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(R(t,e))return t[e];var s=this.schema[e];if(!s)throw new W.NotFound("Table "+e+" not part of transaction");return s=new this.db.Table(e,s,this),s.core=this.db.core.table(e),t[e]=s},Ve);function Ve(){}function dr(e,t,s,u,l,d,p){return{name:e,keyPath:t,unique:s,multi:u,auto:l,compound:d,src:(s&&!p?"&":"")+(u?"*":"")+(l?"++":"")+wi(t)}}function wi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function pr(e,t,s){return{name:e,primKey:t,indexes:s,mappedClass:null,idxByName:(u=function(l){return[l.name,l]},s.reduce(function(l,d,p){return p=u(d,p),p&&(l[p[0]]=p[1]),l},{}))};var u}var Ht=function(e){try{return e.only([[]]),Ht=function(){return[[]]},[[]]}catch{return Ht=function(){return ht},ht}};function gr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(s){return s[t]}:function(s){return ue(s,t)}:function(s){return ue(s,e)};var t}function xi(e){return[].slice.call(e)}var zo=0;function zt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Wo(e,t,x){function u(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=_.lower,O=_.upper,E=_.lowerOpen,_=_.upperOpen;return w===void 0?O===void 0?null:t.upperBound(O,!!_):O===void 0?t.lowerBound(w,!!E):t.bound(w,O,!!E,!!_)}function l(C){var w,O=C.name;return{name:O,schema:C,mutate:function(E){var _=E.trans,A=E.type,L=E.keys,j=E.values,N=E.range;return new Promise(function(K,F){K=pe(K);var T=_.objectStore(O),$=T.keyPath==null,B=A==="put"||A==="add";if(!B&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var D,G=(L||j||{length:1}).length;if(L&&j&&L.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function Q(Ae){++Fe,Ut(Ae)}var ee=[],X=[],Fe=0;if(A==="deleteRange"){if(N.type===4)return K({numFailures:Fe,failures:X,results:[],lastResult:void 0});N.type===3?ee.push(D=T.clear()):ee.push(D=T.delete(u(N)))}else{var $=B?$?[j,L]:[j,null]:[L,null],Z=$[0],ke=$[1];if(B)for(var Pe=0;Pe<G;++Pe)ee.push(D=ke&&ke[Pe]!==void 0?T[A](Z[Pe],ke[Pe]):T[A](Z[Pe])),D.onerror=Q;else for(Pe=0;Pe<G;++Pe)ee.push(D=T[A](Z[Pe])),D.onerror=Q}function Nn(Ae){Ae=Ae.target.result,ee.forEach(function(mt,Kr){return mt.error!=null&&(X[Kr]=mt.error)}),K({numFailures:Fe,failures:X,results:A==="delete"?L:ee.map(function(mt){return mt.result}),lastResult:Ae})}D.onerror=function(Ae){Q(Ae),Nn(Ae)},D.onsuccess=Nn})},getMany:function(E){var _=E.trans,A=E.keys;return new Promise(function(L,j){L=pe(L);for(var N,K=_.objectStore(O),F=A.length,T=new Array(F),$=0,B=0,D=function(ee){ee=ee.target,T[ee._pos]=ee.result,++B===$&&L(T)},G=Ue(j),Q=0;Q<F;++Q)A[Q]!=null&&((N=K.get(A[Q]))._pos=Q,N.onsuccess=D,N.onerror=G,++$);$===0&&L(T)})},get:function(E){var _=E.trans,A=E.key;return new Promise(function(L,j){L=pe(L);var N=_.objectStore(O).get(A);N.onsuccess=function(K){return L(K.target.result)},N.onerror=Ue(j)})},query:(w=b,function(E){return new Promise(function(_,A){_=pe(_);var L,j,N,$=E.trans,K=E.values,F=E.limit,D=E.query,T=F===1/0?void 0:F,B=D.index,D=D.range,$=$.objectStore(O),B=B.isPrimaryKey?$:$.index(B.name),D=u(D);if(F===0)return _({result:[]});w?((T=K?B.getAll(D,T):B.getAllKeys(D,T)).onsuccess=function(G){return _({result:G.target.result})},T.onerror=Ue(A)):(L=0,j=!K&&"openKeyCursor"in B?B.openKeyCursor(D):B.openCursor(D),N=[],j.onsuccess=function(G){var Q=j.result;return Q?(N.push(K?Q.value:Q.primaryKey),++L===F?_({result:N}):void Q.continue()):_({result:N})},j.onerror=Ue(A))})}),openCursor:function(E){var _=E.trans,A=E.values,L=E.query,j=E.reverse,N=E.unique;return new Promise(function(K,F){K=pe(K);var B=L.index,T=L.range,$=_.objectStore(O),$=B.isPrimaryKey?$:$.index(B.name),B=j?N?"prevunique":"prev":N?"nextunique":"next",D=!A&&"openKeyCursor"in $?$.openKeyCursor(u(T),B):$.openCursor(u(T),B);D.onerror=Ue(F),D.onsuccess=pe(function(G){var Q,ee,X,Fe,Z=D.result;Z?(Z.___id=++zo,Z.done=!1,Q=Z.continue.bind(Z),ee=(ee=Z.continuePrimaryKey)&&ee.bind(Z),X=Z.advance.bind(Z),Fe=function(){throw new Error("Cursor not stopped")},Z.trans=_,Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=function(){throw new Error("Cursor not started")},Z.fail=pe(F),Z.next=function(){var ke=this,Pe=1;return this.start(function(){return Pe--?ke.continue():ke.stop()}).then(function(){return ke})},Z.start=function(ke){function Pe(){if(D.result)try{ke()}catch(Ae){Z.fail(Ae)}else Z.done=!0,Z.start=function(){throw new Error("Cursor behind last entry")},Z.stop()}var Nn=new Promise(function(Ae,mt){Ae=pe(Ae),D.onerror=Ue(mt),Z.fail=mt,Z.stop=function(Kr){Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=Fe,Ae(Kr)}});return D.onsuccess=pe(function(Ae){D.onsuccess=Pe,Pe()}),Z.continue=Q,Z.continuePrimaryKey=ee,Z.advance=X,Pe(),Nn},K(Z)):K(null)},F)})},count:function(E){var _=E.query,A=E.trans,L=_.index,j=_.range;return new Promise(function(N,K){var F=A.objectStore(O),T=L.isPrimaryKey?F:F.index(L.name),F=u(j),T=F?T.count(F):T.count();T.onsuccess=pe(function($){return N($.target.result)}),T.onerror=Ue(K)})}}}var d,p,m,P=(p=x,m=xi((d=e).objectStoreNames),{schema:{name:d.name,tables:m.map(function(C){return p.objectStore(C)}).map(function(C){var w=C.keyPath,_=C.autoIncrement,O=h(w),E={},_={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:O,keyPath:w,autoIncrement:_,unique:!0,extractKey:gr(w)},indexes:xi(C.indexNames).map(function(A){return C.index(A)}).map(function(N){var L=N.name,j=N.unique,K=N.multiEntry,N=N.keyPath,K={name:L,compound:h(N),keyPath:N,unique:j,multiEntry:K,extractKey:gr(N)};return E[zt(N)]=K}),getIndexByKeyPath:function(A){return E[zt(A)]}};return E[":id"]=_.primaryKey,w!=null&&(E[zt(w)]=_.primaryKey),_})},hasGetAll:0<m.length&&"getAll"in p.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=P.schema,b=P.hasGetAll,P=x.tables.map(l),y={};return P.forEach(function(C){return y[C.name]=C}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(C){if(!y[C])throw new Error("Table '".concat(C,"' not found"));return y[C]},MIN_KEY:-1/0,MAX_KEY:Ht(t),schema:x}}function Jo(e,t,s,u){var l=s.IDBKeyRange;return s.indexedDB,{dbcore:(u=Wo(t,l,u),e.dbcore.reduce(function(d,p){return p=p.create,o(o({},d),p(d))},u))}}function xn(e,u){var s=u.db,u=Jo(e._middlewares,s,e._deps,u);e.core=u.dbcore,e.tables.forEach(function(l){var d=l.name;e.core.schema.tables.some(function(p){return p.name===d})&&(l.core=e.core.table(d),e[d]instanceof e.Table&&(e[d].core=l.core))})}function Sn(e,t,s,u){s.forEach(function(l){var d=u[l];t.forEach(function(p){var m=function x(b,P){return V(b,P)||(b=v(b))&&x(b,P)}(p,l);(!m||"value"in m&&m.value===void 0)&&(p===e.Transaction.prototype||p instanceof e.Transaction?M(p,l,{get:function(){return this.table(l)},set:function(x){U(this,l,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):p[l]=new e.Table(l,d))})})}function mr(e,t){t.forEach(function(s){for(var u in s)s[u]instanceof e.Table&&delete s[u]})}function Yo(e,t){return e._cfg.version-t._cfg.version}function Go(e,t,s,u){var l=e._dbSchema;s.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=pr("$meta",_i("")[0],[]),e._storeNames.push("$meta"));var d=e._createTransaction("readwrite",e._storeNames,l);d.create(s),d._completion.catch(u);var p=d._reject.bind(d),m=z.transless||z;et(function(){return z.trans=d,z.transless=m,t!==0?(xn(e,s),b=t,((x=d).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(P){return P??b}):q.resolve(b)).then(function(P){return C=P,w=d,O=s,E=[],P=(y=e)._versions,_=y._dbSchema=On(0,y.idbdb,O),(P=P.filter(function(A){return A._cfg.version>=C})).length!==0?(P.forEach(function(A){E.push(function(){var L=_,j=A._cfg.dbschema;kn(y,L,O),kn(y,j,O),_=y._dbSchema=j;var N=yr(L,j);N.add.forEach(function(B){vr(O,B[0],B[1].primKey,B[1].indexes)}),N.change.forEach(function(B){if(B.recreate)throw new W.Upgrade("Not yet support for changing primary key");var D=O.objectStore(B.name);B.add.forEach(function(G){return _n(D,G)}),B.change.forEach(function(G){D.deleteIndex(G.name),_n(D,G)}),B.del.forEach(function(G){return D.deleteIndex(G)})});var K=A._cfg.contentUpgrade;if(K&&A._cfg.version>C){xn(y,O),w._memoizedTables={};var F=ze(j);N.del.forEach(function(B){F[B]=L[B]}),mr(y,[y.Transaction.prototype]),Sn(y,[y.Transaction.prototype],f(F),F),w.schema=F;var T,$=Xe(K);return $&&Ot(),N=q.follow(function(){var B;(T=K(w))&&$&&(B=tt.bind(null,null),T.then(B,B))}),T&&typeof T.then=="function"?q.resolve(T):N.then(function(){return T})}}),E.push(function(L){var j,N,K=A._cfg.dbschema;j=K,N=L,[].slice.call(N.db.objectStoreNames).forEach(function(F){return j[F]==null&&N.db.deleteObjectStore(F)}),mr(y,[y.Transaction.prototype]),Sn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),w.schema=y._dbSchema}),E.push(function(L){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===A._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(j){return j!=="$meta"})):L.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return E.length?q.resolve(E.shift()(w.idbtrans)).then(A):q.resolve()}().then(function(){Si(_,O)})):q.resolve();var y,C,w,O,E,_}).catch(p)):(f(l).forEach(function(P){vr(s,P,l[P].primKey,l[P].indexes)}),xn(e,s),void q.follow(function(){return e.on.populate.fire(d)}).catch(p));var x,b})}function Qo(e,t){Si(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var s=On(0,e.idbdb,t);kn(e,e._dbSchema,t);for(var u=0,l=yr(s,e._dbSchema).change;u<l.length;u++){var d=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=t.objectStore(p.name);p.add.forEach(function(x){qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(x.src)),_n(m,x)})}(l[u]);if(typeof d=="object")return d.value}}function yr(e,t){var s,u={del:[],add:[],change:[]};for(s in e)t[s]||u.del.push(s);for(s in t){var l=e[s],d=t[s];if(l){var p={name:s,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||l.primKey.auto!==d.primKey.auto)p.recreate=!0,u.change.push(p);else{var m=l.idxByName,x=d.idxByName,b=void 0;for(b in m)x[b]||p.del.push(b);for(b in x){var P=m[b],y=x[b];P?P.src!==y.src&&p.change.push(y):p.add.push(y)}(0<p.del.length||0<p.add.length||0<p.change.length)&&u.change.push(p)}}else u.add.push([s,d])}return u}function vr(e,t,s,u){var l=e.db.createObjectStore(t,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return u.forEach(function(d){return _n(l,d)}),l}function Si(e,t){f(e).forEach(function(s){t.db.objectStoreNames.contains(s)||(qe&&console.debug("Dexie: Creating missing table",s),vr(t,s,e[s].primKey,e[s].indexes))})}function _n(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function On(e,t,s){var u={};return H(t.objectStoreNames,0).forEach(function(l){for(var d=s.objectStore(l),p=dr(wi(b=d.keyPath),b||"",!0,!1,!!d.autoIncrement,b&&typeof b!="string",!0),m=[],x=0;x<d.indexNames.length;++x){var P=d.index(d.indexNames[x]),b=P.keyPath,P=dr(P.name,b,!!P.unique,!!P.multiEntry,!1,b&&typeof b!="string",!1);m.push(P)}u[l]=pr(l,p,m)}),u}function kn(e,t,s){for(var u=s.db.objectStoreNames,l=0;l<u.length;++l){var d=u[l],p=s.objectStore(d);e._hasGetAll="getAll"in p;for(var m=0;m<p.indexNames.length;++m){var x=p.indexNames[m],b=p.index(x).keyPath,P=typeof b=="string"?b:"["+H(b).join("+")+"]";!t[d]||(b=t[d].idxByName[P])&&(b.name=x,delete t[d].idxByName[P],t[d].idxByName[x]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function _i(e){return e.split(",").map(function(t,s){var u=(t=t.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return dr(u,l||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(l),s===0)})}var Xo=(Pn.prototype._parseStoresSpec=function(e,t){f(e).forEach(function(s){if(e[s]!==null){var u=_i(e[s]),l=u.shift();if(l.unique=!0,l.multi)throw new W.Schema("Primary key cannot be multi-valued");u.forEach(function(d){if(d.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),t[s]=pr(s,l,u)}})},Pn.prototype.stores=function(s){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,s):s;var s=t._versions,u={},l={};return s.forEach(function(d){g(u,d._cfg.storesSource),l=d._cfg.dbschema={},d._parseStoresSpec(u,l)}),t._dbSchema=l,mr(t,[t._allTables,t,t.Transaction.prototype]),Sn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],f(l),l),t._storeNames=f(l),this},Pn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Xn(this._cfg.contentUpgrade||le,e),this},Pn);function Pn(){}function br(e,t){var s=e._dbNamesDB;return s||(s=e._dbNamesDB=new Ye(mn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function wr(e){return e&&typeof e.databases=="function"}function xr(e){return et(function(){return z.letThrough=!0,e()})}function Sr(e){return!("from"in e)}var Oe=function(e,t){if(!this){var s=new Oe;return e&&"d"in e&&g(s,e),s}g(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Wt(e,t,s){var u=ae(t,s);if(!isNaN(u)){if(0<u)throw RangeError();if(Sr(e))return g(e,{from:t,to:s,d:1});var l=e.l,u=e.r;if(ae(s,e.from)<0)return l?Wt(l,t,s):e.l={from:t,to:s,d:1,l:null,r:null},Oi(e);if(0<ae(t,e.to))return u?Wt(u,t,s):e.r={from:t,to:s,d:1,l:null,r:null},Oi(e);ae(t,e.from)<0&&(e.from=t,e.l=null,e.d=u?u.d+1:1),0<ae(s,e.to)&&(e.to=s,e.r=null,e.d=e.l?e.l.d+1:1),s=!e.r,l&&!e.l&&Jt(e,l),u&&s&&Jt(e,u)}}function Jt(e,t){Sr(t)||function s(u,x){var d=x.from,p=x.to,m=x.l,x=x.r;Wt(u,d,p),m&&s(u,m),x&&s(u,x)}(e,t)}function Cn(e,t){var s=_r(t),u=s.next();if(u.done)return!1;for(var l=u.value,d=_r(e),p=d.next(l.from),m=p.value;!u.done&&!p.done;){if(ae(m.from,l.to)<=0&&0<=ae(m.to,l.from))return!0;ae(l.from,m.from)<0?l=(u=s.next(m.from)).value:m=(p=d.next(l.from)).value}return!1}function _r(e){var t=Sr(e)?null:{s:0,n:e};return{next:function(s){for(var u=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,u)for(;t.n.l&&ae(s,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!u||ae(s,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Oi(e){var t,s,u=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((s=e.l)===null||s===void 0?void 0:s.d)||0),l=1<u?"r":u<-1?"l":"";l&&(t=l=="r"?"l":"r",s=o({},e),u=e[l],e.from=u.from,e.to=u.to,e[l]=u[l],s[l]=u[t],(e[t]=s).d=ki(s)),e.d=ki(e)}function ki(s){var t=s.r,s=s.l;return(t?s?Math.max(t.d,s.d):t.d:s?s.d:0)+1}function En(e,t){return f(t).forEach(function(s){e[s]?Jt(e[s],t[s]):e[s]=function u(l){var d,p,m={};for(d in l)R(l,d)&&(p=l[d],m[d]=!p||typeof p!="object"||Me.has(p.constructor)?p:u(p));return m}(t[s])}),e}function Or(e,t){return e.all||t.all||Object.keys(e).some(function(s){return t[s]&&Cn(t[s],e[s])})}k(Oe.prototype,((Ke={add:function(e){return Jt(this,e),this},addKey:function(e){return Wt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(s){return Wt(t,s,s)}),this}})[Ne]=function(){return _r(this)},Ke));var pt={},kr={},Pr=!1;function An(e){En(kr,e),Pr||(Pr=!0,setTimeout(function(){Pr=!1,Cr(kr,!(kr={}))},0))}function Cr(e,t){t===void 0&&(t=!1);var s=new Set;if(e.all)for(var u=0,l=Object.values(pt);u<l.length;u++)Pi(p=l[u],e,s,t);else for(var d in e){var p,m=/^idb\:\/\/(.*)\/(.*)\//.exec(d);m&&(d=m[1],m=m[2],(p=pt["idb://".concat(d,"/").concat(m)])&&Pi(p,e,s,t))}s.forEach(function(x){return x()})}function Pi(e,t,s,u){for(var l=[],d=0,p=Object.entries(e.queries.query);d<p.length;d++){for(var m=p[d],x=m[0],b=[],P=0,y=m[1];P<y.length;P++){var C=y[P];Or(t,C.obsSet)?C.subscribers.forEach(function(_){return s.add(_)}):u&&b.push(C)}u&&l.push([x,b])}if(u)for(var w=0,O=l;w<O.length;w++){var E=O[w],x=E[0],b=E[1];e.queries.query[x]=b}}function Zo(e){var t=e._state,s=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?me(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var u=t.openCanceller,l=Math.round(10*e.verno),d=!1;function p(){if(t.openCanceller!==u)throw new W.DatabaseClosed("db.open() was cancelled")}function m(){return new q(function(C,w){if(p(),!s)throw new W.MissingAPI;var O=e.name,E=t.autoSchema||!l?s.open(O):s.open(O,l);if(!E)throw new W.MissingAPI;E.onerror=Ue(w),E.onblocked=pe(e._fireOnBlocked),E.onupgradeneeded=pe(function(_){var A;P=E.transaction,t.autoSchema&&!e._options.allowEmptyDB?(E.onerror=Ut,P.abort(),E.result.close(),(A=s.deleteDatabase(O)).onsuccess=A.onerror=pe(function(){w(new W.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(P.onerror=Ue(w),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,y=_<1,e.idbdb=E.result,d&&Qo(e,P),Go(e,_/10,P,w))},w),E.onsuccess=pe(function(){P=null;var _,A,L,j,N,K=e.idbdb=E.result,F=H(K.objectStoreNames);if(0<F.length)try{var T=K.transaction((j=F).length===1?j[0]:j,"readonly");if(t.autoSchema)A=K,L=T,(_=e).verno=A.version/10,L=_._dbSchema=On(0,A,L),_._storeNames=H(A.objectStoreNames,0),Sn(_,[_._allTables],f(L),L);else if(kn(e,e._dbSchema,T),((N=yr(On(0,(N=e).idbdb,T),N._dbSchema)).add.length||N.change.some(function($){return $.add.length||$.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),l=K.version+1,d=!0,C(m());xn(e,T)}catch{}kt.push(e),K.onversionchange=pe(function($){t.vcFired=!0,e.on("versionchange").fire($)}),K.onclose=pe(function($){e.on("close").fire($)}),y&&(N=e._deps,T=O,K=N.indexedDB,N=N.IDBKeyRange,wr(K)||T===mn||br(K,N).put({name:T}).catch(le)),C()},w)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<l)return l=0,m()}return q.reject(C)})}var x,b=t.dbReadyResolve,P=null,y=!1;return q.race([u,(typeof navigator>"u"?q.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function w(){return indexedDB.databases().finally(C)}x=setInterval(w,100),w()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(m)]).then(function(){return p(),t.onReadyBeingFired=[],q.resolve(xr(function(){return e.on.ready.fire(e.vip)})).then(function C(){if(0<t.onReadyBeingFired.length){var w=t.onReadyBeingFired.reduce(Xn,le);return t.onReadyBeingFired=[],q.resolve(xr(function(){return w(e.vip)})).then(C)}})}).finally(function(){t.openCanceller===u&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(C){t.dbOpenError=C;try{P&&P.abort()}catch{}return u===t.openCanceller&&e._close(),me(C)}).finally(function(){t.openComplete=!0,b()}).then(function(){var C;return y&&(C={},e.tables.forEach(function(w){w.schema.indexes.forEach(function(O){O.name&&(C["idb://".concat(e.name,"/").concat(w.name,"/").concat(O.name)]=new Oe(-1/0,[[[]]]))}),C["idb://".concat(e.name,"/").concat(w.name,"/")]=C["idb://".concat(e.name,"/").concat(w.name,"/:dels")]=new Oe(-1/0,[[[]]])}),it(Vt).fire(C),Cr(C,!0)),e})}function Er(e){function t(d){return e.next(d)}var s=l(t),u=l(function(d){return e.throw(d)});function l(d){return function(x){var m=d(x),x=m.value;return m.done?x:x&&typeof x.then=="function"?x.then(s,u):h(x)?Promise.all(x).then(s,u):s(x)}}return l(t)()}function Rn(e,t,s){for(var u=h(e)?e.slice():[e],l=0;l<s;++l)u.push(t);return u}var es={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return o(o({},e),{table:function(t){var s=e.table(t),u=s.schema,l={},d=[];function p(y,C,w){var O=zt(y),E=l[O]=l[O]||[],_=y==null?0:typeof y=="string"?1:y.length,A=0<C,A=o(o({},w),{name:A?"".concat(O,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:A,keyTail:C,keyLength:_,extractKey:gr(y),unique:!A&&w.unique});return E.push(A),A.isPrimaryKey||d.push(A),1<_&&p(_===2?y[0]:y.slice(0,_-1),C+1,w),E.sort(function(L,j){return L.keyTail-j.keyTail}),A}t=p(u.primaryKey.keyPath,0,u.primaryKey),l[":id"]=[t];for(var m=0,x=u.indexes;m<x.length;m++){var b=x[m];p(b.keyPath,0,b)}function P(y){var C,w=y.query.index;return w.isVirtual?o(o({},y),{query:{index:w.lowLevelIndex,range:(C=y.query.range,w=w.keyTail,{type:C.type===1?2:C.type,lower:Rn(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,w),lowerOpen:!0,upper:Rn(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,w),upperOpen:!0})}}):y}return o(o({},s),{schema:o(o({},u),{primaryKey:t,indexes:d,getIndexByKeyPath:function(y){return(y=l[zt(y)])&&y[0]}}),count:function(y){return s.count(P(y))},query:function(y){return s.query(P(y))},openCursor:function(y){var C=y.query.index,w=C.keyTail,O=C.isVirtual,E=C.keyLength;return O?s.openCursor(P(y)).then(function(A){return A&&_(A)}):s.openCursor(y);function _(A){return Object.create(A,{continue:{value:function(L){L!=null?A.continue(Rn(L,y.reverse?e.MAX_KEY:e.MIN_KEY,w)):y.unique?A.continue(A.key.slice(0,E).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,w)):A.continue()}},continuePrimaryKey:{value:function(L,j){A.continuePrimaryKey(Rn(L,e.MAX_KEY,w),j)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var L=A.key;return E===1?L[0]:L.slice(0,E)}},value:{get:function(){return A.value}}})}}})}})}};function Ar(e,t,s,u){return s=s||{},u=u||"",f(e).forEach(function(l){var d,p,m;R(t,l)?(d=e[l],p=t[l],typeof d=="object"&&typeof p=="object"&&d&&p?(m=Re(d))!==Re(p)?s[u+l]=t[l]:m==="Object"?Ar(d,p,s,u+l+"."):d!==p&&(s[u+l]=t[l]):d!==p&&(s[u+l]=t[l])):s[u+l]=void 0}),f(t).forEach(function(l){R(e,l)||(s[u+l]=t[l])}),s}function Rr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ts={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return o(o({},e),{table:function(t){var s=e.table(t),u=s.schema.primaryKey;return o(o({},s),{mutate:function(l){var d=z.trans,p=d.table(t).hook,m=p.deleting,x=p.creating,b=p.updating;switch(l.type){case"add":if(x.fire===le)break;return d._promise("readwrite",function(){return P(l)},!0);case"put":if(x.fire===le&&b.fire===le)break;return d._promise("readwrite",function(){return P(l)},!0);case"delete":if(m.fire===le)break;return d._promise("readwrite",function(){return P(l)},!0);case"deleteRange":if(m.fire===le)break;return d._promise("readwrite",function(){return function y(C,w,O){return s.query({trans:C,values:!1,query:{index:u,range:w},limit:O}).then(function(E){var _=E.result;return P({type:"delete",keys:_,trans:C}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):_.length<O?{failures:[],numFailures:0,lastResult:void 0}:y(C,o(o({},w),{lower:_[_.length-1],lowerOpen:!0}),O)})})}(l.trans,l.range,1e4)},!0)}return s.mutate(l);function P(y){var C,w,O,E=z.trans,_=y.keys||Rr(u,y);if(!_)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?o(o({},y),{keys:_}):o({},y)).type!=="delete"&&(y.values=a([],y.values)),y.keys&&(y.keys=a([],y.keys)),C=s,O=_,((w=y).type==="add"?Promise.resolve([]):C.getMany({trans:w.trans,keys:O,cache:"immutable"})).then(function(A){var L=_.map(function(j,N){var K,F,T,$=A[N],B={onerror:null,onsuccess:null};return y.type==="delete"?m.fire.call(B,j,$,E):y.type==="add"||$===void 0?(K=x.fire.call(B,j,y.values[N],E),j==null&&K!=null&&(y.keys[N]=j=K,u.outbound||ne(y.values[N],u.keyPath,j))):(K=Ar($,y.values[N]),(F=b.fire.call(B,K,j,$,E))&&(T=y.values[N],Object.keys(F).forEach(function(D){R(T,D)?T[D]=F[D]:ne(T,D,F[D])}))),B});return s.mutate(y).then(function(j){for(var N=j.failures,K=j.results,F=j.numFailures,j=j.lastResult,T=0;T<_.length;++T){var $=(K||_)[T],B=L[T];$==null?B.onerror&&B.onerror(N[T]):B.onsuccess&&B.onsuccess(y.type==="put"&&A[T]?y.values[T]:$)}return{failures:N,results:K,numFailures:F,lastResult:j}}).catch(function(j){return L.forEach(function(N){return N.onerror&&N.onerror(j)}),Promise.reject(j)})})}}})}})}};function Ci(e,t,s){try{if(!t||t.keys.length<e.length)return null;for(var u=[],l=0,d=0;l<t.keys.length&&d<e.length;++l)ae(t.keys[l],e[d])===0&&(u.push(s?re(t.values[l]):t.values[l]),++d);return u.length===e.length?u:null}catch{return null}}var ns={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var s=e.table(t);return o(o({},s),{getMany:function(u){if(!u.cache)return s.getMany(u);var l=Ci(u.keys,u.trans._cache,u.cache==="clone");return l?q.resolve(l):s.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?re(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),s.mutate(u)}})}}}};function Ei(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ai(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rs={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,s=new Oe(e.MIN_KEY,e.MAX_KEY);return o(o({},e),{transaction:function(u,l,d){if(z.subscr&&l!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(z.querier));return e.transaction(u,l,d)},table:function(u){var l=e.table(u),d=l.schema,p=d.primaryKey,y=d.indexes,m=p.extractKey,x=p.outbound,b=p.autoIncrement&&y.filter(function(w){return w.compound&&w.keyPath.includes(p.keyPath)}),P=o(o({},l),{mutate:function(w){function O(D){return D="idb://".concat(t,"/").concat(u,"/").concat(D),j[D]||(j[D]=new Oe)}var E,_,A,L=w.trans,j=w.mutatedParts||(w.mutatedParts={}),N=O(""),K=O(":dels"),F=w.type,B=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Rr(p,w).filter(function(D){return D}),w.values]:[],T=B[0],$=B[1],B=w.trans._cache;return h(T)?(N.addKeys(T),(B=F==="delete"||T.length===$.length?Ci(T,B):null)||K.addKeys(T),(B||$)&&(E=O,_=B,A=$,d.indexes.forEach(function(D){var G=E(D.name||"");function Q(X){return X!=null?D.extractKey(X):null}function ee(X){return D.multiEntry&&h(X)?X.forEach(function(Fe){return G.addKey(Fe)}):G.addKey(X)}(_||A).forEach(function(X,ke){var Z=_&&Q(_[ke]),ke=A&&Q(A[ke]);ae(Z,ke)!==0&&(Z!=null&&ee(Z),ke!=null&&ee(ke))})}))):T?($={from:T.lower,to:T.upper},K.add($),N.add($)):(N.add(s),K.add(s),d.indexes.forEach(function(D){return O(D.name).add(s)})),l.mutate(w).then(function(D){return!T||w.type!=="add"&&w.type!=="put"||(N.addKeys(D.results),b&&b.forEach(function(G){var Q=w.values.map(function(X){return G.extractKey(X)}),ee=G.keyPath.findIndex(function(X){return X===p.keyPath});D.results.forEach(function(X){return Q[ee]=X}),O(G.name).addKeys(Q)})),L.mutatedParts=En(L.mutatedParts||{},j),D})}}),y=function(O){var E=O.query,O=E.index,E=E.range;return[O,new Oe((O=E.lower)!==null&&O!==void 0?O:e.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},C={get:function(w){return[p,new Oe(w.key)]},getMany:function(w){return[p,new Oe().addKeys(w.keys)]},count:y,query:y,openCursor:y};return f(C).forEach(function(w){P[w]=function(O){var E=z.subscr,_=!!E,A=Ei(z,l)&&Ai(w,O)?O.obsSet={}:E;if(_){var L=function($){return $="idb://".concat(t,"/").concat(u,"/").concat($),A[$]||(A[$]=new Oe)},j=L(""),N=L(":dels"),E=C[w](O),_=E[0],E=E[1];if((w==="query"&&_.isPrimaryKey&&!O.values?N:L(_.name||"")).add(E),!_.isPrimaryKey){if(w!=="count"){var K=w==="query"&&x&&O.values&&l.query(o(o({},O),{values:!1}));return l[w].apply(this,arguments).then(function($){if(w==="query"){if(x&&O.values)return K.then(function(Q){return Q=Q.result,j.addKeys(Q),$});var B=O.values?$.result.map(m):$.result;(O.values?j:N).addKeys(B)}else if(w==="openCursor"){var D=$,G=O.values;return D&&Object.create(D,{key:{get:function(){return N.addKey(D.primaryKey),D.key}},primaryKey:{get:function(){var Q=D.primaryKey;return N.addKey(Q),Q}},value:{get:function(){return G&&j.addKey(D.primaryKey),D.value}}})}return $})}N.add(s)}}return l[w].apply(this,arguments)}}),P}})}};function Ri(e,t,s){if(s.numFailures===0)return t;if(t.type==="deleteRange")return null;var u=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return s.numFailures===u?null:(t=o({},t),h(t.keys)&&(t.keys=t.keys.filter(function(l,d){return!(d in s.failures)})),"values"in t&&h(t.values)&&(t.values=t.values.filter(function(l,d){return!(d in s.failures)})),t)}function Lr(e,t){return s=e,((u=t).lower===void 0||(u.lowerOpen?0<ae(s,u.lower):0<=ae(s,u.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?ae(e,t.upper)<0:ae(e,t.upper)<=0));var s,u}function Li(e,t,C,u,l,d){if(!C||C.length===0)return e;var p=t.query.index,m=p.multiEntry,x=t.query.range,b=u.schema.primaryKey.extractKey,P=p.extractKey,y=(p.lowLevelIndex||p).extractKey,C=C.reduce(function(w,O){var E=w,_=O.type==="add"||O.type==="put"?O.values.filter(function(N){return N=P(N),m&&h(N)?N.some(function(K){return Lr(K,x)}):Lr(N,x)}).map(function(N){return N=re(N),d&&Object.freeze(N),N}):[];switch(O.type){case"add":E=w.concat(t.values?_:_.map(function(K){return b(K)}));break;case"put":var A=new Oe().addKeys(O.values.map(function(K){return b(K)})),E=w.filter(function(K){return K=t.values?b(K):K,!Cn(new Oe(K),A)}).concat(t.values?_:_.map(function(K){return b(K)}));break;case"delete":var L=new Oe().addKeys(O.keys);E=w.filter(function(K){return K=t.values?b(K):K,!Cn(new Oe(K),L)});break;case"deleteRange":var j=O.range;E=w.filter(function(K){return!Lr(b(K),j)})}return E},e);return C===e?e:(C.sort(function(w,O){return ae(y(w),y(O))||ae(b(w),b(O))}),t.limit&&t.limit<1/0&&(C.length>t.limit?C.length=t.limit:e.length===t.limit&&C.length<t.limit&&(l.dirty=!0)),d?Object.freeze(C):C)}function ji(e,t){return ae(e.lower,t.lower)===0&&ae(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function is(e,t){return function(s,u,l,d){if(s===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=ae(s,u))===0){if(l&&d)return 0;if(l)return 1;if(d)return-1}return u}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(s,u,l,d){if(s===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=ae(s,u))===0){if(l&&d)return 0;if(l)return-1;if(d)return 1}return u}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function os(e,t,s,u){e.subscribers.add(s),u.addEventListener("abort",function(){var l,d;e.subscribers.delete(s),e.subscribers.size===0&&(l=e,d=t,setTimeout(function(){l.subscribers.size===0&&fe(d,l)},3e3))})}var ss={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return o(o({},e),{transaction:function(s,u,l){var d,p,m=e.transaction(s,u,l);return u==="readwrite"&&(p=(d=new AbortController).signal,l=function(x){return function(){if(d.abort(),u==="readwrite"){for(var b=new Set,P=0,y=s;P<y.length;P++){var C=y[P],w=pt["idb://".concat(t,"/").concat(C)];if(w){var O=e.table(C),E=w.optimisticOps.filter(function(G){return G.trans===m});if(m._explicit&&x&&m.mutatedParts)for(var _=0,A=Object.values(w.queries.query);_<A.length;_++)for(var L=0,j=(F=A[_]).slice();L<j.length;L++)Or((T=j[L]).obsSet,m.mutatedParts)&&(fe(F,T),T.subscribers.forEach(function(G){return b.add(G)}));else if(0<E.length){w.optimisticOps=w.optimisticOps.filter(function(G){return G.trans!==m});for(var N=0,K=Object.values(w.queries.query);N<K.length;N++)for(var F,T,$,B=0,D=(F=K[N]).slice();B<D.length;B++)(T=D[B]).res!=null&&m.mutatedParts&&(x&&!T.dirty?($=Object.isFrozen(T.res),$=Li(T.res,T.req,E,O,T,$),T.dirty?(fe(F,T),T.subscribers.forEach(function(G){return b.add(G)})):$!==T.res&&(T.res=$,T.promise=q.resolve({result:$}))):(T.dirty&&fe(F,T),T.subscribers.forEach(function(G){return b.add(G)})))}}}b.forEach(function(G){return G()})}}},m.addEventListener("abort",l(!1),{signal:p}),m.addEventListener("error",l(!1),{signal:p}),m.addEventListener("complete",l(!0),{signal:p})),m},table:function(s){var u=e.table(s),l=u.schema.primaryKey;return o(o({},u),{mutate:function(d){var p=z.trans;if(l.outbound||p.db._options.cache==="disabled"||p.explicit)return u.mutate(d);var m=pt["idb://".concat(t,"/").concat(s)];return m?(p=u.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||Rr(l,d).some(function(x){return x==null}))?(m.optimisticOps.push(d),d.mutatedParts&&An(d.mutatedParts),p.then(function(x){0<x.numFailures&&(fe(m.optimisticOps,d),(x=Ri(0,d,x))&&m.optimisticOps.push(x),d.mutatedParts&&An(d.mutatedParts))}),p.catch(function(){fe(m.optimisticOps,d),d.mutatedParts&&An(d.mutatedParts)})):p.then(function(x){var b=Ri(0,o(o({},d),{values:d.values.map(function(w,y){var C,w=(C=l.keyPath)!==null&&C!==void 0&&C.includes(".")?re(w):o({},w);return ne(w,l.keyPath,x.results[y]),w})}),x);m.optimisticOps.push(b),queueMicrotask(function(){return d.mutatedParts&&An(d.mutatedParts)})}),p):u.mutate(d)},query:function(d){if(!Ei(z,u)||!Ai("query",d))return u.query(d);var p=((b=z.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",y=z,m=y.requery,x=y.signal,b=function(O,E,_,A){var L=pt["idb://".concat(O,"/").concat(E)];if(!L)return[];if(!(E=L.queries[_]))return[null,!1,L,null];var j=E[(A.query?A.query.index.name:null)||""];if(!j)return[null,!1,L,null];switch(_){case"query":var N=j.find(function(K){return K.req.limit===A.limit&&K.req.values===A.values&&ji(K.req.query.range,A.query.range)});return N?[N,!0,L,j]:[j.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=A.limit&&(!A.values||K.req.values)&&is(K.req.query.range,A.query.range)}),!1,L,j];case"count":return N=j.find(function(K){return ji(K.req.query.range,A.query.range)}),[N,!!N,L,j]}}(t,s,"query",d),P=b[0],y=b[1],C=b[2],w=b[3];return P&&y?P.obsSet=d.obsSet:(y=u.query(d).then(function(O){var E=O.result;if(P&&(P.res=E),p){for(var _=0,A=E.length;_<A;++_)Object.freeze(E[_]);Object.freeze(E)}else O.result=re(E);return O}).catch(function(O){return w&&P&&fe(w,P),Promise.reject(O)}),P={obsSet:d.obsSet,promise:y,subscribers:new Set,type:"query",req:d,dirty:!1},w?w.push(P):(w=[P],(C=C||(pt["idb://".concat(t,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=w)),os(P,w,m,x),P.promise.then(function(O){return{result:Li(O.result,d,C==null?void 0:C.optimisticOps,u,P,p)}})}})}})}};function Ln(e,t){return new Proxy(e,{get:function(s,u,l){return u==="db"?t:Reflect.get(s,u,l)}})}var Ye=(ye.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,s=t.filter(function(u){return u._cfg.version===e})[0];return s||(s=new this.Version(e),t.push(s),t.sort(Yo),s.stores({}),this._state.autoSchema=!1,s)},ye.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||z.letThrough||this._vip)?e():new q(function(s,u){if(t._state.openComplete)return u(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void u(new W.DatabaseClosed);t.open().catch(le)}t._state.dbReadyPromise.then(s,u)}).then(e)},ye.prototype.use=function(e){var t=e.stack,s=e.create,u=e.level,l=e.name;return l&&this.unuse({stack:t,name:l}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:s,level:u??10,name:l}),e.sort(function(d,p){return d.level-p.level}),this},ye.prototype.unuse=function(e){var t=e.stack,s=e.name,u=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(l){return u?l.create!==u:!!s&&l.name!==s})),this},ye.prototype.open=function(){var e=this;return ft(Ze,function(){return Zo(e)})},ye.prototype._close=function(){var e=this._state,t=kt.indexOf(this);if(0<=t&&kt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new q(function(s){e.dbReadyResolve=s}),e.openCanceller=new q(function(s,u){e.cancelOpen=u}))},ye.prototype.close=function(s){var t=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;t?(s.isBeingOpened&&s.cancelOpen(new W.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new W.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},ye.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new q(function(l,d){function p(){t.close(e);var m=t._deps.indexedDB.deleteDatabase(t.name);m.onsuccess=pe(function(){var x,b,P;x=t._deps,b=t.name,P=x.indexedDB,x=x.IDBKeyRange,wr(P)||b===mn||br(P,x).delete(b).catch(le),l()}),m.onerror=Ue(d),m.onblocked=t._fireOnBlocked}if(s)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(p):p()})},ye.prototype.backendDB=function(){return this.idbdb},ye.prototype.isOpen=function(){return this.idbdb!==null},ye.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ye.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ye.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ye.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ye.prototype.transaction=function(){var e=(function(t,s,u){var l=arguments.length;if(l<2)throw new W.InvalidArgument("Too few arguments");for(var d=new Array(l-1);--l;)d[l-1]=arguments[l];return u=d.pop(),[t,at(d),u]}).apply(this,arguments);return this._transaction.apply(this,e)},ye.prototype._transaction=function(e,t,s){var u=this,l=z.trans;l&&l.db===this&&e.indexOf("!")===-1||(l=null);var d,p,m=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(p=t.map(function(b){if(b=b instanceof u.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===ar)d=ar;else{if(e!="rw"&&e!=ur)throw new W.InvalidArgument("Invalid transaction mode: "+e);d=ur}if(l){if(l.mode===ar&&d===ur){if(!m)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l=null}l&&p.forEach(function(b){if(l&&l.storeNames.indexOf(b)===-1){if(!m)throw new W.SubTransaction("Table "+b+" not included in parent transaction.");l=null}}),m&&l&&!l.active&&(l=null)}}catch(b){return l?l._promise(null,function(P,y){y(b)}):me(b)}var x=(function b(P,y,C,w,O){return q.resolve().then(function(){var E=z.transless||z,_=P._createTransaction(y,C,P._dbSchema,w);if(_.explicit=!0,E={trans:_,transless:E},w)_.idbtrans=w.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,P._state.PR1398_maxLoop=3}catch(j){return j.name===Qn.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return b(P,y,C,null,O)})):me(j)}var A,L=Xe(O);return L&&Ot(),E=q.follow(function(){var j;(A=O.call(_,_))&&(L?(j=tt.bind(null,null),A.then(j,j)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=Er(A)))},E),(A&&typeof A.then=="function"?q.resolve(A).then(function(j){return _.active?j:me(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return A})).then(function(j){return w&&_._resolve(),_._completion.then(function(){return j})}).catch(function(j){return _._reject(j),me(j)})})}).bind(null,this,d,p,l,s);return l?l._promise(d,x,"lock"):z.trans?ft(z.transless,function(){return u._whenReady(x)}):this._whenReady(x)},ye.prototype.table=function(e){if(!R(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ye);function ye(e,t){var s=this;this._middlewares={},this.verno=0;var u=ye.dependencies;this._options=t=o({addons:ye.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},u=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l,d,p,m,x,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:le,dbReadyPromise:null,cancelOpen:le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new q(function(y){b.dbReadyResolve=y}),b.openCanceller=new q(function(y,C){b.cancelOpen=C}),this._state=b,this.name=e,this.on=Bt(this,"populate","blocked","versionchange","close",{ready:[Xn,le]}),this.on.ready.subscribe=ce(this.on.ready.subscribe,function(y){return function(C,w){ye.vip(function(){var O,E=s._state;E.openComplete?(E.dbOpenError||q.resolve().then(C),w&&y(C)):E.onReadyBeingFired?(E.onReadyBeingFired.push(C),w&&y(C)):(y(C),O=s,w||y(function _(){O.on.ready.unsubscribe(C),O.on.ready.unsubscribe(_)}))})}}),this.Collection=(l=this,Mt(qo.prototype,function(A,_){this.db=l;var w=ci,O=null;if(_)try{w=_()}catch(L){O=L}var E=A._ctx,_=E.table,A=_.hook.reading.fire;this._ctx={table:_,index:E.index,isPrimKey:!E.index||_.schema.primKey.keyPath&&E.index===_.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:E.or,valueMapper:A!==Kt?A:null}})),this.Table=(d=this,Mt(pi.prototype,function(y,C,w){this.db=d,this._tx=w,this.name=y,this.schema=C,this.hook=d._allTables[y]?d._allTables[y].hook:Bt(null,{creating:[No,le],reading:[jo,Kt],updating:[To,le],deleting:[Ko,le]})})),this.Transaction=(p=this,Mt(Ho.prototype,function(y,C,w,O,E){var _=this;this.db=p,this.mode=y,this.storeNames=C,this.schema=w,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(A,L){_._resolve=A,_._reject=L}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(A){var L=_.active;return _.active=!1,_.on.error.fire(A),_.parent?_.parent._reject(A):L&&_.idbtrans&&_.idbtrans.abort(),me(A)})})),this.Version=(m=this,Mt(Xo.prototype,function(y){this.db=m,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Mt(bi.prototype,function(y,C,w){if(this.db=x,this._ctx={table:y,index:C===":id"?null:C,or:w},this._cmp=this._ascending=ae,this._descending=function(O,E){return ae(E,O)},this._max=function(O,E){return 0<ae(O,E)?O:E},this._min=function(O,E){return ae(O,E)<0?O:E},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Ht(t.IDBKeyRange),this._createTransaction=function(y,C,w,O){return new s.Transaction(y,C,w,s._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(y){s.on("blocked").fire(y),kt.filter(function(C){return C.name===s.name&&C!==s&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(y)})},this.use(ns),this.use(ss),this.use(rs),this.use(es),this.use(ts);var P=new Proxy(this,{get:function(y,C,w){if(C==="_vip")return!0;if(C==="table")return function(E){return Ln(s.table(E),P)};var O=Reflect.get(y,C,w);return O instanceof pi?Ln(O,P):C==="tables"?O.map(function(E){return Ln(E,P)}):C==="_createTransaction"?function(){return Ln(O.apply(this,arguments),P)}:O}});this.vip=P,u.forEach(function(y){return y(s)})}var jn,Ke=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",as=(jr.prototype.subscribe=function(e,t,s){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:s})},jr.prototype[Ke]=function(){return this},jr);function jr(e){this._subscribe=e}try{jn={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{jn={indexedDB:null,IDBKeyRange:null}}function Ni(e){var t,s=!1,u=new as(function(l){var d=Xe(e),p,m=!1,x={},b={},P={get closed(){return m},unsubscribe:function(){m||(m=!0,p&&p.abort(),y&&it.storagemutated.unsubscribe(w))}};l.start&&l.start(P);var y=!1,C=function(){return sr(O)},w=function(E){En(x,E),Or(b,x)&&C()},O=function(){var E,_,A;!m&&jn.indexedDB&&(x={},E={},p&&p.abort(),p=new AbortController,A=function(L){var j=St();try{d&&Ot();var N=et(e,L);return N=d?N.finally(tt):N}finally{j&&_t()}}(_={subscr:E,signal:p.signal,requery:C,querier:e,trans:null}),Promise.resolve(A).then(function(L){s=!0,t=L,m||_.signal.aborted||(x={},function(j){for(var N in j)if(R(j,N))return;return 1}(b=E)||y||(it(Vt,w),y=!0),sr(function(){return!m&&l.next&&l.next(L)}))},function(L){s=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||m||sr(function(){m||l.error&&l.error(L)})}))};return setTimeout(C,0),P});return u.hasValue=function(){return s},u.getValue=function(){return t},u}var gt=Ye;function Nr(e){var t=ot;try{ot=!0,it.storagemutated.fire(e),Cr(e,!0)}finally{ot=t}}k(gt,o(o({},an),{delete:function(e){return new gt(e,{addons:[]}).delete()},exists:function(e){return new gt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=gt.dependencies,s=t.indexedDB,t=t.IDBKeyRange,(wr(s)?Promise.resolve(s.databases()).then(function(u){return u.map(function(l){return l.name}).filter(function(l){return l!==mn})}):br(s,t).toCollection().primaryKeys()).then(e)}catch{return me(new W.MissingAPI)}var t,s},defineClass:function(){return function(e){g(this,e)}},ignoreTransaction:function(e){return z.trans?ft(z.transless,e):e()},vip:xr,async:function(e){return function(){try{var t=Er(e.apply(this,arguments));return t&&typeof t.then=="function"?t:q.resolve(t)}catch(s){return me(s)}}},spawn:function(e,t,s){try{var u=Er(e.apply(s,t||[]));return u&&typeof u.then=="function"?u:q.resolve(u)}catch(l){return me(l)}},currentTransaction:{get:function(){return z.trans||null}},waitFor:function(e,t){return t=q.resolve(typeof e=="function"?gt.ignoreTransaction(e):e).timeout(t||6e4),z.trans?z.trans.waitFor(t):t},Promise:q,debug:{get:function(){return qe},set:function(e){ri(e)}},derive:I,extend:g,props:k,override:ce,Events:Bt,on:it,liveQuery:Ni,extendObservabilitySet:En,getByKeyPath:ue,setByKeyPath:ne,delByKeyPath:function(e,t){typeof t=="string"?ne(e,t,void 0):"length"in t&&[].map.call(t,function(s){ne(e,s,void 0)})},shallowClone:ze,deepClone:re,getObjectDiff:Ar,cmp:ae,asap:se,minKey:-1/0,addons:[],connections:kt,errnames:Qn,dependencies:jn,cache:pt,semVer:"4.0.7",version:"4.0.7".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,s){return e+t/Math.pow(10,2*s)})})),gt.maxKey=Ht(gt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(it(Vt,function(e){ot||(e=new CustomEvent(hr,{detail:e}),ot=!0,dispatchEvent(e),ot=!1)}),addEventListener(hr,function(e){e=e.detail,ot||Nr(e)}));var Et,ot=!1,Ki=function(){};return typeof BroadcastChannel<"u"&&((Ki=function(){(Et=new BroadcastChannel(hr)).onmessage=function(e){return e.data&&Nr(e.data)}})(),typeof Et.unref=="function"&&Et.unref(),it(Vt,function(e){ot||Et.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ye.disableBfCache&&e.persisted){qe&&console.debug("Dexie: handling persisted pagehide"),Et!=null&&Et.close();for(var t=0,s=kt;t<s.length;t++)s[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ye.disableBfCache&&e.persisted&&(qe&&console.debug("Dexie: handling persisted pageshow"),Ki(),Nr({all:new Oe(-1/0,[[]])}))})),q.rejectionMapper=function(e,t){return!e||e instanceof wt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ni[e.name]?e:(t=new ni[e.name](t||e.message,e),"stack"in e&&M(t,"stack",{get:function(){return this.inner.stack}}),t)},ri(qe),o(Ye,Object.freeze({__proto__:null,Dexie:Ye,liveQuery:Ni,Entity:fi,cmp:ae,PropModSymbol:Je,PropModification:qt,replacePrefix:function(e,t){return new qt({replacePrefix:[e,t]})},add:function(e){return new qt({add:e})},remove:function(e){return new qt({remove:e})},default:Ye,RangeSet:Oe,mergeRanges:Jt,rangesOverlap:Cn}),{default:Ye}),Ye})})(ko);var Ea=ko.exports;const Hr=Ca(Ea),zi=Symbol.for("Dexie"),zr=globalThis[zi]||(globalThis[zi]=Hr);if(Hr.semVer!==zr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Hr.semVer} and ${zr.semVer}`);const Aa=[{name:"Dominion",selected:!1},{name:"Renaissance",selected:!1},{name:"Empires",selected:!1}],Ra=[{name:"Cellar"},{name:"Chapel"},{name:"Moat"},{name:"Harbinger"},{name:"Merchant"},{name:"Vassal"},{name:"Village"},{name:"Workshop"},{name:"Bureaucrat"},{name:"Gardens"},{name:"Militia"},{name:"Moneylender"},{name:"Poacher"},{name:"Remodel"},{name:"Smithy"},{name:"Throne Room"},{name:"Bandit"},{name:"Council Room"},{name:"Festival"},{name:"Laboratory"},{name:"Library"},{name:"Market"},{name:"Mine"},{name:"Sentry"},{name:"Witch"},{name:"Artisan"}],La=[{name:"Engineer"},{name:"City Quarter"},{name:"Overlord"},{name:"Royal Blacksmith"},{name:"Encampment/Plunder"},{name:"Patrician/Emporium"},{name:"Settlers/Bustling Village"},{name:"Castles"},{name:"Catapult/Rocks"},{name:"Chariot Race"},{name:"Enchantress"},{name:"Farmers' Market"},{name:"Gladiator/Fortune"},{name:"Sacrifice"},{name:"Temple"},{name:"Villa"},{name:"Archive"},{name:"Capital"},{name:"Charm"},{name:"Crown"},{name:"Forum"},{name:"Groundskeeper"},{name:"Legionary"},{name:"Wild Hunt"}],ja=[{name:"Border Guard"},{name:"Ducat"},{name:"Lackeys"},{name:"Acting Troupe"},{name:"Cargo Ship"},{name:"Experiment"},{name:"Improve"},{name:"Flag Bearer"},{name:"Hideout"},{name:"Inventor"},{name:"Mountain Village"},{name:"Patron"},{name:"Priest"},{name:"Research"},{name:"Silk Merchant"},{name:"Old Witch"},{name:"Recruiter"},{name:"Scepter"},{name:"Scholar"},{name:"Sculptor"},{name:"Seer"},{name:"Spices"},{name:"Swashbuckler"},{name:"Treasurer"},{name:"Villain"}],Fr=i=>n=>({...n,expansionName:i}),Na=[...Ra.map(Fr("Dominion")),...ja.map(Fr("Renaissance")),...La.map(Fr("Empires"))],Ka=1,yt=new zr("dominion");yt.version(Ka).stores({expansions:"++id, &name",cards:"++id, &name, expansionId"});async function Ta(){const i=yt.table("expansions"),n=yt.table("cards");for(const r of Aa)await i.get({name:r.name})==null&&await i.add(r);for(const r of Na){if(await n.get({name:r.name})!=null)continue;const a=await i.get({name:r.expansionName});if(a==null)throw new Error(`Card is set with an expansion name that does not exist, please check, card: ${r.name}, expansion: ${r.expansionName}`);const c=a.id;await n.add({name:r.name,expansionId:c})}}const Ia=()=>{},Da={expansions:Ie([])[0],availableCards:Ie([])[0],selectExpansion:Ia},Po=Jn(Da);function $a(i){const[n,r]=Ie([]),[o,a]=Ie(new Map),c=Ta();c.then(async()=>await yt.table("expansions").toArray()).then(r).catch(console.error),c.then(async()=>await yt.table("cards").toArray()).then(g=>{const v=g.reduce((S,R)=>{var k;return S.get(R.expansionId)==null&&S.set(R.expansionId,[]),(k=S.get(R.expansionId))==null||k.push(R),S},new Map);a(v)}).catch(console.error);const f=async(g,v)=>{await yt.table("expansions").where("name").equals(g).modify({selected:v}),r(await yt.table("expansions").toArray())},h=()=>{const g=o();return n().filter(R=>R.selected).map(R=>g.get(R.id)??[]).flat()};return be(Po.Provider,{value:{expansions:n,selectExpansion:(g,v)=>{f(g,v)},availableCards:h},get children(){return i.children}})}function Co(){return nn(Po)}const Fa={"selection-list":"_selection-list_sahnb_1"};var Ba=Be("<h1>"),Ma=Be("<div>"),qa=Be("<label>"),Ua=Be("<input type=checkbox>");function Va(){const{expansions:i,selectExpansion:n}=Co(),{t:r}=ei();return[(()=>{var o=Ba();return Te(o,()=>r("Set selection")),o})(),(()=>{var o=Ma();return Te(o,be(ho,{get each(){return i()},children:a=>{const c=`expansion-${a.name}`;return[(()=>{var f=qa();return jt(f,"for",c),Te(f,()=>a.name),f})(),(()=>{var f=Ua();return f.addEventListener("change",h=>{n(a.name,h.target.checked)}),jt(f,"id",c),je(()=>f.checked=a.selected),f})()]}})),je(()=>Qt(o,Fa["selection-list"])),o})()]}function Ha(i){return[...i].splice(0,10)}const za={buildKingdom:Ha};var Wa=Be("<h1>"),Ja=Be("<ul>"),Ya=Be("<li>");function Ga(){const{t:i}=ei(),{availableCards:n}=Co(),r=()=>{const o=n();return za.buildKingdom(o)};return[(()=>{var o=Wa();return Te(o,()=>i("Kingdom Builder")),o})(),(()=>{var o=Ja();return Te(o,be(ho,{get each(){return r()},children:a=>(()=>{var c=Ya();return Te(c,()=>a.name),c})()})),o})()]}const Qa=[{path:"/",component:Pa,children:[{path:"/",component:Va},{path:"/kingdom",component:Ga}]}];function Xa(){return be($a,{get children(){return be(ma,{get base(){return"/jack-of-all-dominion-2"},children:Qa})}})}const Za={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,n){console&&console[i]&&console[i].apply(console,n)}};class Un{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,r)}init(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||Za,this.options=r,this.debug=r.debug}log(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"log","",!0)}warn(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"warn","",!0)}error(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"error","")}deprecate(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(n,r,o,a){return a&&!this.debug?null:(typeof n[0]=="string"&&(n[0]=`${o}${this.prefix} ${n[0]}`),this.logger[r](n))}create(n){return new Un(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new Un(this.logger,n)}}var He=new Un;class Gn{constructor(){this.observers={}}on(n,r){return n.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const a=this.observers[o].get(r)||0;this.observers[o].set(r,a+1)}),this}off(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n].delete(r)}}emit(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(f=>{let[h,g]=f;for(let v=0;v<g;v++)h(...o)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(f=>{let[h,g]=f;for(let v=0;v<g;v++)h.apply(h,[n,...o])})}}function Yt(){let i,n;const r=new Promise((o,a)=>{i=o,n=a});return r.resolve=i,r.reject=n,r}function Wi(i){return i==null?"":""+i}function eu(i,n,r){i.forEach(o=>{n[o]&&(r[o]=n[o])})}const tu=/###/g;function Xt(i,n,r){function o(h){return h&&h.indexOf("###")>-1?h.replace(tu,"."):h}function a(){return!i||typeof i=="string"}const c=typeof n!="string"?n:n.split(".");let f=0;for(;f<c.length-1;){if(a())return{};const h=o(c[f]);!i[h]&&r&&(i[h]=new r),Object.prototype.hasOwnProperty.call(i,h)?i=i[h]:i={},++f}return a()?{}:{obj:i,k:o(c[f])}}function Ji(i,n,r){const{obj:o,k:a}=Xt(i,n,Object);if(o!==void 0||n.length===1){o[a]=r;return}let c=n[n.length-1],f=n.slice(0,n.length-1),h=Xt(i,f,Object);for(;h.obj===void 0&&f.length;)c=`${f[f.length-1]}.${c}`,f=f.slice(0,f.length-1),h=Xt(i,f,Object),h&&h.obj&&typeof h.obj[`${h.k}.${c}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${c}`]=r}function nu(i,n,r,o){const{obj:a,k:c}=Xt(i,n,Object);a[c]=a[c]||[],a[c].push(r)}function Vn(i,n){const{obj:r,k:o}=Xt(i,n);if(r)return r[o]}function ru(i,n,r){const o=Vn(i,r);return o!==void 0?o:Vn(n,r)}function Eo(i,n,r){for(const o in n)o!=="__proto__"&&o!=="constructor"&&(o in i?typeof i[o]=="string"||i[o]instanceof String||typeof n[o]=="string"||n[o]instanceof String?r&&(i[o]=n[o]):Eo(i[o],n[o],r):i[o]=n[o]);return i}function Rt(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var iu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ou(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,n=>iu[n]):i}class su{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const r=this.regExpMap.get(n);if(r!==void 0)return r;const o=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,o),this.regExpQueue.push(n),o}}const au=[" ",",","?","!",";"],uu=new su(20);function lu(i,n,r){n=n||"",r=r||"";const o=au.filter(f=>n.indexOf(f)<0&&r.indexOf(f)<0);if(o.length===0)return!0;const a=uu.getRegExp(`(${o.map(f=>f==="?"?"\\?":f).join("|")})`);let c=!a.test(i);if(!c){const f=i.indexOf(r);f>0&&!a.test(i.substring(0,f))&&(c=!0)}return c}function Wr(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[n])return i[n];const o=n.split(r);let a=i;for(let c=0;c<o.length;){if(!a||typeof a!="object")return;let f,h="";for(let g=c;g<o.length;++g)if(g!==c&&(h+=r),h+=o[g],f=a[h],f!==void 0){if(["string","number","boolean"].indexOf(typeof f)>-1&&g<o.length-1)continue;c+=g-c+1;break}a=f}return a}function Hn(i){return i&&i.indexOf("_")>0?i.replace("_","-"):i}class Yi extends Gn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const r=this.options.ns.indexOf(n);r>-1&&this.options.ns.splice(r,1)}getResource(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,f=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;n.indexOf(".")>-1?h=n.split("."):(h=[n,r],o&&(Array.isArray(o)?h.push(...o):typeof o=="string"&&c?h.push(...o.split(c)):h.push(o)));const g=Vn(this.data,h);return!g&&!r&&!o&&n.indexOf(".")>-1&&(n=h[0],r=h[1],o=h.slice(2).join(".")),g||!f||typeof o!="string"?g:Wr(this.data&&this.data[n]&&this.data[n][r],o,c)}addResource(n,r,o,a){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const f=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let h=[n,r];o&&(h=h.concat(f?o.split(f):o)),n.indexOf(".")>-1&&(h=n.split("."),a=r,r=h[1]),this.addNamespaces(r),Ji(this.data,h,a),c.silent||this.emit("added",n,r,o,a)}addResources(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const c in o)(typeof o[c]=="string"||Object.prototype.toString.apply(o[c])==="[object Array]")&&this.addResource(n,r,c,o[c],{silent:!0});a.silent||this.emit("added",n,r,o)}addResourceBundle(n,r,o,a,c){let f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},h=[n,r];n.indexOf(".")>-1&&(h=n.split("."),a=o,o=r,r=h[1]),this.addNamespaces(r);let g=Vn(this.data,h)||{};f.skipCopy||(o=JSON.parse(JSON.stringify(o))),a?Eo(g,o,c):g={...g,...o},Ji(this.data,h,g),f.silent||this.emit("added",n,r,o)}removeResourceBundle(n,r){this.hasResourceBundle(n,r)&&delete this.data[n][r],this.removeNamespaces(r),this.emit("removed",n,r)}hasResourceBundle(n,r){return this.getResource(n,r)!==void 0}getResourceBundle(n,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(n,r)}:this.getResource(n,r)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const r=this.getDataByLanguage(n);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var Ao={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,n,r,o,a){return i.forEach(c=>{this.processors[c]&&(n=this.processors[c].process(n,r,o,a))}),n}};const Gi={};class zn extends Gn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),eu(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=He.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const o=this.resolve(n,r);return o&&o.res!==void 0}extractFromKey(n,r){let o=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let c=r.ns||this.options.defaultNS||[];const f=o&&n.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!lu(n,o,a);if(f&&!h){const g=n.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:n,namespaces:c};const v=n.split(o);(o!==a||o===a&&this.options.ns.indexOf(v[0])>-1)&&(c=v.shift()),n=v.join(a)}return typeof c=="string"&&(c=[c]),{key:n,namespaces:c}}translate(n,r,o){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,c=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:f,namespaces:h}=this.extractFromKey(n[n.length-1],r),g=h[h.length-1],v=r.lng||this.language,S=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v&&v.toLowerCase()==="cimode"){if(S){const J=r.nsSeparator||this.options.nsSeparator;return a?{res:`${g}${J}${f}`,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(r)}:`${g}${J}${f}`}return a?{res:f,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(r)}:f}const R=this.resolve(n,r);let k=R&&R.res;const U=R&&R.usedKey||f,M=R&&R.exactUsedKey||f,I=Object.prototype.toString.apply(k),V=["[object Number]","[object Function]","[object RegExp]"],Y=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,H=!this.i18nFormat||this.i18nFormat.handleAsObject;if(H&&k&&(typeof k!="string"&&typeof k!="boolean"&&typeof k!="number")&&V.indexOf(I)<0&&!(typeof Y=="string"&&I==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const J=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,k,{...r,ns:h}):`key '${f} (${this.language})' returned an object instead of string.`;return a?(R.res=J,R.usedParams=this.getUsedParamsDetails(r),R):J}if(c){const J=I==="[object Array]",se=J?[]:{},ue=J?M:U;for(const ne in k)if(Object.prototype.hasOwnProperty.call(k,ne)){const ze=`${ue}${c}${ne}`;se[ne]=this.translate(ze,{...r,joinArrays:!1,ns:h}),se[ne]===ze&&(se[ne]=k[ne])}k=se}}else if(H&&typeof Y=="string"&&I==="[object Array]")k=k.join(Y),k&&(k=this.extendTranslation(k,n,r,o));else{let J=!1,se=!1;const ue=r.count!==void 0&&typeof r.count!="string",ne=zn.hasDefaultValue(r),ze=ue?this.pluralResolver.getSuffix(v,r.count,r):"",Nt=r.ordinal&&ue?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",at=ue&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),Me=at&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${ze}`]||r[`defaultValue${Nt}`]||r.defaultValue;!this.isValidLookup(k)&&ne&&(J=!0,k=Me),this.isValidLookup(k)||(se=!0,k=f);const re=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:k,we=ne&&Me!==k&&this.options.updateMissing;if(se||J||we){if(this.logger.log(we?"updateKey":"missingKey",v,g,f,we?Me:k),c){const fe=this.resolve(f,{...r,keySeparator:!1});fe&&fe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Re=[];const Ne=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ne&&Ne[0])for(let fe=0;fe<Ne.length;fe++)Re.push(Ne[fe]);else this.options.saveMissingTo==="all"?Re=this.languageUtils.toResolveHierarchy(r.lng||this.language):Re.push(r.lng||this.language);const $e=(fe,ge,xe)=>{const Xe=ne&&xe!==k?xe:re;this.options.missingKeyHandler?this.options.missingKeyHandler(fe,g,ge,Xe,we,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(fe,g,ge,Xe,we,r),this.emit("missingKey",fe,g,ge,k)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ue?Re.forEach(fe=>{const ge=this.pluralResolver.getSuffixes(fe,r);at&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&ge.push(`${this.options.pluralSeparator}zero`),ge.forEach(xe=>{$e([fe],f+xe,r[`defaultValue${xe}`]||Me)})}):$e(Re,f,Me))}k=this.extendTranslation(k,n,r,R,o),se&&k===f&&this.options.appendNamespaceToMissingKey&&(k=`${g}:${f}`),(se||J)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?k=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}:${f}`:f,J?k:void 0):k=this.options.parseMissingKeyHandler(k))}return a?(R.res=k,R.usedParams=this.getUsedParamsDetails(r),R):k}extendTranslation(n,r,o,a,c){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const v=typeof n=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let S;if(v){const k=n.match(this.interpolator.nestingRegexp);S=k&&k.length}let R=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(R={...this.options.interpolation.defaultVariables,...R}),n=this.interpolator.interpolate(n,R,o.lng||this.language,o),v){const k=n.match(this.interpolator.nestingRegexp),U=k&&k.length;S<U&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(o.lng=a.usedLng),o.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var k=arguments.length,U=new Array(k),M=0;M<k;M++)U[M]=arguments[M];return c&&c[0]===U[0]&&!o.context?(f.logger.warn(`It seems you are nesting recursively key: ${U[0]} in key: ${r[0]}`),null):f.translate(...U,r)},o)),o.interpolation&&this.interpolator.reset()}const h=o.postProcess||this.options.postProcess,g=typeof h=="string"?[h]:h;return n!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(n=Ao.handle(g,n,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),n}resolve(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,a,c,f,h;return typeof n=="string"&&(n=[n]),n.forEach(g=>{if(this.isValidLookup(o))return;const v=this.extractFromKey(g,r),S=v.key;a=S;let R=v.namespaces;this.options.fallbackNS&&(R=R.concat(this.options.fallbackNS));const k=r.count!==void 0&&typeof r.count!="string",U=k&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),M=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",I=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);R.forEach(V=>{this.isValidLookup(o)||(h=V,!Gi[`${I[0]}-${V}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(h)&&(Gi[`${I[0]}-${V}`]=!0,this.logger.warn(`key "${a}" for languages "${I.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(Y=>{if(this.isValidLookup(o))return;f=Y;const H=[S];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(H,S,Y,V,r);else{let J;k&&(J=this.pluralResolver.getSuffix(Y,r.count,r));const se=`${this.options.pluralSeparator}zero`,ue=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(k&&(H.push(S+J),r.ordinal&&J.indexOf(ue)===0&&H.push(S+J.replace(ue,this.options.pluralSeparator)),U&&H.push(S+se)),M){const ne=`${S}${this.options.contextSeparator}${r.context}`;H.push(ne),k&&(H.push(ne+J),r.ordinal&&J.indexOf(ue)===0&&H.push(ne+J.replace(ue,this.options.pluralSeparator)),U&&H.push(ne+se))}}let ce;for(;ce=H.pop();)this.isValidLookup(o)||(c=ce,o=this.getResource(Y,V,ce,r))}))})}),{res:o,usedKey:a,exactUsedKey:c,usedLng:f,usedNS:h}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,r,o,a):this.resourceStore.getResource(n,r,o,a)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=n.replace&&typeof n.replace!="string";let a=o?n.replace:n;if(o&&typeof n.count<"u"&&(a.count=n.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!o){a={...a};for(const c of r)delete a[c]}return a}static hasDefaultValue(n){const r="defaultValue";for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&r===o.substring(0,r.length)&&n[o]!==void 0)return!0;return!1}}function Br(i){return i.charAt(0).toUpperCase()+i.slice(1)}class Qi{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=He.create("languageUtils")}getScriptPartFromCode(n){if(n=Hn(n),!n||n.indexOf("-")<0)return null;const r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(n){if(n=Hn(n),!n||n.indexOf("-")<0)return n;const r=n.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(n){if(typeof n=="string"&&n.indexOf("-")>-1){const r=["hans","hant","latn","cyrl","cans","mong","arab"];let o=n.split("-");return this.options.lowerCaseLng?o=o.map(a=>a.toLowerCase()):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),r.indexOf(o[1].toLowerCase())>-1&&(o[1]=Br(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),r.indexOf(o[1].toLowerCase())>-1&&(o[1]=Br(o[1].toLowerCase())),r.indexOf(o[2].toLowerCase())>-1&&(o[2]=Br(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let r;return n.forEach(o=>{if(r)return;const a=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&n.forEach(o=>{if(r)return;const a=this.getLanguagePartFromCode(o);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(c=>{if(c===a)return c;if(!(c.indexOf("-")<0&&a.indexOf("-")<0)&&(c.indexOf("-")>0&&a.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===a||c.indexOf(a)===0&&a.length>1))return c})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];let o=n[r];return o||(o=n[this.getScriptPartFromCode(r)]),o||(o=n[this.formatLanguageCode(r)]),o||(o=n[this.getLanguagePartFromCode(r)]),o||(o=n.default),o||[]}toResolveHierarchy(n,r){const o=this.getFallbackCodes(r||this.options.fallbackLng||[],n),a=[],c=f=>{f&&(this.isSupportedCode(f)?a.push(f):this.logger.warn(`rejecting language code not found in supportedLngs: ${f}`))};return typeof n=="string"&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(n))):typeof n=="string"&&c(this.formatLanguageCode(n)),o.forEach(f=>{a.indexOf(f)<0&&c(this.formatLanguageCode(f))}),a}}let cu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],fu={1:function(i){return+(i>1)},2:function(i){return+(i!=1)},3:function(i){return 0},4:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},5:function(i){return i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5},6:function(i){return i==1?0:i>=2&&i<=4?1:2},7:function(i){return i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},8:function(i){return i==1?0:i==2?1:i!=8&&i!=11?2:3},9:function(i){return+(i>=2)},10:function(i){return i==1?0:i==2?1:i<7?2:i<11?3:4},11:function(i){return i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3},12:function(i){return+(i%10!=1||i%100==11)},13:function(i){return+(i!==0)},14:function(i){return i==1?0:i==2?1:i==3?2:3},15:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2},16:function(i){return i%10==1&&i%100!=11?0:i!==0?1:2},17:function(i){return i==1||i%10==1&&i%100!=11?0:1},18:function(i){return i==0?0:i==1?1:2},19:function(i){return i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3},20:function(i){return i==1?0:i==0||i%100>0&&i%100<20?1:2},21:function(i){return i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0},22:function(i){return i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3}};const hu=["v1","v2","v3"],du=["v4"],Xi={zero:0,one:1,two:2,few:3,many:4,other:5};function pu(){const i={};return cu.forEach(n=>{n.lngs.forEach(r=>{i[r]={numbers:n.nr,plurals:fu[n.fc]}})}),i}class gu{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=r,this.logger=He.create("pluralResolver"),(!this.options.compatibilityJSON||du.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=pu()}addRule(n,r){this.rules[n]=r}getRule(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Hn(n==="dev"?"en":n),{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}needsPlural(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getRule(n,r);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}getPluralFormsOfKey(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,o).map(a=>`${r}${a}`)}getSuffixes(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getRule(n,r);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort((a,c)=>Xi[a]-Xi[c]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):o.numbers.map(a=>this.getSuffix(n,a,r)):[]}getSuffix(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(n,o);return a?this.shouldUseIntlApi()?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:this.getSuffixRetroCompatible(a,r):(this.logger.warn(`no plural rule found for: ${n}`),"")}getSuffixRetroCompatible(n,r){const o=n.noAbs?n.plurals(r):n.plurals(Math.abs(r));let a=n.numbers[o];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const c=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:c():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?c():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}shouldUseIntlApi(){return!hu.includes(this.options.compatibilityJSON)}}function Zi(i,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,c=ru(i,n,r);return!c&&a&&typeof r=="string"&&(c=Wr(i,r,o),c===void 0&&(c=Wr(n,r,o))),c}class mu{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=He.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||(r=>r),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:r,escapeValue:o,useRawValueToEscape:a,prefix:c,prefixEscaped:f,suffix:h,suffixEscaped:g,formatSeparator:v,unescapeSuffix:S,unescapePrefix:R,nestingPrefix:k,nestingPrefixEscaped:U,nestingSuffix:M,nestingSuffixEscaped:I,nestingOptionsSeparator:V,maxReplaces:Y,alwaysFormat:H}=n.interpolation;this.escape=r!==void 0?r:ou,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=c?Rt(c):f||"{{",this.suffix=h?Rt(h):g||"}}",this.formatSeparator=v||",",this.unescapePrefix=S?"":R||"-",this.unescapeSuffix=this.unescapePrefix?"":S||"",this.nestingPrefix=k?Rt(k):U||Rt("$t("),this.nestingSuffix=M?Rt(M):I||Rt(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=Y||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(r,o)=>r&&r.source===o?(r.lastIndex=0,r):new RegExp(o,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,r,o,a){let c,f,h;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function v(M){return M.replace(/\$/g,"$$$$")}const S=M=>{if(M.indexOf(this.formatSeparator)<0){const H=Zi(r,g,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(H,void 0,o,{...a,...r,interpolationkey:M}):H}const I=M.split(this.formatSeparator),V=I.shift().trim(),Y=I.join(this.formatSeparator).trim();return this.format(Zi(r,g,V,this.options.keySeparator,this.options.ignoreJSONStructure),Y,o,{...a,...r,interpolationkey:V})};this.resetRegExp();const R=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,k=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>v(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?v(this.escape(M)):v(M)}].forEach(M=>{for(h=0;c=M.regex.exec(n);){const I=c[1].trim();if(f=S(I),f===void 0)if(typeof R=="function"){const Y=R(n,c,a);f=typeof Y=="string"?Y:""}else if(a&&Object.prototype.hasOwnProperty.call(a,I))f="";else if(k){f=c[0];continue}else this.logger.warn(`missed to pass in variable ${I} for interpolating ${n}`),f="";else typeof f!="string"&&!this.useRawValueToEscape&&(f=Wi(f));const V=M.safeValue(f);if(n=n.replace(c[0],V),k?(M.regex.lastIndex+=f.length,M.regex.lastIndex-=c[0].length):M.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),n}nest(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,c,f;function h(g,v){const S=this.nestingOptionsSeparator;if(g.indexOf(S)<0)return g;const R=g.split(new RegExp(`${S}[ ]*{`));let k=`{${R[1]}`;g=R[0],k=this.interpolate(k,f);const U=k.match(/'/g),M=k.match(/"/g);(U&&U.length%2===0&&!M||M.length%2!==0)&&(k=k.replace(/'/g,'"'));try{f=JSON.parse(k),v&&(f={...v,...f})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,I),`${g}${S}${k}`}return f.defaultValue&&f.defaultValue.indexOf(this.prefix)>-1&&delete f.defaultValue,g}for(;a=this.nestingRegexp.exec(n);){let g=[];f={...o},f=f.replace&&typeof f.replace!="string"?f.replace:f,f.applyPostProcessor=!1,delete f.defaultValue;let v=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const S=a[1].split(this.formatSeparator).map(R=>R.trim());a[1]=S.shift(),g=S,v=!0}if(c=r(h.call(this,a[1].trim(),f),f),c&&a[0]===n&&typeof c!="string")return c;typeof c!="string"&&(c=Wi(c)),c||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${n}`),c=""),v&&(c=g.reduce((S,R)=>this.format(S,R,o.lng,{...o,interpolationkey:a[1].trim()}),c.trim())),n=n.replace(a[0],c),this.regexp.lastIndex=0}return n}}function yu(i){let n=i.toLowerCase().trim();const r={};if(i.indexOf("(")>-1){const o=i.split("(");n=o[0].toLowerCase().trim();const a=o[1].substring(0,o[1].length-1);n==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):n==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(f=>{if(!f)return;const[h,...g]=f.split(":"),v=g.join(":").trim().replace(/^'+|'+$/g,"");r[h.trim()]||(r[h.trim()]=v),v==="false"&&(r[h.trim()]=!1),v==="true"&&(r[h.trim()]=!0),isNaN(v)||(r[h.trim()]=parseInt(v,10))})}return{formatName:n,formatOptions:r}}function Lt(i){const n={};return function(o,a,c){const f=a+JSON.stringify(c);let h=n[f];return h||(h=i(Hn(a),c),n[f]=h),h(o)}}class vu{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=He.create("formatter"),this.options=n,this.formats={number:Lt((r,o)=>{const a=new Intl.NumberFormat(r,{...o});return c=>a.format(c)}),currency:Lt((r,o)=>{const a=new Intl.NumberFormat(r,{...o,style:"currency"});return c=>a.format(c)}),datetime:Lt((r,o)=>{const a=new Intl.DateTimeFormat(r,{...o});return c=>a.format(c)}),relativetime:Lt((r,o)=>{const a=new Intl.RelativeTimeFormat(r,{...o});return c=>a.format(c,o.range||"day")}),list:Lt((r,o)=>{const a=new Intl.ListFormat(r,{...o});return c=>a.format(c)})},this.init(n)}init(n){const o=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}add(n,r){this.formats[n.toLowerCase().trim()]=r}addCached(n,r){this.formats[n.toLowerCase().trim()]=Lt(r)}format(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((h,g)=>{const{formatName:v,formatOptions:S}=yu(g);if(this.formats[v]){let R=h;try{const k=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},U=k.locale||k.lng||a.locale||a.lng||o;R=this.formats[v](h,U,{...S,...a,...k})}catch(k){this.logger.warn(k)}return R}else this.logger.warn(`there was no format function for ${v}`);return h},n)}}function bu(i,n){i.pending[n]!==void 0&&(delete i.pending[n],i.pendingCount--)}class wu extends Gn{constructor(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=r,this.services=o,this.languageUtils=o.languageUtils,this.options=a,this.logger=He.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(o,a.backend,a)}queueLoad(n,r,o,a){const c={},f={},h={},g={};return n.forEach(v=>{let S=!0;r.forEach(R=>{const k=`${v}|${R}`;!o.reload&&this.store.hasResourceBundle(v,R)?this.state[k]=2:this.state[k]<0||(this.state[k]===1?f[k]===void 0&&(f[k]=!0):(this.state[k]=1,S=!1,f[k]===void 0&&(f[k]=!0),c[k]===void 0&&(c[k]=!0),g[R]===void 0&&(g[R]=!0)))}),S||(h[v]=!0)}),(Object.keys(c).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(c),pending:Object.keys(f),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(g)}}loaded(n,r,o){const a=n.split("|"),c=a[0],f=a[1];r&&this.emit("failedLoading",c,f,r),o&&this.store.addResourceBundle(c,f,o,void 0,void 0,{skipCopy:!0}),this.state[n]=r?-1:2;const h={};this.queue.forEach(g=>{nu(g.loaded,[c],f),bu(g,n),r&&g.errors.push(r),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(v=>{h[v]||(h[v]={});const S=g.loaded[v];S.length&&S.forEach(R=>{h[v][R]===void 0&&(h[v][R]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(g=>!g.done)}read(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,f=arguments.length>5?arguments[5]:void 0;if(!n.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:r,fcName:o,tried:a,wait:c,callback:f});return}this.readingCalls++;const h=(v,S)=>{if(this.readingCalls--,this.waitingReads.length>0){const R=this.waitingReads.shift();this.read(R.lng,R.ns,R.fcName,R.tried,R.wait,R.callback)}if(v&&S&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,n,r,o,a+1,c*2,f)},c);return}f(v,S)},g=this.backend[o].bind(this.backend);if(g.length===2){try{const v=g(n,r);v&&typeof v.then=="function"?v.then(S=>h(null,S)).catch(h):h(null,v)}catch(v){h(v)}return}return g(n,r,h)}prepareLoading(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof r=="string"&&(r=[r]);const c=this.queueLoad(n,r,o,a);if(!c.toLoad.length)return c.pending.length||a(),null;c.toLoad.forEach(f=>{this.loadOne(f)})}load(n,r,o){this.prepareLoading(n,r,{},o)}reload(n,r,o){this.prepareLoading(n,r,{reload:!0},o)}loadOne(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const o=n.split("|"),a=o[0],c=o[1];this.read(a,c,"read",void 0,void 0,(f,h)=>{f&&this.logger.warn(`${r}loading namespace ${c} for language ${a} failed`,f),!f&&h&&this.logger.log(`${r}loaded namespace ${c} for language ${a}`,h),this.loaded(n,f,h)})}saveMissing(n,r,o,a,c){let f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${o}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){const g={...f,isUpdate:c},v=this.backend.create.bind(this.backend);if(v.length<6)try{let S;v.length===5?S=v(n,r,o,a,g):S=v(n,r,o,a),S&&typeof S.then=="function"?S.then(R=>h(null,R)).catch(h):h(null,S)}catch(S){h(S)}else v(n,r,o,a,h,g)}!n||!n[0]||this.store.addResource(n[0],r,o,a)}}}function eo(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(n){let r={};if(typeof n[1]=="object"&&(r=n[1]),typeof n[1]=="string"&&(r.defaultValue=n[1]),typeof n[2]=="string"&&(r.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const o=n[3]||n[2];Object.keys(o).forEach(a=>{r[a]=o[a]})}return r},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function to(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function In(){}function xu(i){Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(r=>{typeof i[r]=="function"&&(i[r]=i[r].bind(i))})}class en extends Gn{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=to(n),this.services={},this.logger=He,this.modules={external:[]},xu(this),r&&!this.isInitialized&&!n.isClone){if(!this.options.initImmediate)return this.init(n,r),this;setTimeout(()=>{this.init(n,r)},0)}}init(){var n=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(o=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const a=eo();this.options={...a,...this.options,...to(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function c(S){return S?typeof S=="function"?new S:S:null}if(!this.options.isClone){this.modules.logger?He.init(c(this.modules.logger),this.options):He.init(null,this.options);let S;this.modules.formatter?S=this.modules.formatter:typeof Intl<"u"&&(S=vu);const R=new Qi(this.options);this.store=new Yi(this.options.resources,this.options);const k=this.services;k.logger=He,k.resourceStore=this.store,k.languageUtils=R,k.pluralResolver=new gu(R,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),S&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(k.formatter=c(S),k.formatter.init(k,this.options),this.options.interpolation.format=k.formatter.format.bind(k.formatter)),k.interpolator=new mu(this.options),k.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},k.backendConnector=new wu(c(this.modules.backend),k.resourceStore,k,this.options),k.backendConnector.on("*",function(U){for(var M=arguments.length,I=new Array(M>1?M-1:0),V=1;V<M;V++)I[V-1]=arguments[V];n.emit(U,...I)}),this.modules.languageDetector&&(k.languageDetector=c(this.modules.languageDetector),k.languageDetector.init&&k.languageDetector.init(k,this.options.detection,this.options)),this.modules.i18nFormat&&(k.i18nFormat=c(this.modules.i18nFormat),k.i18nFormat.init&&k.i18nFormat.init(this)),this.translator=new zn(this.services,this.options),this.translator.on("*",function(U){for(var M=arguments.length,I=new Array(M>1?M-1:0),V=1;V<M;V++)I[V-1]=arguments[V];n.emit(U,...I)}),this.modules.external.forEach(U=>{U.init&&U.init(this)})}if(this.format=this.options.interpolation.format,o||(o=In),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const S=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);S.length>0&&S[0]!=="dev"&&(this.options.lng=S[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(S=>{this[S]=function(){return n.store[S](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(S=>{this[S]=function(){return n.store[S](...arguments),n}});const g=Yt(),v=()=>{const S=(R,k)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),g.resolve(k),o(R,k)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return S(null,this.t.bind(this));this.changeLanguage(this.options.lng,S)};return this.options.resources||!this.options.initImmediate?v():setTimeout(v,0),g}loadResources(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In;const a=typeof n=="string"?n:this.language;if(typeof n=="function"&&(o=n),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const c=[],f=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(v=>{v!=="cimode"&&c.indexOf(v)<0&&c.push(v)})};a?f(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>f(g)),this.options.preload&&this.options.preload.forEach(h=>f(h)),this.services.backendConnector.load(c,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(n,r,o){const a=Yt();return n||(n=this.languages),r||(r=this.options.ns),o||(o=In),this.services.backendConnector.reload(n,r,c=>{a.resolve(),o(c)}),a}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&Ao.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(let r=0;r<this.languages.length;r++){const o=this.languages[r];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}changeLanguage(n,r){var o=this;this.isLanguageChangingTo=n;const a=Yt();this.emit("languageChanging",n);const c=g=>{this.language=g,this.languages=this.services.languageUtils.toResolveHierarchy(g),this.resolvedLanguage=void 0,this.setResolvedLanguage(g)},f=(g,v)=>{v?(c(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,a.resolve(function(){return o.t(...arguments)}),r&&r(g,function(){return o.t(...arguments)})},h=g=>{!n&&!g&&this.services.languageDetector&&(g=[]);const v=typeof g=="string"?g:this.services.languageUtils.getBestMatchFromCodes(g);v&&(this.language||c(v),this.translator.language||this.translator.changeLanguage(v),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(v)),this.loadResources(v,S=>{f(S,v)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(n),a}getFixedT(n,r,o){var a=this;const c=function(f,h){let g;if(typeof h!="object"){for(var v=arguments.length,S=new Array(v>2?v-2:0),R=2;R<v;R++)S[R-2]=arguments[R];g=a.options.overloadTranslationOptionHandler([f,h].concat(S))}else g={...h};g.lng=g.lng||c.lng,g.lngs=g.lngs||c.lngs,g.ns=g.ns||c.ns,g.keyPrefix=g.keyPrefix||o||c.keyPrefix;const k=a.options.keySeparator||".";let U;return g.keyPrefix&&Array.isArray(f)?U=f.map(M=>`${g.keyPrefix}${k}${M}`):U=g.keyPrefix?`${g.keyPrefix}${k}${f}`:f,a.t(U,g)};return typeof n=="string"?c.lng=n:c.lngs=n,c.ns=r,c.keyPrefix=o,c}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const f=(h,g)=>{const v=this.services.backendConnector.state[`${h}|${g}`];return v===-1||v===2};if(r.precheck){const h=r.precheck(this,f);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,n)&&(!a||f(c,n)))}loadNamespaces(n,r){const o=Yt();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{o.resolve(),r&&r(a)}),o):(r&&r(),Promise.resolve())}loadLanguages(n,r){const o=Yt();typeof n=="string"&&(n=[n]);const a=this.options.preload||[],c=n.filter(f=>a.indexOf(f)<0&&this.services.languageUtils.isSupportedCode(f));return c.length?(this.options.preload=a.concat(c),this.loadResources(f=>{o.resolve(),r&&r(f)}),o):(r&&r(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new Qi(eo());return r.indexOf(o.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new en(n,r)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In;const o=n.forkResourceStore;o&&delete n.forkResourceStore;const a={...this.options,...n,isClone:!0},c=new en(a);return(n.debug!==void 0||n.prefix!==void 0)&&(c.logger=c.logger.clone(n)),["store","services","language"].forEach(h=>{c[h]=this[h]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},o&&(c.store=new Yi(this.store.data,a),c.services.resourceStore=c.store),c.translator=new zn(c.services,a),c.translator.on("*",function(h){for(var g=arguments.length,v=new Array(g>1?g-1:0),S=1;S<g;S++)v[S-1]=arguments[S];c.emit(h,...v)}),c.init(a,r),c.translator.options=a,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ee=en.createInstance();Ee.createInstance=en.createInstance;Ee.createInstance;Ee.dir;Ee.init;Ee.loadResources;Ee.reloadResources;Ee.use;Ee.changeLanguage;Ee.getFixedT;Ee.t;Ee.exists;Ee.setDefaultNamespace;Ee.hasLoadedNamespace;Ee.loadNamespaces;Ee.loadLanguages;const Su=document.getElementById("root"),_u=Object.keys(qi).reduce((i,n)=>(i[n]={translation:qi[n]},i),{});Ee.init({lng:"en",fallbackLng:"en",resources:_u}).then(i=>{Rs(()=>be(ba,{t:i,get children(){return be(Xa,{})}}),Su)}).catch(console.error);
