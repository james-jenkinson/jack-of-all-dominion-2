(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();const cs=(i,n)=>i===n,Dn=Symbol("solid-proxy"),fs=Symbol("solid-track"),Fn={equals:cs};let so=go;const ut=1,Bn=2,ao={owned:null,cleanups:null,context:null,owner:null};var oe=null;let Ir=null,hs=null,he=null,Ae=null,Ze=null,Jn=0;function Qt(i,n){const r=he,o=oe,a=i.length===0,l=n===void 0?o:n,f=a?ao:{owned:null,cleanups:null,context:l?l.context:null,owner:l},h=a?i:()=>i(()=>De(()=>Gn(f)));oe=f,he=null;try{return xt(h,!0)}finally{he=r,oe=o}}function Te(i,n){n=n?Object.assign({},Fn,n):Fn;const r={value:i,observers:null,observerSlots:null,comparator:n.equals||void 0},o=a=>(typeof a=="function"&&(a=a(r.value)),po(r,a));return[ho.bind(r),o]}function ke(i,n,r){const o=Qr(i,n,!1,ut);rn(o)}function Di(i,n,r){so=ms;const o=Qr(i,n,!1,ut);o.user=!0,Ze?Ze.push(o):rn(o)}function be(i,n,r){r=r?Object.assign({},Fn,r):Fn;const o=Qr(i,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=r.equals||void 0,rn(o),ho.bind(o)}function De(i){if(he===null)return i();const n=he;he=null;try{return i()}finally{he=n}}function uo(i,n,r){const o=Array.isArray(i);let a;return l=>{let f;if(o){f=Array(i.length);for(let g=0;g<i.length;g++)f[g]=i[g]()}else f=i();const h=De(()=>n(f,a,l));return a=f,h}}function tn(i){return oe===null||(oe.cleanups===null?oe.cleanups=[i]:oe.cleanups.push(i)),i}function lo(){return oe}function co(i,n){const r=oe,o=he;oe=i,he=null;try{return xt(n,!0)}catch(a){Xr(a)}finally{oe=r,he=o}}function ds(i){const n=he,r=oe;return Promise.resolve().then(()=>{he=n,oe=r;let o;return xt(i,!1),he=oe=null,o?o.done:void 0})}function Yn(i,n){const r=Symbol("context");return{id:r,Provider:vs(r),defaultValue:i}}function nn(i){return oe&&oe.context&&oe.context[i.id]!==void 0?oe.context[i.id]:i.defaultValue}function fo(i){const n=be(i),r=be(()=>Vr(n()));return r.toArray=()=>{const o=r();return Array.isArray(o)?o:o!=null?[o]:[]},r}function ho(){if(this.sources&&this.state)if(this.state===ut)rn(this);else{const i=Ae;Ae=null,xt(()=>qn(this),!1),Ae=i}if(he){const i=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(i)):(he.sources=[this],he.sourceSlots=[i]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function po(i,n,r){let o=i.value;return(!i.comparator||!i.comparator(o,n))&&(i.value=n,i.observers&&i.observers.length&&xt(()=>{for(let a=0;a<i.observers.length;a+=1){const l=i.observers[a],f=Ir&&Ir.running;f&&Ir.disposed.has(l),(f?!l.tState:!l.state)&&(l.pure?Ae.push(l):Ze.push(l),l.observers&&mo(l)),f||(l.state=ut)}if(Ae.length>1e6)throw Ae=[],new Error},!1)),n}function rn(i){if(!i.fn)return;Gn(i);const n=Jn;ps(i,i.value,n)}function ps(i,n,r){let o;const a=oe,l=he;he=oe=i;try{o=i.fn(n)}catch(f){return i.pure&&(i.state=ut,i.owned&&i.owned.forEach(Gn),i.owned=null),i.updatedAt=r+1,Xr(f)}finally{he=l,oe=a}(!i.updatedAt||i.updatedAt<=r)&&(i.updatedAt!=null&&"observers"in i?po(i,o):i.value=o,i.updatedAt=r)}function Qr(i,n,r,o=ut,a){const l={fn:i,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:oe,context:oe?oe.context:null,pure:r};return oe===null||oe!==ao&&(oe.owned?oe.owned.push(l):oe.owned=[l]),l}function Mn(i){if(i.state===0)return;if(i.state===Bn)return qn(i);if(i.suspense&&De(i.suspense.inFallback))return i.suspense.effects.push(i);const n=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<Jn);)i.state&&n.push(i);for(let r=n.length-1;r>=0;r--)if(i=n[r],i.state===ut)rn(i);else if(i.state===Bn){const o=Ae;Ae=null,xt(()=>qn(i,n[0]),!1),Ae=o}}function xt(i,n){if(Ae)return i();let r=!1;n||(Ae=[]),Ze?r=!0:Ze=[],Jn++;try{const o=i();return gs(r),o}catch(o){r||(Ze=null),Ae=null,Xr(o)}}function gs(i){if(Ae&&(go(Ae),Ae=null),i)return;const n=Ze;Ze=null,n.length&&xt(()=>so(n),!1)}function go(i){for(let n=0;n<i.length;n++)Mn(i[n])}function ms(i){let n,r=0;for(n=0;n<i.length;n++){const o=i[n];o.user?i[r++]=o:Mn(o)}for(n=0;n<r;n++)Mn(i[n])}function qn(i,n){i.state=0;for(let r=0;r<i.sources.length;r+=1){const o=i.sources[r];if(o.sources){const a=o.state;a===ut?o!==n&&(!o.updatedAt||o.updatedAt<Jn)&&Mn(o):a===Bn&&qn(o,n)}}}function mo(i){for(let n=0;n<i.observers.length;n+=1){const r=i.observers[n];r.state||(r.state=Bn,r.pure?Ae.push(r):Ze.push(r),r.observers&&mo(r))}}function Gn(i){let n;if(i.sources)for(;i.sources.length;){const r=i.sources.pop(),o=i.sourceSlots.pop(),a=r.observers;if(a&&a.length){const l=a.pop(),f=r.observerSlots.pop();o<a.length&&(l.sourceSlots[f]=o,a[o]=l,r.observerSlots[o]=f)}}if(i.owned){for(n=i.owned.length-1;n>=0;n--)Gn(i.owned[n]);i.owned=null}if(i.cleanups){for(n=i.cleanups.length-1;n>=0;n--)i.cleanups[n]();i.cleanups=null}i.state=0}function ys(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function Xr(i,n=oe){throw ys(i)}function Vr(i){if(typeof i=="function"&&!i.length)return Vr(i());if(Array.isArray(i)){const n=[];for(let r=0;r<i.length;r++){const o=Vr(i[r]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return i}function vs(i,n){return function(o){let a;return ke(()=>a=De(()=>(oe.context={...oe.context,[i]:o.value},fo(()=>o.children))),void 0),a}}const bs=Symbol("fallback");function Fi(i){for(let n=0;n<i.length;n++)i[n]()}function ws(i,n,r={}){let o=[],a=[],l=[],f=0,h=n.length>1?[]:null;return tn(()=>Fi(l)),()=>{let g=i()||[],v,w;return g[fs],De(()=>{let _=g.length,$,B,I,V,Y,H,ce,J,se;if(_===0)f!==0&&(Fi(l),l=[],o=[],a=[],f=0,h&&(h=[])),r.fallback&&(o=[bs],a[0]=Qt(ue=>(l[0]=ue,r.fallback())),f=1);else if(f===0){for(a=new Array(_),w=0;w<_;w++)o[w]=g[w],a[w]=Qt(A);f=_}else{for(I=new Array(_),V=new Array(_),h&&(Y=new Array(_)),H=0,ce=Math.min(f,_);H<ce&&o[H]===g[H];H++);for(ce=f-1,J=_-1;ce>=H&&J>=H&&o[ce]===g[J];ce--,J--)I[J]=a[ce],V[J]=l[ce],h&&(Y[J]=h[ce]);for($=new Map,B=new Array(J+1),w=J;w>=H;w--)se=g[w],v=$.get(se),B[w]=v===void 0?-1:v,$.set(se,w);for(v=H;v<=ce;v++)se=o[v],w=$.get(se),w!==void 0&&w!==-1?(I[w]=a[v],V[w]=l[v],h&&(Y[w]=h[v]),w=B[w],$.set(se,w)):l[v]();for(w=H;w<_;w++)w in I?(a[w]=I[w],l[w]=V[w],h&&(h[w]=Y[w],h[w](w))):a[w]=Qt(A);a=a.slice(0,f=_),o=g.slice(0)}return a});function A(_){if(l[w]=_,h){const[$,B]=Te(w);return h[w]=B,n(g[w],$)}return n(g[w])}}}function me(i,n){return De(()=>i(n||{}))}function Kn(){return!0}const Hr={get(i,n,r){return n===Dn?r:i.get(n)},has(i,n){return n===Dn?!0:i.has(n)},set:Kn,deleteProperty:Kn,getOwnPropertyDescriptor(i,n){return{configurable:!0,enumerable:!0,get(){return i.get(n)},set:Kn,deleteProperty:Kn}},ownKeys(i){return i.keys()}};function Dr(i){return(i=typeof i=="function"?i():i)?i:{}}function xs(){for(let i=0,n=this.length;i<n;++i){const r=this[i]();if(r!==void 0)return r}}function Bi(...i){let n=!1;for(let f=0;f<i.length;f++){const h=i[f];n=n||!!h&&Dn in h,i[f]=typeof h=="function"?(n=!0,be(h)):h}if(n)return new Proxy({get(f){for(let h=i.length-1;h>=0;h--){const g=Dr(i[h])[f];if(g!==void 0)return g}},has(f){for(let h=i.length-1;h>=0;h--)if(f in Dr(i[h]))return!0;return!1},keys(){const f=[];for(let h=0;h<i.length;h++)f.push(...Object.keys(Dr(i[h])));return[...new Set(f)]}},Hr);const r={},o=Object.create(null);for(let f=i.length-1;f>=0;f--){const h=i[f];if(!h)continue;const g=Object.getOwnPropertyNames(h);for(let v=g.length-1;v>=0;v--){const w=g[v];if(w==="__proto__"||w==="constructor")continue;const A=Object.getOwnPropertyDescriptor(h,w);if(!o[w])o[w]=A.get?{enumerable:!0,configurable:!0,get:xs.bind(r[w]=[A.get.bind(h)])}:A.value!==void 0?A:void 0;else{const _=r[w];_&&(A.get?_.push(A.get.bind(h)):A.value!==void 0&&_.push(()=>A.value))}}}const a={},l=Object.keys(o);for(let f=l.length-1;f>=0;f--){const h=l[f],g=o[h];g&&g.get?Object.defineProperty(a,h,g):a[h]=g?g.value:void 0}return a}function Ss(i,...n){if(Dn in i){const a=new Set(n.length>1?n.flat():n[0]),l=n.map(f=>new Proxy({get(h){return f.includes(h)?i[h]:void 0},has(h){return f.includes(h)&&h in i},keys(){return f.filter(h=>h in i)}},Hr));return l.push(new Proxy({get(f){return a.has(f)?void 0:i[f]},has(f){return a.has(f)?!1:f in i},keys(){return Object.keys(i).filter(f=>!a.has(f))}},Hr)),l}const r={},o=n.map(()=>({}));for(const a of Object.getOwnPropertyNames(i)){const l=Object.getOwnPropertyDescriptor(i,a),f=!l.get&&!l.set&&l.enumerable&&l.writable&&l.configurable;let h=!1,g=0;for(const v of n)v.includes(a)&&(h=!0,f?o[g][a]=l.value:Object.defineProperty(o[g],a,l)),++g;h||(f?r[a]=l.value:Object.defineProperty(r,a,l))}return[...o,r]}const _s=i=>`Stale read from <${i}>.`;function Un(i){const n="fallback"in i&&{fallback:()=>i.fallback};return be(ws(()=>i.each,i.children,n||void 0))}function Zr(i){const n=i.keyed,r=be(()=>i.when,void 0,{equals:(o,a)=>n?o===a:!o==!a});return be(()=>{const o=r();if(o){const a=i.children;return typeof a=="function"&&a.length>0?De(()=>a(n?o:()=>{if(!De(r))throw _s("Show");return i.when})):a}return i.fallback},void 0,void 0)}const Os=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],ks=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Os]),Ps=new Set(["innerHTML","textContent","innerText","children"]),Cs=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Es=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function As(i,n){const r=Es[i];return typeof r=="object"?r[n]?r.$:void 0:r}const Rs=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Ls(i,n,r){let o=r.length,a=n.length,l=o,f=0,h=0,g=n[a-1].nextSibling,v=null;for(;f<a||h<l;){if(n[f]===r[h]){f++,h++;continue}for(;n[a-1]===r[l-1];)a--,l--;if(a===f){const w=l<o?h?r[h-1].nextSibling:r[l-h]:g;for(;h<l;)i.insertBefore(r[h++],w)}else if(l===h)for(;f<a;)(!v||!v.has(n[f]))&&n[f].remove(),f++;else if(n[f]===r[l-1]&&r[h]===n[a-1]){const w=n[--a].nextSibling;i.insertBefore(r[h++],n[f++].nextSibling),i.insertBefore(r[--l],w),n[a]=r[l]}else{if(!v){v=new Map;let A=h;for(;A<l;)v.set(r[A],A++)}const w=v.get(n[f]);if(w!=null)if(h<w&&w<l){let A=f,_=1,$;for(;++A<a&&A<l&&!(($=v.get(n[A]))==null||$!==w+_);)_++;if(_>w-h){const B=n[f];for(;h<w;)i.insertBefore(r[h++],B)}else i.replaceChild(r[h++],n[f++])}else f++;else n[f++].remove()}}}const Mi="_$DX_DELEGATE";function js(i,n,r,o={}){let a;return Qt(l=>{a=l,n===document?i():Oe(n,i(),n.firstChild?null:void 0,r)},o.owner),()=>{a(),n.textContent=""}}function je(i,n,r){let o;const a=()=>{const f=document.createElement("template");return f.innerHTML=i,f.content.firstChild},l=()=>(o||(o=a())).cloneNode(!0);return l.cloneNode=l,l}function ei(i,n=window.document){const r=n[Mi]||(n[Mi]=new Set);for(let o=0,a=i.length;o<a;o++){const l=i[o];r.has(l)||(r.add(l),n.addEventListener(l,Fs))}}function He(i,n,r){r==null?i.removeAttribute(n):i.setAttribute(n,r)}function bt(i,n){n==null?i.removeAttribute("class"):i.className=n}function Ns(i,n,r,o){if(o)Array.isArray(r)?(i[`$$${n}`]=r[0],i[`$$${n}Data`]=r[1]):i[`$$${n}`]=r;else if(Array.isArray(r)){const a=r[0];i.addEventListener(n,r[0]=l=>a.call(i,r[1],l))}else i.addEventListener(n,r)}function yo(i,n,r={}){const o=Object.keys(n||{}),a=Object.keys(r);let l,f;for(l=0,f=a.length;l<f;l++){const h=a[l];!h||h==="undefined"||n[h]||(qi(i,h,!1),delete r[h])}for(l=0,f=o.length;l<f;l++){const h=o[l],g=!!n[h];!h||h==="undefined"||r[h]===g||!g||(qi(i,h,!0),r[h]=g)}return r}function Ks(i,n,r){if(!n)return r?He(i,"style"):n;const o=i.style;if(typeof n=="string")return o.cssText=n;typeof r=="string"&&(o.cssText=r=void 0),r||(r={}),n||(n={});let a,l;for(l in r)n[l]==null&&o.removeProperty(l),delete r[l];for(l in n)a=n[l],a!==r[l]&&(o.setProperty(l,a),r[l]=a);return r}function Ts(i,n={},r,o){const a={};return ke(()=>a.children=Zt(i,n.children,a.children)),ke(()=>typeof n.ref=="function"?$s(n.ref,i):n.ref=i),ke(()=>Is(i,n,r,!0,a,!0)),a}function $s(i,n,r){return De(()=>i(n,r))}function Oe(i,n,r,o){if(r!==void 0&&!o&&(o=[]),typeof n!="function")return Zt(i,n,o,r);ke(a=>Zt(i,n(),a,r),o)}function Is(i,n,r,o,a={},l=!1){n||(n={});for(const f in a)if(!(f in n)){if(f==="children")continue;a[f]=Ui(i,f,null,a[f],r,l)}for(const f in n){if(f==="children")continue;const h=n[f];a[f]=Ui(i,f,h,a[f],r,l)}}function Ds(i){return i.toLowerCase().replace(/-([a-z])/g,(n,r)=>r.toUpperCase())}function qi(i,n,r){const o=n.trim().split(/\s+/);for(let a=0,l=o.length;a<l;a++)i.classList.toggle(o[a],r)}function Ui(i,n,r,o,a,l){let f,h,g,v,w;if(n==="style")return Ks(i,r,o);if(n==="classList")return yo(i,r,o);if(r===o)return o;if(n==="ref")l||r(i);else if(n.slice(0,3)==="on:"){const A=n.slice(3);o&&i.removeEventListener(A,o),r&&i.addEventListener(A,r)}else if(n.slice(0,10)==="oncapture:"){const A=n.slice(10);o&&i.removeEventListener(A,o,!0),r&&i.addEventListener(A,r,!0)}else if(n.slice(0,2)==="on"){const A=n.slice(2).toLowerCase(),_=Rs.has(A);if(!_&&o){const $=Array.isArray(o)?o[0]:o;i.removeEventListener(A,$)}(_||r)&&(Ns(i,A,r,_),_&&ei([A]))}else n.slice(0,5)==="attr:"?He(i,n.slice(5),r):(w=n.slice(0,5)==="prop:")||(g=Ps.has(n))||(v=As(n,i.tagName))||(h=ks.has(n))||(f=i.nodeName.includes("-"))?(w&&(n=n.slice(5),h=!0),n==="class"||n==="className"?bt(i,r):f&&!h&&!g?i[Ds(n)]=r:i[v||n]=r):He(i,Cs[n]||n,r);return r}function Fs(i){const n=`$$${i.type}`;let r=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==r&&Object.defineProperty(i,"target",{configurable:!0,value:r}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return r||document}});r;){const o=r[n];if(o&&!r.disabled){const a=r[`${n}Data`];if(a!==void 0?o.call(r,a,i):o.call(r,i),i.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function Zt(i,n,r,o,a){for(;typeof r=="function";)r=r();if(n===r)return r;const l=typeof n,f=o!==void 0;if(i=f&&r[0]&&r[0].parentNode||i,l==="string"||l==="number")if(l==="number"&&(n=n.toString()),f){let h=r[0];h&&h.nodeType===3?h.data!==n&&(h.data=n):h=document.createTextNode(n),r=Lt(i,r,o,h)}else r!==""&&typeof r=="string"?r=i.firstChild.data=n:r=i.textContent=n;else if(n==null||l==="boolean")r=Lt(i,r,o);else{if(l==="function")return ke(()=>{let h=n();for(;typeof h=="function";)h=h();r=Zt(i,h,r,o)}),()=>r;if(Array.isArray(n)){const h=[],g=r&&Array.isArray(r);if(zr(h,n,r,a))return ke(()=>r=Zt(i,h,r,o,!0)),()=>r;if(h.length===0){if(r=Lt(i,r,o),f)return r}else g?r.length===0?Vi(i,h,o):Ls(i,r,h):(r&&Lt(i),Vi(i,h));r=h}else if(n.nodeType){if(Array.isArray(r)){if(f)return r=Lt(i,r,o,n);Lt(i,r,null,n)}else r==null||r===""||!i.firstChild?i.appendChild(n):i.replaceChild(n,i.firstChild);r=n}}return r}function zr(i,n,r,o){let a=!1;for(let l=0,f=n.length;l<f;l++){let h=n[l],g=r&&r[i.length],v;if(!(h==null||h===!0||h===!1))if((v=typeof h)=="object"&&h.nodeType)i.push(h);else if(Array.isArray(h))a=zr(i,h,g)||a;else if(v==="function")if(o){for(;typeof h=="function";)h=h();a=zr(i,Array.isArray(h)?h:[h],Array.isArray(g)?g:[g])||a}else i.push(h),a=!0;else{const w=String(h);g&&g.nodeType===3&&g.data===w?i.push(g):i.push(document.createTextNode(w))}}return a}function Vi(i,n,r=null){for(let o=0,a=n.length;o<a;o++)i.insertBefore(n[o],r)}function Lt(i,n,r,o){if(r===void 0)return i.textContent="";const a=o||document.createTextNode("");if(n.length){let l=!1;for(let f=n.length-1;f>=0;f--){const h=n[f];if(a!==h){const g=h.parentNode===i;!l&&!f?g?i.replaceChild(a,h):i.insertBefore(a,r):g&&h.remove()}else l=!0}}else i.insertBefore(a,r);return[a]}const Bs=!1,Ms={Blacklist:"Blacklist","Cards within {{expansion}}":"Cards within {{expansion}}",Expansions:"Expansions",Home:"Home",Kingdom:"Kingdom","Open navigation menu":"Open navigation menu","Close navigation menu":"Close navigation menu","Kingdom Builder":"Kingdom Builder","Set selection":"Set selection"},Hi={en:Ms};function vo(){let i=new Set;function n(a){return i.add(a),()=>i.delete(a)}let r=!1;function o(a,l){if(r)return!(r=!1);const f={to:a,options:l,defaultPrevented:!1,preventDefault:()=>f.defaultPrevented=!0};for(const h of i)h.listener({...f,from:h.location,retry:g=>{g&&(r=!0),h.navigate(a,{...l,resolve:!1})}});return!f.defaultPrevented}return{subscribe:n,confirm:o}}let Wr;function ti(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Wr=window.history.state._depth}ti();function qs(i){return{...i,_depth:window.history.state&&window.history.state._depth}}function Us(i,n){let r=!1;return()=>{const o=Wr;ti();const a=o==null?null:Wr-o;if(r){r=!1;return}a&&n(a)?(r=!0,window.history.go(-a)):i()}}const Vs=/^(?:[a-z0-9]+:)?\/\//i,Hs=/^\/+|(\/)\/+$/g,bo="http://sr";function wt(i,n=!1){const r=i.replace(Hs,"$1");return r?n||/^[?#]/.test(r)?r:"/"+r:""}function In(i,n,r){if(Vs.test(n))return;const o=wt(i),a=r&&wt(r);let l="";return!a||n.startsWith("/")?l=o:a.toLowerCase().indexOf(o.toLowerCase())!==0?l=o+a:l=a,(l||"/")+wt(n,!l)}function zs(i,n){if(i==null)throw new Error(n);return i}function Ws(i,n){return wt(i).replace(/\/*(\*.*)?$/g,"")+wt(n)}function wo(i){const n={};return i.searchParams.forEach((r,o)=>{n[o]=r}),n}function Js(i,n,r){const[o,a]=i.split("/*",2),l=o.split("/").filter(Boolean),f=l.length;return h=>{const g=h.split("/").filter(Boolean),v=g.length-f;if(v<0||v>0&&a===void 0&&!n)return null;const w={path:f?"":"/",params:{}},A=_=>r===void 0?void 0:r[_];for(let _=0;_<f;_++){const $=l[_],B=g[_],I=$[0]===":",V=I?$.slice(1):$;if(I&&Fr(B,A(V)))w.params[V]=B;else if(I||!Fr(B,$))return null;w.path+=`/${B}`}if(a){const _=v?g.slice(-v).join("/"):"";if(Fr(_,A(a)))w.params[a]=_;else return null}return w}}function Fr(i,n){const r=o=>o.localeCompare(i,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?r(n):typeof n=="function"?n(i):Array.isArray(n)?n.some(r):n instanceof RegExp?n.test(i):!1}function Ys(i){const[n,r]=i.pattern.split("/*",2),o=n.split("/").filter(Boolean);return o.reduce((a,l)=>a+(l.startsWith(":")?2:3),o.length-(r===void 0?0:1))}function xo(i){const n=new Map,r=lo();return new Proxy({},{get(o,a){return n.has(a)||co(r,()=>n.set(a,be(()=>i()[a]))),n.get(a)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function So(i){let n=/(\/?\:[^\/]+)\?/.exec(i);if(!n)return[i];let r=i.slice(0,n.index),o=i.slice(n.index+n[0].length);const a=[r,r+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(o);)a.push(r+=n[1]),o=o.slice(n[0].length);return So(o).reduce((l,f)=>[...l,...a.map(h=>h+f)],[])}const Gs=100,_o=Yn(),ni=Yn(),on=()=>zs(nn(_o),"<A> and 'use' router primitives can be only used inside a Route."),Qs=()=>nn(ni)||on().base,Xs=i=>{const n=Qs();return be(()=>n.resolvePath(i()))},Zs=i=>{const n=on();return be(()=>{const r=i();return r!==void 0?n.renderPath(r):r})},ea=()=>on().navigatorFactory(),Oo=()=>on().location,ta=i=>{const n=on().beforeLeave.subscribe({listener:i,location:Oo(),navigate:ea()});tn(n)};function na(i,n=""){const{component:r,load:o,children:a,info:l}=i,f=!a||Array.isArray(a)&&!a.length,h={key:i,component:r,load:o,info:l};return ko(i.path).reduce((g,v)=>{for(const w of So(v)){const A=Ws(n,w);let _=f?A:A.split("/*",1)[0];_=_.split("/").map($=>$.startsWith(":")||$.startsWith("*")?$:encodeURIComponent($)).join("/"),g.push({...h,originalPath:v,pattern:_,matcher:Js(_,!f,i.matchFilters)})}return g},[])}function ra(i,n=0){return{routes:i,score:Ys(i[i.length-1])*1e4-n,matcher(r){const o=[];for(let a=i.length-1;a>=0;a--){const l=i[a],f=l.matcher(r);if(!f)return null;o.unshift({...f,route:l})}return o}}}function ko(i){return Array.isArray(i)?i:[i]}function Po(i,n="",r=[],o=[]){const a=ko(i);for(let l=0,f=a.length;l<f;l++){const h=a[l];if(h&&typeof h=="object"){h.hasOwnProperty("path")||(h.path="");const g=na(h,n);for(const v of g){r.push(v);const w=Array.isArray(h.children)&&h.children.length===0;if(h.children&&!w)Po(h.children,v.pattern,r,o);else{const A=ra([...r],o.length);o.push(A)}r.pop()}}}return r.length?o:o.sort((l,f)=>f.score-l.score)}function Br(i,n){for(let r=0,o=i.length;r<o;r++){const a=i[r].matcher(n);if(a)return a}return[]}function ia(i,n){const r=new URL(bo),o=be(g=>{const v=i();try{return new URL(v,r)}catch{return console.error(`Invalid path ${v}`),g}},r,{equals:(g,v)=>g.href===v.href}),a=be(()=>o().pathname),l=be(()=>o().search,!0),f=be(()=>o().hash),h=()=>"";return{get pathname(){return a()},get search(){return l()},get hash(){return f()},get state(){return n()},get key(){return h()},query:xo(uo(l,()=>wo(o())))}}let Qe;function oa(){return Qe}function sa(i,n,r,o={}){const{signal:[a,l],utils:f={}}=i,h=f.parsePath||(te=>te),g=f.renderPath||(te=>te),v=f.beforeLeave||vo(),w=In("",o.base||"");if(w===void 0)throw new Error(`${w} is not a valid base path`);w&&!a().value&&l({value:w,replace:!0,scroll:!1});const[A,_]=Te(!1),$=async te=>{_(!0);try{await ds(te)}finally{_(!1)}},[B,I]=Te(a().value),[V,Y]=Te(a().state),H=ia(B,V),ce=[],J=Te([]),se=be(()=>typeof o.transformUrl=="function"?Br(n(),o.transformUrl(H.pathname)):Br(n(),H.pathname)),ue=xo(()=>{const te=se(),re={};for(let we=0;we<te.length;we++)Object.assign(re,te[we].params);return re}),ne={pattern:w,path:()=>w,outlet:()=>null,resolvePath(te){return In(w,te)}};return ke(()=>{const{value:te,state:re}=a();De(()=>{$(()=>{Qe="native",te!==B()&&I(te),Y(re),J[1]([])}).then(()=>{Qe=void 0})})}),{base:ne,location:H,params:ue,isRouting:A,renderPath:g,parsePath:h,navigatorFactory:Kt,matches:se,beforeLeave:v,preloadRoute:Me,singleFlight:o.singleFlight===void 0?!0:o.singleFlight,submissions:J};function We(te,re,we){De(()=>{if(typeof re=="number"){re&&(f.go?f.go(re):console.warn("Router integration does not support relative routing"));return}const{replace:Ne,resolve:$e,scroll:Fe,state:fe}={replace:!1,resolve:!0,scroll:!0,...we},ge=$e?te.resolvePath(re):In("",re);if(ge===void 0)throw new Error(`Path '${re}' is not a routable path`);if(ce.length>=Gs)throw new Error("Too many redirects");const xe=B();if((ge!==xe||fe!==V())&&!Bs){if(v.confirm(ge,we)){const et=ce.push({value:xe,replace:Ne,scroll:Fe,state:V()});$(()=>{Qe="navigate",I(ge),Y(fe),J[1]([])}).then(()=>{ce.length===et&&(Qe=void 0,lt({value:ge,state:fe}))})}}})}function Kt(te){return te=te||nn(ni)||ne,(re,we)=>We(te,re,we)}function lt(te){const re=ce[0];re&&((te.value!==re.value||te.state!==re.state)&&l({...te,replace:re.replace,scroll:re.scroll}),ce.length=0)}function Me(te,re){const we=Br(n(),te.pathname),Ne=Qe;Qe="preload";for(let $e in we){const{route:Fe,params:fe}=we[$e];Fe.component&&Fe.component.preload&&Fe.component.preload();const{load:ge}=Fe;re&&ge&&co(r(),()=>ge({params:fe,location:{pathname:te.pathname,search:te.search,hash:te.hash,query:wo(te),state:null,key:""},intent:"preload"}))}Qe=Ne}}function aa(i,n,r,o){const{base:a,location:l,params:f}=i,{pattern:h,component:g,load:v}=o().route,w=be(()=>o().path);g&&g.preload&&g.preload();const A=v?v({params:f,location:l,intent:Qe||"initial"}):void 0;return{parent:n,pattern:h,path:w,outlet:()=>g?me(g,{params:f,location:l,data:A,get children(){return r()}}):r(),resolvePath($){return In(a.path(),$,w())}}}const ua=i=>n=>{const{base:r}=n,o=fo(()=>n.children),a=be(()=>Po(o(),n.base||""));let l;const f=sa(i,a,()=>l,{base:r,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return i.create&&i.create(f),me(_o.Provider,{value:f,get children(){return me(la,{routerState:f,get root(){return n.root},get load(){return n.rootLoad},get children(){return[be(()=>(l=lo())&&null),me(ca,{routerState:f,get branches(){return a()}})]}})}})};function la(i){const n=i.routerState.location,r=i.routerState.params,o=be(()=>i.load&&De(()=>{i.load({params:r,location:n,intent:oa()||"initial"})}));return me(Zr,{get when(){return i.root},keyed:!0,get fallback(){return i.children},children:a=>me(a,{params:r,location:n,get data(){return o()},get children(){return i.children}})})}function ca(i){const n=[];let r;const o=be(uo(i.routerState.matches,(a,l,f)=>{let h=l&&a.length===l.length;const g=[];for(let v=0,w=a.length;v<w;v++){const A=l&&l[v],_=a[v];f&&A&&_.route.key===A.route.key?g[v]=f[v]:(h=!1,n[v]&&n[v](),Qt($=>{n[v]=$,g[v]=aa(i.routerState,g[v-1]||i.routerState.base,zi(()=>o()[v+1]),()=>i.routerState.matches()[v])}))}return n.splice(a.length).forEach(v=>v()),f&&h?f:(r=g[0],g)}));return zi(()=>o()&&r)()}const zi=i=>()=>me(Zr,{get when(){return i()},keyed:!0,children:n=>me(ni.Provider,{value:n,get children(){return n.outlet()}})});function fa([i,n],r,o){return[i,o?a=>n(o(a)):n]}function ha(i){if(i==="#")return null;try{return document.querySelector(i)}catch{return null}}function da(i){let n=!1;const r=a=>typeof a=="string"?{value:a}:a,o=fa(Te(r(i.get()),{equals:(a,l)=>a.value===l.value&&a.state===l.state}),void 0,a=>(!n&&i.set(a),a));return i.init&&tn(i.init((a=i.get())=>{n=!0,o[1](r(a)),n=!1})),ua({signal:o,create:i.create,utils:i.utils})}function pa(i,n,r){return i.addEventListener(n,r),()=>i.removeEventListener(n,r)}function ga(i,n){const r=ha(`#${i}`);r?r.scrollIntoView():n&&window.scrollTo(0,0)}const ma=new Map;function ya(i=!0,n=!1,r="/_server",o){return a=>{const l=a.base.path(),f=a.navigatorFactory(a.base);let h={};function g(I){return I.namespaceURI==="http://www.w3.org/2000/svg"}function v(I){if(I.defaultPrevented||I.button!==0||I.metaKey||I.altKey||I.ctrlKey||I.shiftKey)return;const V=I.composedPath().find(ue=>ue instanceof Node&&ue.nodeName.toUpperCase()==="A");if(!V||n&&!V.hasAttribute("link"))return;const Y=g(V),H=Y?V.href.baseVal:V.href;if((Y?V.target.baseVal:V.target)||!H&&!V.hasAttribute("state"))return;const J=(V.getAttribute("rel")||"").split(/\s+/);if(V.hasAttribute("download")||J&&J.includes("external"))return;const se=Y?new URL(H,document.baseURI):new URL(H);if(!(se.origin!==window.location.origin||l&&se.pathname&&!se.pathname.toLowerCase().startsWith(l.toLowerCase())))return[V,se]}function w(I){const V=v(I);if(!V)return;const[Y,H]=V,ce=a.parsePath(H.pathname+H.search+H.hash),J=Y.getAttribute("state");I.preventDefault(),f(ce,{resolve:!1,replace:Y.hasAttribute("replace"),scroll:!Y.hasAttribute("noscroll"),state:J&&JSON.parse(J)})}function A(I){const V=v(I);if(!V)return;const[Y,H]=V;typeof o=="function"&&(H.pathname=o(H.pathname)),h[H.pathname]||a.preloadRoute(H,Y.getAttribute("preload")!=="false")}function _(I){const V=v(I);if(!V)return;const[Y,H]=V;typeof o=="function"&&(H.pathname=o(H.pathname)),!h[H.pathname]&&(h[H.pathname]=setTimeout(()=>{a.preloadRoute(H,Y.getAttribute("preload")!=="false"),delete h[H.pathname]},200))}function $(I){const V=v(I);if(!V)return;const[,Y]=V;typeof o=="function"&&(Y.pathname=o(Y.pathname)),h[Y.pathname]&&(clearTimeout(h[Y.pathname]),delete h[Y.pathname])}function B(I){if(I.defaultPrevented)return;let V=I.submitter&&I.submitter.hasAttribute("formaction")?I.submitter.getAttribute("formaction"):I.target.getAttribute("action");if(!V)return;if(!V.startsWith("https://action/")){const H=new URL(V,bo);if(V=a.parsePath(H.pathname+H.search),!V.startsWith(r))return}if(I.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const Y=ma.get(V);if(Y){I.preventDefault();const H=new FormData(I.target);I.submitter&&I.submitter.name&&H.append(I.submitter.name,I.submitter.value),Y.call({r:a,f:I.target},H)}}ei(["click","submit"]),document.addEventListener("click",w),i&&(document.addEventListener("mouseover",_),document.addEventListener("mouseout",$),document.addEventListener("focusin",A),document.addEventListener("touchstart",A)),document.addEventListener("submit",B),tn(()=>{document.removeEventListener("click",w),i&&(document.removeEventListener("mouseover",_),document.removeEventListener("mouseout",$),document.removeEventListener("focusin",A),document.removeEventListener("touchstart",A)),document.removeEventListener("submit",B)})}}function va(i){const n=()=>{const o=window.location.pathname+window.location.search;return{value:i.transformUrl?i.transformUrl(o)+window.location.hash:o+window.location.hash,state:window.history.state}},r=vo();return da({get:n,set({value:o,replace:a,scroll:l,state:f}){a?window.history.replaceState(qs(f),"",o):window.history.pushState(f,"",o),ga(window.location.hash.slice(1),l),ti()},init:o=>pa(window,"popstate",Us(o,a=>{if(a&&a<0)return!r.confirm(a);{const l=n();return!r.confirm(l.value,{state:l.state})}})),create:ya(i.preload,i.explicitLinks,i.actionBase,i.transformUrl),utils:{go:o=>window.history.go(o),beforeLeave:r}})(i)}var ba=je("<a>");function Mr(i){i=Bi({inactiveClass:"inactive",activeClass:"active"},i);const[,n]=Ss(i,["href","state","class","activeClass","inactiveClass","end"]),r=Xs(()=>i.href),o=Zs(r),a=Oo(),l=be(()=>{const f=r();if(f===void 0)return[!1,!1];const h=wt(f.split(/[?#]/,1)[0]).toLowerCase(),g=wt(a.pathname).toLowerCase();return[i.end?h===g:g.startsWith(h),h===g]});return(()=>{var f=ba();return Ts(f,Bi(n,{get href(){return o()||i.href},get state(){return JSON.stringify(i.state)},get classList(){return{...i.class&&{[i.class]:!0},[i.inactiveClass]:!l()[0],[i.activeClass]:l()[0],...n.classList}},link:"",get"aria-current"(){return l()[1]?"page":void 0}}),!1),f})()}const wa={t:i=>i.toString()},Co=Yn(wa);function xa(i){return me(Co.Provider,{get value(){return{t:i.t}},get children(){return i.children}})}function Qn(){return nn(Co)}const Sa="_nav_1j5nq_5",_a="_backdrop_1j5nq_30",Tn={"menu-button":"_menu-button_1j5nq_1",nav:Sa,"navigation-items":"_navigation-items_1j5nq_22",backdrop:_a};var Oa=je('<nav><button class="button-icon close-button"></button><div>'),ka=je("<div>"),Pa=je("<header><button>");function Ca(){const{t:i}=Qn(),[n,r]=Te(!1),[o,a]=Te();Di(()=>{var g;n()&&((g=o())==null||g.focus())});const l=()=>{r(h=>!h)},f=()=>{r(!1)};return Di(()=>{const h=g=>{g.key==="Escape"&&f()};document.addEventListener("keydown",h),tn(()=>{document.removeEventListener("keydown",h)})}),ta(()=>{f()}),(()=>{var h=Pa(),g=h.firstChild;return g.$$click=l,Oe(g,()=>i("Open navigation menu")),Oe(h,me(Zr,{get when(){return n()},get children(){return[(()=>{var v=Oa(),w=v.firstChild,A=w.nextSibling;return w.$$click=f,Oe(w,()=>i("Close navigation menu")),Oe(A,me(Mr,{href:"/",ref:a,get children(){return i("Set selection")}}),null),Oe(A,me(Mr,{href:"/blacklist",get children(){return i("Blacklist")}}),null),Oe(A,me(Mr,{href:"/kingdom",get children(){return i("Kingdom")}}),null),ke(_=>{var $=Tn.nav,B=Tn["navigation-items"];return $!==_.e&&bt(v,_.e=$),B!==_.t&&bt(A,_.t=B),_},{e:void 0,t:void 0}),v})(),(()=>{var v=ka();return v.$$click=f,ke(w=>yo(v,{[Tn.backdrop]:n()},w)),v})()]}}),null),ke(v=>{var w=`button-icon ${Tn["menu-button"]}`,A=n();return w!==v.e&&bt(g,v.e=w),A!==v.t&&He(g,"aria-expanded",v.t=A),v},{e:void 0,t:void 0}),h})()}ei(["click"]);function Ea(i){return[me(Ca,{}),be(()=>i.children)]}var Wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Aa(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Eo={exports:{}};(function(i,n){(function(r,o){i.exports=o()})(Wi,function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(s[c]=u[c])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,s=1,u=arguments.length;s<u;s++)for(var c in t=arguments[s])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)};function a(e,t,s){for(var u,c=0,d=t.length;c<d;c++)!u&&c in t||((u=u||Array.prototype.slice.call(t,0,c))[c]=t[c]);return e.concat(u||Array.prototype.slice.call(t))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Wi,f=Object.keys,h=Array.isArray;function g(e,t){return typeof t!="object"||f(t).forEach(function(s){e[s]=t[s]}),e}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var v=Object.getPrototypeOf,w={}.hasOwnProperty;function A(e,t){return w.call(e,t)}function _(e,t){typeof t=="function"&&(t=t(v(e))),(typeof Reflect>"u"?f:Reflect.ownKeys)(t).forEach(function(s){B(e,s,t[s])})}var $=Object.defineProperty;function B(e,t,s,u){$(e,t,g(s&&A(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},u))}function I(e){return{from:function(t){return e.prototype=Object.create(t.prototype),B(e.prototype,"constructor",e),{extend:_.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,Y=[].slice;function H(e,t,s){return Y.call(e,t,s)}function ce(e,t){return t(e)}function J(e){if(!e)throw new Error("Assertion Failed")}function se(e){l.setImmediate?setImmediate(e):setTimeout(e,0)}function ue(e,t){if(typeof t=="string"&&A(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var s=[],u=0,c=t.length;u<c;++u){var d=ue(e,t[u]);s.push(d)}return s}var p=t.indexOf(".");if(p!==-1){var m=e[t.substr(0,p)];return m==null?void 0:ue(m,t.substr(p+1))}}function ne(e,t,s){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){J(typeof s!="string"&&"length"in s);for(var u=0,c=t.length;u<c;++u)ne(e,t[u],s[u])}else{var d,p,m=t.indexOf(".");m!==-1?(d=t.substr(0,m),(p=t.substr(m+1))===""?s===void 0?h(e)&&!isNaN(parseInt(d))?e.splice(d,1):delete e[d]:e[d]=s:ne(m=!(m=e[d])||!A(e,d)?e[d]={}:m,p,s)):s===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=s}}function We(e){var t,s={};for(t in e)A(e,t)&&(s[t]=e[t]);return s}var Kt=[].concat;function lt(e){return Kt.apply([],e)}var Ye="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(lt([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return l[e]}),Me=new Set(Ye.map(function(e){return l[e]})),te=null;function re(e){return te=new WeakMap,e=function t(s){if(!s||typeof s!="object")return s;var u=te.get(s);if(u)return u;if(h(s)){u=[],te.set(s,u);for(var c=0,d=s.length;c<d;++c)u.push(t(s[c]))}else if(Me.has(s.constructor))u=s;else{var p,m=v(s);for(p in u=m===Object.prototype?{}:Object.create(m),te.set(s,u),s)A(s,p)&&(u[p]=t(s[p]))}return u}(e),te=null,e}var we={}.toString;function Ne(e){return we.call(e).slice(8,-1)}var $e=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Fe=typeof $e=="symbol"?function(e){var t;return e!=null&&(t=e[$e])&&t.apply(e)}:function(){return null};function fe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var ge={};function xe(e){var t,s,u,c;if(arguments.length===1){if(h(e))return e.slice();if(this===ge&&typeof e=="string")return[e];if(c=Fe(e)){for(s=[];!(u=c.next()).done;)s.push(u.value);return s}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(s=new Array(t);t--;)s[t]=e[t];return s}for(t=arguments.length,s=new Array(t);t--;)s[t]=arguments[t];return s}var et=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},It=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ie=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(It),jo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function St(e,t){this.name=e,this.message=t}function ii(e,t){return e+". Errors: "+Object.keys(t).map(function(s){return t[s].toString()}).filter(function(s,u,c){return c.indexOf(s)===u}).join(`
`)}function sn(e,t,s,u){this.failures=t,this.failedKeys=u,this.successCount=s,this.message=ii(e,t)}function _t(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(s){return t[s]}),this.failuresByPos=t,this.message=ii(e,this.failures)}I(St).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(sn).from(St),I(_t).from(St);var Zn=Ie.reduce(function(e,t){return e[t]=t+"Error",e},{}),No=St,W=Ie.reduce(function(e,t){var s=t+"Error";function u(c,d){this.name=s,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=jo[t]||s,this.inner=null)}return I(u).from(No),e[t]=u,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var oi=It.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),an=Ie.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=W[t]),e},{});function le(){}function Tt(e){return e}function Ko(e,t){return e==null||e===Tt?t:function(s){return t(e(s))}}function ct(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function To(e,t){return e===le?t:function(){var s=e.apply(this,arguments);s!==void 0&&(arguments[0]=s);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=t.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?ct(u,this.onsuccess):u),c&&(this.onerror=this.onerror?ct(c,this.onerror):c),d!==void 0?d:s}}function $o(e,t){return e===le?t:function(){e.apply(this,arguments);var s=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?ct(s,this.onsuccess):s),u&&(this.onerror=this.onerror?ct(u,this.onerror):u)}}function Io(e,t){return e===le?t:function(s){var u=e.apply(this,arguments);g(s,u);var c=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,s=t.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?ct(c,this.onsuccess):c),d&&(this.onerror=this.onerror?ct(d,this.onerror):d),u===void 0?s===void 0?void 0:s:g(u,s)}}function Do(e,t){return e===le?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function er(e,t){return e===le?t:function(){var s=e.apply(this,arguments);if(s&&typeof s.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return s.then(function(){return t.apply(u,d)})}return t.apply(this,arguments)}}an.ModifyError=sn,an.DexieError=St,an.BulkError=_t;var qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function si(e){qe=e}var $t={},ai=100,Ye=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,v(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,v(t),e]}(),It=Ye[0],Ie=Ye[1],Ye=Ye[2],Ie=Ie&&Ie.then,Dt=It&&It.constructor,tr=!!Ye,Ft=function(e,t){Bt.push([e,t]),un&&(queueMicrotask(Bo),un=!1)},nr=!0,un=!0,ft=[],ln=[],rr=Tt,tt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:le,pgp:!1,env:{},finalize:le},z=tt,Bt=[],ht=0,cn=[];function U(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=z;if(typeof e!="function"){if(e!==$t)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&or(this,this._value))}this._state=null,this._value=null,++t.ref,function s(u,c){try{c(function(d){if(u._state===null){if(d===u)throw new TypeError("A promise cannot be resolved with itself.");var p=u._lib&&Ot();d&&typeof d.then=="function"?s(u,function(m,S){d instanceof U?d._then(m,S):d.then(m,S)}):(u._state=!0,u._value=d,li(u)),p&&kt()}},or.bind(null,u))}catch(d){or(u,d)}}(this,e)}var ir={get:function(){var e=z,t=pn;function s(u,c){var d=this,p=!e.global&&(e!==z||t!==pn),m=p&&!rt(),S=new U(function(b,P){sr(d,new ui(fi(u,e,p,m),fi(c,e,p,m),b,P,e))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return s.prototype=$t,s},set:function(e){B(this,"then",e&&e.prototype===$t?ir:{get:function(){return e},set:ir.set})}};function ui(e,t,s,u,c){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=s,this.reject=u,this.psd=c}function or(e,t){var s,u;ln.push(t),e._state===null&&(s=e._lib&&Ot(),t=rr(t),e._state=!1,e._value=t,u=e,ft.some(function(c){return c._value===u._value})||ft.push(u),li(e),s&&kt())}function li(e){var t=e._listeners;e._listeners=[];for(var s=0,u=t.length;s<u;++s)sr(e,t[s]);var c=e._PSD;--c.ref||c.finalize(),ht===0&&(++ht,Ft(function(){--ht==0&&ar()},[]))}function sr(e,t){if(e._state!==null){var s=e._state?t.onFulfilled:t.onRejected;if(s===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ht,Ft(Fo,[s,e,t])}else e._listeners.push(t)}function Fo(e,t,s){try{var u,c=t._value;!t._state&&ln.length&&(ln=[]),u=qe&&t._consoleTask?t._consoleTask.run(function(){return e(c)}):e(c),t._state||ln.indexOf(c)!==-1||function(d){for(var p=ft.length;p;)if(ft[--p]._value===d._value)return ft.splice(p,1)}(t),s.resolve(u)}catch(d){s.reject(d)}finally{--ht==0&&ar(),--s.psd.ref||s.psd.finalize()}}function Bo(){dt(tt,function(){Ot()&&kt()})}function Ot(){var e=nr;return un=nr=!1,e}function kt(){var e,t,s;do for(;0<Bt.length;)for(e=Bt,Bt=[],s=e.length,t=0;t<s;++t){var u=e[t];u[0].apply(null,u[1])}while(0<Bt.length);un=nr=!0}function ar(){var e=ft;ft=[],e.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var t=cn.slice(0),s=t.length;s;)t[--s]()}function fn(e){return new U($t,!1,e)}function pe(e,t){var s=z;return function(){var u=Ot(),c=z;try{return it(s,!0),e.apply(this,arguments)}catch(d){t&&t(d)}finally{it(c,!1),u&&kt()}}}_(U.prototype,{then:ir,_then:function(e,t){sr(this,new ui(null,null,e,t,z))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,s=arguments[1];return typeof t=="function"?this.then(null,function(u){return(u instanceof t?s:fn)(u)}):this.then(null,function(u){return(u&&u.name===t?s:fn)(u)})},finally:function(e){return this.then(function(t){return U.resolve(e()).then(function(){return t})},function(t){return U.resolve(e()).then(function(){return fn(t)})})},timeout:function(e,t){var s=this;return e<1/0?new U(function(u,c){var d=setTimeout(function(){return c(new W.Timeout(t))},e);s.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(U.prototype,Symbol.toStringTag,"Dexie.Promise"),tt.env=ci(),_(U,{all:function(){var e=xe.apply(null,arguments).map(gn);return new U(function(t,s){e.length===0&&t([]);var u=e.length;e.forEach(function(c,d){return U.resolve(c).then(function(p){e[d]=p,--u||t(e)},s)})})},resolve:function(e){return e instanceof U?e:e&&typeof e.then=="function"?new U(function(t,s){e.then(t,s)}):new U($t,!0,e)},reject:fn,race:function(){var e=xe.apply(null,arguments).map(gn);return new U(function(t,s){e.map(function(u){return U.resolve(u).then(t,s)})})},PSD:{get:function(){return z},set:function(e){return z=e}},totalEchoes:{get:function(){return pn}},newPSD:nt,usePSD:dt,scheduler:{get:function(){return Ft},set:function(e){Ft=e}},rejectionMapper:{get:function(){return rr},set:function(e){rr=e}},follow:function(e,t){return new U(function(s,u){return nt(function(c,d){var p=z;p.unhandleds=[],p.onunhandled=d,p.finalize=ct(function(){var m,S=this;m=function(){S.unhandleds.length===0?c():d(S.unhandleds[0])},cn.push(function b(){m(),cn.splice(cn.indexOf(b),1)}),++ht,Ft(function(){--ht==0&&ar()},[])},p.finalize),e()},t,s,u)})}}),Dt&&(Dt.allSettled&&B(U,"allSettled",function(){var e=xe.apply(null,arguments).map(gn);return new U(function(t){e.length===0&&t([]);var s=e.length,u=new Array(s);e.forEach(function(c,d){return U.resolve(c).then(function(p){return u[d]={status:"fulfilled",value:p}},function(p){return u[d]={status:"rejected",reason:p}}).then(function(){return--s||t(u)})})})}),Dt.any&&typeof AggregateError<"u"&&B(U,"any",function(){var e=xe.apply(null,arguments).map(gn);return new U(function(t,s){e.length===0&&s(new AggregateError([]));var u=e.length,c=new Array(u);e.forEach(function(d,p){return U.resolve(d).then(function(m){return t(m)},function(m){c[p]=m,--u||s(new AggregateError(c))})})})}));var Se={awaits:0,echoes:0,id:0},Mo=0,hn=[],dn=0,pn=0,qo=0;function nt(e,t,s,u){var c=z,d=Object.create(c);return d.parent=c,d.ref=0,d.global=!1,d.id=++qo,tt.env,d.env=tr?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},t&&g(d,t),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},u=dt(d,e,s,u),d.ref===0&&d.finalize(),u}function Pt(){return Se.id||(Se.id=++Mo),++Se.awaits,Se.echoes+=ai,Se.id}function rt(){return!!Se.awaits&&(--Se.awaits==0&&(Se.id=0),Se.echoes=Se.awaits*ai,!0)}function gn(e){return Se.echoes&&e&&e.constructor===Dt?(Pt(),e.then(function(t){return rt(),t},function(t){return rt(),ye(t)})):e}function Uo(){var e=hn[hn.length-1];hn.pop(),it(e,!1)}function it(e,t){var s,u=z;(t?!Se.echoes||dn++&&e===z:!dn||--dn&&e===z)||queueMicrotask(t?(function(c){++pn,Se.echoes&&--Se.echoes!=0||(Se.echoes=Se.awaits=Se.id=0),hn.push(z),it(c,!0)}).bind(null,e):Uo),e!==z&&(z=e,u===tt&&(tt.env=ci()),tr&&(s=tt.env.Promise,t=e.env,(u.global||e.global)&&(Object.defineProperty(l,"Promise",t.PromiseProp),s.all=t.all,s.race=t.race,s.resolve=t.resolve,s.reject=t.reject,t.allSettled&&(s.allSettled=t.allSettled),t.any&&(s.any=t.any))))}function ci(){var e=l.Promise;return tr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function dt(e,t,s,u,c){var d=z;try{return it(e,!0),t(s,u,c)}finally{it(d,!1)}}function fi(e,t,s,u){return typeof e!="function"?e:function(){var c=z;s&&Pt(),it(t,!0);try{return e.apply(this,arguments)}finally{it(c,!1),u&&queueMicrotask(rt)}}}function ur(e){Promise===Dt&&Se.echoes===0?dn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ie).indexOf("[native code]")===-1&&(Pt=rt=le);var ye=U.reject,pt="ï¿¿",Je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hi="String expected.",Ct=[],mn="__dbnames",lr="readonly",cr="readwrite";function gt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var di={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=re(t))[e],t}}function pi(){throw W.Type()}function ae(e,t){try{var s=gi(e),u=gi(t);if(s!==u)return s==="Array"?1:u==="Array"?-1:s==="binary"?1:u==="binary"?-1:s==="string"?1:u==="string"?-1:s==="Date"?1:u!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(c,d){for(var p=c.length,m=d.length,S=p<m?p:m,b=0;b<S;++b)if(c[b]!==d[b])return c[b]<d[b]?-1:1;return p===m?0:p<m?-1:1}(mi(e),mi(t));case"Array":return function(c,d){for(var p=c.length,m=d.length,S=p<m?p:m,b=0;b<S;++b){var P=ae(c[b],d[b]);if(P!==0)return P}return p===m?0:p<m?-1:1}(e,t)}}catch{}return NaN}function gi(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ne(e),e==="ArrayBuffer"?"binary":e)}function mi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var yi=(de.prototype._trans=function(e,t,s){var u=this._tx||z.trans,c=this.name,d=qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function p(b,P,y){if(!y.schema[c])throw new W.NotFound("Table "+c+" not part of transaction");return t(y.idbtrans,y)}var m=Ot();try{var S=u&&u.db._novip===this.db._novip?u===z.trans?u._promise(e,p,s):nt(function(){return u._promise(e,p,s)},{trans:u,transless:z.transless||z}):function b(P,y,C,x){if(P.idbdb&&(P._state.openComplete||z.letThrough||P._vip)){var k=P._createTransaction(y,C,P._dbSchema);try{k.create(),P._state.PR1398_maxLoop=3}catch(E){return E.name===Zn.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return b(P,y,C,x)})):ye(E)}return k._promise(y,function(E,O){return nt(function(){return z.trans=k,x(E,O,k)})}).then(function(E){if(y==="readwrite")try{k.idbtrans.commit()}catch{}return y==="readonly"?E:k._completion.then(function(){return E})})}if(P._state.openComplete)return ye(new W.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return ye(new W.DatabaseClosed);P.open().catch(le)}return P._state.dbReadyPromise.then(function(){return b(P,y,C,x)})}(this.db,e,[this.name],p);return d&&(S._consoleTask=d,S=S.catch(function(b){return console.trace(b),ye(b)})),S}finally{m&&kt()}},de.prototype.get=function(e,t){var s=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ye(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return s.core.get({trans:u,key:e}).then(function(c){return s.hook.reading.fire(c)})}).then(t)},de.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=f(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&t.every(function(P){return 0<=S.keyPath.indexOf(P)})){for(var b=0;b<t.length;++b)if(t.indexOf(S.keyPath[b])===-1)return!1;return!0}return!1}).sort(function(S,b){return S.keyPath.length-b.keyPath.length})[0];if(s&&this.db._maxKey!==pt){var p=s.keyPath.slice(0,t.length);return this.where(p).equals(p.map(function(b){return e[b]}))}!s&&qe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var u=this.schema.idxByName,c=this.db._deps.indexedDB;function d(S,b){return c.cmp(S,b)===0}var m=t.reduce(function(C,b){var P=C[0],y=C[1],C=u[b],x=e[b];return[P||C,P||!C?gt(y,C&&C.multi?function(k){return k=ue(k,b),h(k)&&k.some(function(E){return d(x,E)})}:function(k){return d(x,ue(k,b))}):y]},[null,null]),p=m[0],m=m[1];return p?this.where(p.name).equals(e[p.keyPath]).filter(m):s?this.filter(m):this.where(t).equals("")},de.prototype.filter=function(e){return this.toCollection().and(e)},de.prototype.count=function(e){return this.toCollection().count(e)},de.prototype.offset=function(e){return this.toCollection().offset(e)},de.prototype.limit=function(e){return this.toCollection().limit(e)},de.prototype.each=function(e){return this.toCollection().each(e)},de.prototype.toArray=function(e){return this.toCollection().toArray(e)},de.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},de.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},de.prototype.reverse=function(){return this.toCollection().reverse()},de.prototype.mapToClass=function(e){var t,s=this.db,u=this.name;function c(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof pi&&(function(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function P(){this.constructor=S}r(S,b),S.prototype=b===null?Object.create(b):(P.prototype=b.prototype,new P)}(c,t=e),Object.defineProperty(c.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),c.prototype.table=function(){return u},e=c);for(var d=new Set,p=e.prototype;p;p=v(p))Object.getOwnPropertyNames(p).forEach(function(S){return d.add(S)});function m(S){if(!S)return S;var b,P=Object.create(e.prototype);for(b in S)if(!d.has(b))try{P[b]=S[b]}catch{}return P}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),e},de.prototype.defineClass=function(){return this.mapToClass(function(e){g(this,e)})},de.prototype.add=function(e,t){var s=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,p=e;return d&&c&&(p=yn(d)(e)),this._trans("readwrite",function(m){return s.core.mutate({trans:m,type:"add",keys:t!=null?[t]:null,values:[p]})}).then(function(m){return m.numFailures?U.reject(m.failures[0]):m.lastResult}).then(function(m){if(d)try{ne(e,d,m)}catch{}return m})},de.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=ue(e,this.schema.primKey.keyPath),e===void 0?ye(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},de.prototype.put=function(e,t){var s=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,p=e;return d&&c&&(p=yn(d)(e)),this._trans("readwrite",function(m){return s.core.mutate({trans:m,type:"put",values:[p],keys:t!=null?[t]:null})}).then(function(m){return m.numFailures?U.reject(m.failures[0]):m.lastResult}).then(function(m){if(d)try{ne(e,d,m)}catch{}return m})},de.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(s){return t.core.mutate({trans:s,type:"delete",keys:[e]})}).then(function(s){return s.numFailures?U.reject(s.failures[0]):void 0})},de.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:di})}).then(function(t){return t.numFailures?U.reject(t.failures[0]):void 0})},de.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(s){return t.core.getMany({keys:e,trans:s}).then(function(u){return u.map(function(c){return t.hook.reading.fire(c)})})})},de.prototype.bulkAdd=function(e,t,s){var u=this,c=Array.isArray(t)?t:void 0,d=(s=s||(c?void 0:t))?s.allKeys:void 0;return this._trans("readwrite",function(p){var b=u.schema.primKey,m=b.auto,b=b.keyPath;if(b&&c)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var S=e.length,b=b&&m?e.map(yn(b)):e;return u.core.mutate({trans:p,type:"add",keys:c,values:b,wantResults:d}).then(function(k){var y=k.numFailures,C=k.results,x=k.lastResult,k=k.failures;if(y===0)return d?C:x;throw new _t("".concat(u.name,".bulkAdd(): ").concat(y," of ").concat(S," operations failed"),k)})})},de.prototype.bulkPut=function(e,t,s){var u=this,c=Array.isArray(t)?t:void 0,d=(s=s||(c?void 0:t))?s.allKeys:void 0;return this._trans("readwrite",function(p){var b=u.schema.primKey,m=b.auto,b=b.keyPath;if(b&&c)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var S=e.length,b=b&&m?e.map(yn(b)):e;return u.core.mutate({trans:p,type:"put",keys:c,values:b,wantResults:d}).then(function(k){var y=k.numFailures,C=k.results,x=k.lastResult,k=k.failures;if(y===0)return d?C:x;throw new _t("".concat(u.name,".bulkPut(): ").concat(y," of ").concat(S," operations failed"),k)})})},de.prototype.bulkUpdate=function(e){var t=this,s=this.core,u=e.map(function(p){return p.key}),c=e.map(function(p){return p.changes}),d=[];return this._trans("readwrite",function(p){return s.getMany({trans:p,keys:u,cache:"clone"}).then(function(m){var S=[],b=[];e.forEach(function(y,C){var x=y.key,k=y.changes,E=m[C];if(E){for(var O=0,R=Object.keys(k);O<R.length;O++){var L=R[O],j=k[L];if(L===t.schema.primKey.keyPath){if(ae(j,x)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else ne(E,L,j)}d.push(C),S.push(x),b.push(E)}});var P=S.length;return s.mutate({trans:p,type:"put",keys:S,values:b,updates:{keys:u,changeSpecs:c}}).then(function(y){var C=y.numFailures,x=y.failures;if(C===0)return P;for(var k=0,E=Object.keys(x);k<E.length;k++){var O,R=E[k],L=d[Number(R)];L!=null&&(O=x[R],delete x[R],x[L]=O)}throw new _t("".concat(t.name,".bulkUpdate(): ").concat(C," of ").concat(P," operations failed"),x)})})})},de.prototype.bulkDelete=function(e){var t=this,s=e.length;return this._trans("readwrite",function(u){return t.core.mutate({trans:u,type:"delete",keys:e})}).then(function(p){var c=p.numFailures,d=p.lastResult,p=p.failures;if(c===0)return d;throw new _t("".concat(t.name,".bulkDelete(): ").concat(c," of ").concat(s," operations failed"),p)})},de);function de(){}function Mt(e){function t(p,m){if(m){for(var S=arguments.length,b=new Array(S-1);--S;)b[S-1]=arguments[S];return s[p].subscribe.apply(null,b),e}if(typeof p=="string")return s[p]}var s={};t.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return t;function d(p,m,S){if(typeof p!="object"){var b;m=m||Do;var P={subscribers:[],fire:S=S||le,subscribe:function(y){P.subscribers.indexOf(y)===-1&&(P.subscribers.push(y),P.fire=m(P.fire,y))},unsubscribe:function(y){P.subscribers=P.subscribers.filter(function(C){return C!==y}),P.fire=P.subscribers.reduce(m,S)}};return s[p]=t[p]=P}f(b=p).forEach(function(y){var C=b[y];if(h(C))d(y,b[y][0],b[y][1]);else{if(C!=="asap")throw new W.InvalidArgument("Invalid event config");var x=d(y,Tt,function(){for(var k=arguments.length,E=new Array(k);k--;)E[k]=arguments[k];x.subscribers.forEach(function(O){se(function(){O.apply(null,E)})})})}})}}function qt(e,t){return I(t).from({prototype:e}),t}function Et(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function fr(e,t){e.filter=gt(e.filter,t)}function hr(e,t,s){var u=e.replayFilter;e.replayFilter=u?function(){return gt(u(),t())}:t,e.justLimit=s&&!u}function vn(e,t){if(e.isPrimKey)return t.primaryKey;var s=t.getIndexByKeyPath(e.index);if(!s)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return s}function vi(e,t,s){var u=vn(e,t.schema);return t.openCursor({trans:s,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:u,range:e.range}})}function bn(e,t,s,u){var c=e.replayFilter?gt(e.filter,e.replayFilter()):e.filter;if(e.or){var d={},p=function(m,S,b){var P,y;c&&!c(S,b,function(C){return S.stop(C)},function(C){return S.fail(C)})||((y=""+(P=S.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(P)),A(d,y)||(d[y]=!0,t(m,S,b)))};return Promise.all([e.or._iterate(p,s),bi(vi(e,u,s),e.algorithm,p,!e.keysOnly&&e.valueMapper)])}return bi(vi(e,u,s),gt(e.algorithm,c),t,!e.keysOnly&&e.valueMapper)}function bi(e,t,s,u){var c=pe(u?function(d,p,m){return s(u(d),p,m)}:s);return e.then(function(d){if(d)return d.start(function(){var p=function(){return d.continue()};t&&!t(d,function(m){return p=m},function(m){d.stop(m),p=le},function(m){d.fail(m),p=le})||c(d.value,d,function(m){return p=m}),p()})})}var Ye=Symbol(),Ut=(wi.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(h(t))return a(a([],h(e)?e:[],!0),t).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var s=this.remove;if(h(s))return h(e)?e.filter(function(u){return!s.includes(u)}).sort():[];if(typeof s=="number")return Number(e)-s;if(typeof s=="bigint")try{return BigInt(e)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},wi);function wi(e){Object.assign(this,e)}var Vo=(ie.prototype._read=function(e,t){var s=this._ctx;return s.error?s.table._trans(null,ye.bind(null,s.error)):s.table._trans("readonly",e).then(t)},ie.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ye.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ie.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=gt(t.algorithm,e)},ie.prototype._iterate=function(e,t){return bn(this._ctx,e,t,this._ctx.table.core)},ie.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return e&&g(s,e),t._ctx=s,t},ie.prototype.raw=function(){return this._ctx.valueMapper=null,this},ie.prototype.each=function(e){var t=this._ctx;return this._read(function(s){return bn(t,e,s,t.table.core)})},ie.prototype.count=function(e){var t=this;return this._read(function(s){var u=t._ctx,c=u.table.core;if(Et(u,!0))return c.count({trans:s,query:{index:vn(u,c.schema),range:u.range}}).then(function(p){return Math.min(p,u.limit)});var d=0;return bn(u,function(){return++d,!1},s,c).then(function(){return d})}).then(e)},ie.prototype.sortBy=function(e,t){var s=e.split(".").reverse(),u=s[0],c=s.length-1;function d(S,b){return b?d(S[s[b]],b-1):S[u]}var p=this._ctx.dir==="next"?1:-1;function m(S,b){return S=d(S,c),b=d(b,c),S<b?-p:b<S?p:0}return this.toArray(function(S){return S.sort(m)}).then(t)},ie.prototype.toArray=function(e){var t=this;return this._read(function(s){var u=t._ctx;if(u.dir==="next"&&Et(u,!0)&&0<u.limit){var c=u.valueMapper,d=vn(u,u.table.core.schema);return u.table.core.query({trans:s,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(m){return m=m.result,c?m.map(c):m})}var p=[];return bn(u,function(m){return p.push(m)},s,u.table.core).then(function(){return p})},e)},ie.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Et(t)?hr(t,function(){var s=e;return function(u,c){return s===0||(s===1?--s:c(function(){u.advance(s),s=0}),!1)}}):hr(t,function(){var s=e;return function(){return--s<0}})),this},ie.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),hr(this._ctx,function(){var t=e;return function(s,u,c){return--t<=0&&u(c),0<=t}},!0),this},ie.prototype.until=function(e,t){return fr(this._ctx,function(s,u,c){return!e(s.value)||(u(c),t)}),this},ie.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ie.prototype.last=function(e){return this.reverse().first(e)},ie.prototype.filter=function(e){var t;return fr(this._ctx,function(s){return e(s.value)}),(t=this._ctx).isMatch=gt(t.isMatch,e),this},ie.prototype.and=function(e){return this.filter(e)},ie.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ie.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ie.prototype.desc=function(){return this.reverse()},ie.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(s,u){e(u.key,u)})},ie.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ie.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(s,u){e(u.primaryKey,u)})},ie.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var s=[];return this.each(function(u,c){s.push(c.key)}).then(function(){return s}).then(e)},ie.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Et(t,!0)&&0<t.limit)return this._read(function(u){var c=vn(t,t.table.core.schema);return t.table.core.query({trans:u,values:!1,limit:t.limit,query:{index:c,range:t.range}})}).then(function(u){return u.result}).then(e);t.keysOnly=!t.isMatch;var s=[];return this.each(function(u,c){s.push(c.primaryKey)}).then(function(){return s}).then(e)},ie.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ie.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ie.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ie.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return fr(this._ctx,function(c){var u=c.primaryKey.toString(),c=A(t,u);return t[u]=!0,!c}),this},ie.prototype.modify=function(e){var t=this,s=this._ctx;return this._write(function(u){var c,d,p;p=typeof e=="function"?e:(c=f(e),d=c.length,function(O){for(var R=!1,L=0;L<d;++L){var j=c[L],N=e[j],K=ue(O,j);N instanceof Ut?(ne(O,j,N.execute(K)),R=!0):K!==N&&(ne(O,j,N),R=!0)}return R});function m(O,j){var L=j.failures,j=j.numFailures;k+=O-j;for(var N=0,K=f(L);N<K.length;N++){var M=K[N];x.push(L[M])}}var S=s.table.core,b=S.schema.primaryKey,P=b.outbound,y=b.extractKey,C=t.db._options.modifyChunkSize||200,x=[],k=0,E=[];return t.clone().primaryKeys().then(function(O){function R(j){var N=Math.min(C,O.length-j);return S.getMany({trans:u,keys:O.slice(j,j+N),cache:"immutable"}).then(function(K){for(var M=[],T=[],F=P?[]:null,q=[],D=0;D<N;++D){var G=K[D],Q={value:re(G),primKey:O[j+D]};p.call(Q,Q.value,Q)!==!1&&(Q.value==null?q.push(O[j+D]):P||ae(y(G),y(Q.value))===0?(T.push(Q.value),P&&F.push(O[j+D])):(q.push(O[j+D]),M.push(Q.value)))}return Promise.resolve(0<M.length&&S.mutate({trans:u,type:"add",values:M}).then(function(ee){for(var X in ee.failures)q.splice(parseInt(X),1);m(M.length,ee)})).then(function(){return(0<T.length||L&&typeof e=="object")&&S.mutate({trans:u,type:"put",keys:F,values:T,criteria:L,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<j}).then(function(ee){return m(T.length,ee)})}).then(function(){return(0<q.length||L&&e===dr)&&S.mutate({trans:u,type:"delete",keys:q,criteria:L,isAdditionalChunk:0<j}).then(function(ee){return m(q.length,ee)})}).then(function(){return O.length>j+N&&R(j+C)})})}var L=Et(s)&&s.limit===1/0&&(typeof e!="function"||e===dr)&&{index:s.index,range:s.range};return R(0).then(function(){if(0<x.length)throw new sn("Error modifying one or more objects",x,k,E);return O.length})})})},ie.prototype.delete=function(){var e=this._ctx,t=e.range;return Et(e)&&(e.isPrimKey||t.type===3)?this._write(function(s){var u=e.table.core.schema.primaryKey,c=t;return e.table.core.count({trans:s,query:{index:u,range:c}}).then(function(d){return e.table.core.mutate({trans:s,type:"deleteRange",range:c}).then(function(p){var m=p.failures;if(p.lastResult,p.results,p=p.numFailures,p)throw new sn("Could not delete some values",Object.keys(m).map(function(S){return m[S]}),d-p);return d-p})})}):this.modify(dr)},ie);function ie(){}var dr=function(e,t){return t.value=null};function Ho(e,t){return e<t?-1:e===t?0:1}function zo(e,t){return t<e?-1:e===t?0:1}function Ke(e,t,s){return e=e instanceof Si?new e.Collection(e):e,e._ctx.error=new(s||TypeError)(t),e}function At(e){return new e.Collection(e,function(){return xi("")}).limit(0)}function wn(e,t,s,u){var c,d,p,m,S,b,P,y=s.length;if(!s.every(function(k){return typeof k=="string"}))return Ke(e,hi);function C(k){c=k==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},d=k==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},p=k==="next"?Ho:zo;var E=s.map(function(O){return{lower:d(O),upper:c(O)}}).sort(function(O,R){return p(O.lower,R.lower)});m=E.map(function(O){return O.upper}),S=E.map(function(O){return O.lower}),P=(b=k)==="next"?"":u}C("next"),e=new e.Collection(e,function(){return ot(m[0],S[y-1]+u)}),e._ondirectionchange=function(k){C(k)};var x=0;return e._addAlgorithm(function(k,E,O){var R=k.key;if(typeof R!="string")return!1;var L=d(R);if(t(L,S,x))return!0;for(var j=null,N=x;N<y;++N){var K=function(M,T,F,q,D,G){for(var Q=Math.min(M.length,q.length),ee=-1,X=0;X<Q;++X){var Be=T[X];if(Be!==q[X])return D(M[X],F[X])<0?M.substr(0,X)+F[X]+F.substr(X+1):D(M[X],q[X])<0?M.substr(0,X)+q[X]+F.substr(X+1):0<=ee?M.substr(0,ee)+T[ee]+F.substr(ee+1):null;D(M[X],Be)<0&&(ee=X)}return Q<q.length&&G==="next"?M+F.substr(M.length):Q<M.length&&G==="prev"?M.substr(0,F.length):ee<0?null:M.substr(0,ee)+q[ee]+F.substr(ee+1)}(R,L,m[N],S[N],p,b);K===null&&j===null?x=N+1:(j===null||0<p(j,K))&&(j=K)}return E(j!==null?function(){k.continue(j+P)}:O),!1}),e}function ot(e,t,s,u){return{type:2,lower:e,upper:t,lowerOpen:s,upperOpen:u}}function xi(e){return{type:1,lower:e,upper:e}}var Si=(Object.defineProperty(_e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_e.prototype.between=function(e,t,s,u){s=s!==!1,u=u===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(s||u)&&(!s||!u)?At(this):new this.Collection(this,function(){return ot(e,t,!s,!u)})}catch{return Ke(this,Je)}},_e.prototype.equals=function(e){return e==null?Ke(this,Je):new this.Collection(this,function(){return xi(e)})},_e.prototype.above=function(e){return e==null?Ke(this,Je):new this.Collection(this,function(){return ot(e,void 0,!0)})},_e.prototype.aboveOrEqual=function(e){return e==null?Ke(this,Je):new this.Collection(this,function(){return ot(e,void 0,!1)})},_e.prototype.below=function(e){return e==null?Ke(this,Je):new this.Collection(this,function(){return ot(void 0,e,!1,!0)})},_e.prototype.belowOrEqual=function(e){return e==null?Ke(this,Je):new this.Collection(this,function(){return ot(void 0,e)})},_e.prototype.startsWith=function(e){return typeof e!="string"?Ke(this,hi):this.between(e,e+pt,!0,!0)},_e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):wn(this,function(t,s){return t.indexOf(s[0])===0},[e],pt)},_e.prototype.equalsIgnoreCase=function(e){return wn(this,function(t,s){return t===s[0]},[e],"")},_e.prototype.anyOfIgnoreCase=function(){var e=xe.apply(ge,arguments);return e.length===0?At(this):wn(this,function(t,s){return s.indexOf(t)!==-1},e,"")},_e.prototype.startsWithAnyOfIgnoreCase=function(){var e=xe.apply(ge,arguments);return e.length===0?At(this):wn(this,function(t,s){return s.some(function(u){return t.indexOf(u)===0})},e,pt)},_e.prototype.anyOf=function(){var e=this,t=xe.apply(ge,arguments),s=this._cmp;try{t.sort(s)}catch{return Ke(this,Je)}if(t.length===0)return At(this);var u=new this.Collection(this,function(){return ot(t[0],t[t.length-1])});u._ondirectionchange=function(d){s=d==="next"?e._ascending:e._descending,t.sort(s)};var c=0;return u._addAlgorithm(function(d,p,m){for(var S=d.key;0<s(S,t[c]);)if(++c===t.length)return p(m),!1;return s(S,t[c])===0||(p(function(){d.continue(t[c])}),!1)}),u},_e.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_e.prototype.noneOf=function(){var e=xe.apply(ge,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ke(this,Je)}var t=e.reduce(function(s,u){return s?s.concat([[s[s.length-1][1],u]]):[[-1/0,u]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},_e.prototype.inAnyRange=function(R,t){var s=this,u=this._cmp,c=this._ascending,d=this._descending,p=this._min,m=this._max;if(R.length===0)return At(this);if(!R.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&c(L[0],L[1])<=0}))return Ke(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var S=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,P,y=c;function C(L,j){return y(L[0],j[0])}try{(P=R.reduce(function(L,j){for(var N=0,K=L.length;N<K;++N){var M=L[N];if(u(j[0],M[1])<0&&0<u(j[1],M[0])){M[0]=p(M[0],j[0]),M[1]=m(M[1],j[1]);break}}return N===K&&L.push(j),L},[])).sort(C)}catch{return Ke(this,Je)}var x=0,k=b?function(L){return 0<c(L,P[x][1])}:function(L){return 0<=c(L,P[x][1])},E=S?function(L){return 0<d(L,P[x][0])}:function(L){return 0<=d(L,P[x][0])},O=k,R=new this.Collection(this,function(){return ot(P[0][0],P[P.length-1][1],!S,!b)});return R._ondirectionchange=function(L){y=L==="next"?(O=k,c):(O=E,d),P.sort(C)},R._addAlgorithm(function(L,j,N){for(var K,M=L.key;O(M);)if(++x===P.length)return j(N),!1;return!k(K=M)&&!E(K)||(s._cmp(M,P[x][1])===0||s._cmp(M,P[x][0])===0||j(function(){y===c?L.continue(P[x][0]):L.continue(P[x][1])}),!1)}),R},_e.prototype.startsWithAnyOf=function(){var e=xe.apply(ge,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?At(this):this.inAnyRange(e.map(function(t){return[t,t+pt]})):Ke(this,"startsWithAnyOf() only works with strings")},_e);function _e(){}function Ue(e){return pe(function(t){return Vt(t),e(t.target.error),!1})}function Vt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ht="storagemutated",pr="x-storagemutated-1",st=Mt(null,Ht),Wo=(Ve.prototype._lock=function(){return J(!z.global),++this._reculock,this._reculock!==1||z.global||(z.lockOwnerFor=this),this},Ve.prototype._unlock=function(){if(J(!z.global),--this._reculock==0)for(z.global||(z.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{dt(e[1],e[0])}catch{}}return this},Ve.prototype._locked=function(){return this._reculock&&z.lockOwnerFor!==this},Ve.prototype.create=function(e){var t=this;if(!this.mode)return this;var s=this.db.idbdb,u=this.db._state.dbOpenError;if(J(!this.idbtrans),!e&&!s)switch(u&&u.name){case"DatabaseClosedError":throw new W.DatabaseClosed(u);case"MissingAPIError":throw new W.MissingAPI(u.message,u);default:throw new W.OpenFailed(u)}if(!this.active)throw new W.TransactionInactive;return J(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=pe(function(c){Vt(c),t._reject(e.error)}),e.onabort=pe(function(c){Vt(c),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(c)}),e.oncomplete=pe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&st.storagemutated.fire(e.mutatedParts)}),this},Ve.prototype._promise=function(e,t,s){var u=this;if(e==="readwrite"&&this.mode!=="readwrite")return ye(new W.ReadOnly("Transaction is readonly"));if(!this.active)return ye(new W.TransactionInactive);if(this._locked())return new U(function(d,p){u._blockedFuncs.push([function(){u._promise(e,t,s).then(d,p)},z])});if(s)return nt(function(){var d=new U(function(p,m){u._lock();var S=t(p,m,u);S&&S.then&&S.then(p,m)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new U(function(d,p){var m=t(d,p,u);m&&m.then&&m.then(d,p)});return c._lib=!0,c},Ve.prototype._root=function(){return this.parent?this.parent._root():this},Ve.prototype.waitFor=function(e){var t,s=this._root(),u=U.resolve(e);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return u}):(s._waitingFor=u,s._waitingQueue=[],t=s.idbtrans.objectStore(s.storeNames[0]),function d(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(t.get(-1/0).onsuccess=d)}());var c=s._waitingFor;return new U(function(d,p){u.then(function(m){return s._waitingQueue.push(pe(d.bind(null,m)))},function(m){return s._waitingQueue.push(pe(p.bind(null,m)))}).finally(function(){s._waitingFor===c&&(s._waitingFor=null)})})},Ve.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},Ve.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(A(t,e))return t[e];var s=this.schema[e];if(!s)throw new W.NotFound("Table "+e+" not part of transaction");return s=new this.db.Table(e,s,this),s.core=this.db.core.table(e),t[e]=s},Ve);function Ve(){}function gr(e,t,s,u,c,d,p){return{name:e,keyPath:t,unique:s,multi:u,auto:c,compound:d,src:(s&&!p?"&":"")+(u?"*":"")+(c?"++":"")+_i(t)}}function _i(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function mr(e,t,s){return{name:e,primKey:t,indexes:s,mappedClass:null,idxByName:(u=function(c){return[c.name,c]},s.reduce(function(c,d,p){return p=u(d,p),p&&(c[p[0]]=p[1]),c},{}))};var u}var zt=function(e){try{return e.only([[]]),zt=function(){return[[]]},[[]]}catch{return zt=function(){return pt},pt}};function yr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(s){return s[t]}:function(s){return ue(s,t)}:function(s){return ue(s,e)};var t}function Oi(e){return[].slice.call(e)}var Jo=0;function Wt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Yo(e,t,S){function u(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var x=O.lower,k=O.upper,E=O.lowerOpen,O=O.upperOpen;return x===void 0?k===void 0?null:t.upperBound(k,!!O):k===void 0?t.lowerBound(x,!!E):t.bound(x,k,!!E,!!O)}function c(C){var x,k=C.name;return{name:k,schema:C,mutate:function(E){var O=E.trans,R=E.type,L=E.keys,j=E.values,N=E.range;return new Promise(function(K,M){K=pe(K);var T=O.objectStore(k),F=T.keyPath==null,q=R==="put"||R==="add";if(!q&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var D,G=(L||j||{length:1}).length;if(L&&j&&L.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function Q(Le){++Be,Vt(Le)}var ee=[],X=[],Be=0;if(R==="deleteRange"){if(N.type===4)return K({numFailures:Be,failures:X,results:[],lastResult:void 0});N.type===3?ee.push(D=T.clear()):ee.push(D=T.delete(u(N)))}else{var F=q?F?[j,L]:[j,null]:[L,null],Z=F[0],Ce=F[1];if(q)for(var Ee=0;Ee<G;++Ee)ee.push(D=Ce&&Ce[Ee]!==void 0?T[R](Z[Ee],Ce[Ee]):T[R](Z[Ee])),D.onerror=Q;else for(Ee=0;Ee<G;++Ee)ee.push(D=T[R](Z[Ee])),D.onerror=Q}function Nn(Le){Le=Le.target.result,ee.forEach(function(vt,$r){return vt.error!=null&&(X[$r]=vt.error)}),K({numFailures:Be,failures:X,results:R==="delete"?L:ee.map(function(vt){return vt.result}),lastResult:Le})}D.onerror=function(Le){Q(Le),Nn(Le)},D.onsuccess=Nn})},getMany:function(E){var O=E.trans,R=E.keys;return new Promise(function(L,j){L=pe(L);for(var N,K=O.objectStore(k),M=R.length,T=new Array(M),F=0,q=0,D=function(ee){ee=ee.target,T[ee._pos]=ee.result,++q===F&&L(T)},G=Ue(j),Q=0;Q<M;++Q)R[Q]!=null&&((N=K.get(R[Q]))._pos=Q,N.onsuccess=D,N.onerror=G,++F);F===0&&L(T)})},get:function(E){var O=E.trans,R=E.key;return new Promise(function(L,j){L=pe(L);var N=O.objectStore(k).get(R);N.onsuccess=function(K){return L(K.target.result)},N.onerror=Ue(j)})},query:(x=b,function(E){return new Promise(function(O,R){O=pe(O);var L,j,N,F=E.trans,K=E.values,M=E.limit,D=E.query,T=M===1/0?void 0:M,q=D.index,D=D.range,F=F.objectStore(k),q=q.isPrimaryKey?F:F.index(q.name),D=u(D);if(M===0)return O({result:[]});x?((T=K?q.getAll(D,T):q.getAllKeys(D,T)).onsuccess=function(G){return O({result:G.target.result})},T.onerror=Ue(R)):(L=0,j=!K&&"openKeyCursor"in q?q.openKeyCursor(D):q.openCursor(D),N=[],j.onsuccess=function(G){var Q=j.result;return Q?(N.push(K?Q.value:Q.primaryKey),++L===M?O({result:N}):void Q.continue()):O({result:N})},j.onerror=Ue(R))})}),openCursor:function(E){var O=E.trans,R=E.values,L=E.query,j=E.reverse,N=E.unique;return new Promise(function(K,M){K=pe(K);var q=L.index,T=L.range,F=O.objectStore(k),F=q.isPrimaryKey?F:F.index(q.name),q=j?N?"prevunique":"prev":N?"nextunique":"next",D=!R&&"openKeyCursor"in F?F.openKeyCursor(u(T),q):F.openCursor(u(T),q);D.onerror=Ue(M),D.onsuccess=pe(function(G){var Q,ee,X,Be,Z=D.result;Z?(Z.___id=++Jo,Z.done=!1,Q=Z.continue.bind(Z),ee=(ee=Z.continuePrimaryKey)&&ee.bind(Z),X=Z.advance.bind(Z),Be=function(){throw new Error("Cursor not stopped")},Z.trans=O,Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=function(){throw new Error("Cursor not started")},Z.fail=pe(M),Z.next=function(){var Ce=this,Ee=1;return this.start(function(){return Ee--?Ce.continue():Ce.stop()}).then(function(){return Ce})},Z.start=function(Ce){function Ee(){if(D.result)try{Ce()}catch(Le){Z.fail(Le)}else Z.done=!0,Z.start=function(){throw new Error("Cursor behind last entry")},Z.stop()}var Nn=new Promise(function(Le,vt){Le=pe(Le),D.onerror=Ue(vt),Z.fail=vt,Z.stop=function($r){Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=Be,Le($r)}});return D.onsuccess=pe(function(Le){D.onsuccess=Ee,Ee()}),Z.continue=Q,Z.continuePrimaryKey=ee,Z.advance=X,Ee(),Nn},K(Z)):K(null)},M)})},count:function(E){var O=E.query,R=E.trans,L=O.index,j=O.range;return new Promise(function(N,K){var M=R.objectStore(k),T=L.isPrimaryKey?M:M.index(L.name),M=u(j),T=M?T.count(M):T.count();T.onsuccess=pe(function(F){return N(F.target.result)}),T.onerror=Ue(K)})}}}var d,p,m,P=(p=S,m=Oi((d=e).objectStoreNames),{schema:{name:d.name,tables:m.map(function(C){return p.objectStore(C)}).map(function(C){var x=C.keyPath,O=C.autoIncrement,k=h(x),E={},O={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x==null,compound:k,keyPath:x,autoIncrement:O,unique:!0,extractKey:yr(x)},indexes:Oi(C.indexNames).map(function(R){return C.index(R)}).map(function(N){var L=N.name,j=N.unique,K=N.multiEntry,N=N.keyPath,K={name:L,compound:h(N),keyPath:N,unique:j,multiEntry:K,extractKey:yr(N)};return E[Wt(N)]=K}),getIndexByKeyPath:function(R){return E[Wt(R)]}};return E[":id"]=O.primaryKey,x!=null&&(E[Wt(x)]=O.primaryKey),O})},hasGetAll:0<m.length&&"getAll"in p.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=P.schema,b=P.hasGetAll,P=S.tables.map(c),y={};return P.forEach(function(C){return y[C.name]=C}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(C){if(!y[C])throw new Error("Table '".concat(C,"' not found"));return y[C]},MIN_KEY:-1/0,MAX_KEY:zt(t),schema:S}}function Go(e,t,s,u){var c=s.IDBKeyRange;return s.indexedDB,{dbcore:(u=Yo(t,c,u),e.dbcore.reduce(function(d,p){return p=p.create,o(o({},d),p(d))},u))}}function xn(e,u){var s=u.db,u=Go(e._middlewares,s,e._deps,u);e.core=u.dbcore,e.tables.forEach(function(c){var d=c.name;e.core.schema.tables.some(function(p){return p.name===d})&&(c.core=e.core.table(d),e[d]instanceof e.Table&&(e[d].core=c.core))})}function Sn(e,t,s,u){s.forEach(function(c){var d=u[c];t.forEach(function(p){var m=function S(b,P){return V(b,P)||(b=v(b))&&S(b,P)}(p,c);(!m||"value"in m&&m.value===void 0)&&(p===e.Transaction.prototype||p instanceof e.Transaction?B(p,c,{get:function(){return this.table(c)},set:function(S){$(this,c,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new e.Table(c,d))})})}function vr(e,t){t.forEach(function(s){for(var u in s)s[u]instanceof e.Table&&delete s[u]})}function Qo(e,t){return e._cfg.version-t._cfg.version}function Xo(e,t,s,u){var c=e._dbSchema;s.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=mr("$meta",Pi("")[0],[]),e._storeNames.push("$meta"));var d=e._createTransaction("readwrite",e._storeNames,c);d.create(s),d._completion.catch(u);var p=d._reject.bind(d),m=z.transless||z;nt(function(){return z.trans=d,z.transless=m,t!==0?(xn(e,s),b=t,((S=d).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(P){return P??b}):U.resolve(b)).then(function(P){return C=P,x=d,k=s,E=[],P=(y=e)._versions,O=y._dbSchema=On(0,y.idbdb,k),(P=P.filter(function(R){return R._cfg.version>=C})).length!==0?(P.forEach(function(R){E.push(function(){var L=O,j=R._cfg.dbschema;kn(y,L,k),kn(y,j,k),O=y._dbSchema=j;var N=br(L,j);N.add.forEach(function(q){wr(k,q[0],q[1].primKey,q[1].indexes)}),N.change.forEach(function(q){if(q.recreate)throw new W.Upgrade("Not yet support for changing primary key");var D=k.objectStore(q.name);q.add.forEach(function(G){return _n(D,G)}),q.change.forEach(function(G){D.deleteIndex(G.name),_n(D,G)}),q.del.forEach(function(G){return D.deleteIndex(G)})});var K=R._cfg.contentUpgrade;if(K&&R._cfg.version>C){xn(y,k),x._memoizedTables={};var M=We(j);N.del.forEach(function(q){M[q]=L[q]}),vr(y,[y.Transaction.prototype]),Sn(y,[y.Transaction.prototype],f(M),M),x.schema=M;var T,F=et(K);return F&&Pt(),N=U.follow(function(){var q;(T=K(x))&&F&&(q=rt.bind(null,null),T.then(q,q))}),T&&typeof T.then=="function"?U.resolve(T):N.then(function(){return T})}}),E.push(function(L){var j,N,K=R._cfg.dbschema;j=K,N=L,[].slice.call(N.db.objectStoreNames).forEach(function(M){return j[M]==null&&N.db.deleteObjectStore(M)}),vr(y,[y.Transaction.prototype]),Sn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),x.schema=y._dbSchema}),E.push(function(L){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===R._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(j){return j!=="$meta"})):L.objectStore("$meta").put(R._cfg.version,"version"))})}),function R(){return E.length?U.resolve(E.shift()(x.idbtrans)).then(R):U.resolve()}().then(function(){ki(O,k)})):U.resolve();var y,C,x,k,E,O}).catch(p)):(f(c).forEach(function(P){wr(s,P,c[P].primKey,c[P].indexes)}),xn(e,s),void U.follow(function(){return e.on.populate.fire(d)}).catch(p));var S,b})}function Zo(e,t){ki(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var s=On(0,e.idbdb,t);kn(e,e._dbSchema,t);for(var u=0,c=br(s,e._dbSchema).change;u<c.length;u++){var d=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=t.objectStore(p.name);p.add.forEach(function(S){qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(S.src)),_n(m,S)})}(c[u]);if(typeof d=="object")return d.value}}function br(e,t){var s,u={del:[],add:[],change:[]};for(s in e)t[s]||u.del.push(s);for(s in t){var c=e[s],d=t[s];if(c){var p={name:s,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,u.change.push(p);else{var m=c.idxByName,S=d.idxByName,b=void 0;for(b in m)S[b]||p.del.push(b);for(b in S){var P=m[b],y=S[b];P?P.src!==y.src&&p.change.push(y):p.add.push(y)}(0<p.del.length||0<p.add.length||0<p.change.length)&&u.change.push(p)}}else u.add.push([s,d])}return u}function wr(e,t,s,u){var c=e.db.createObjectStore(t,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return u.forEach(function(d){return _n(c,d)}),c}function ki(e,t){f(e).forEach(function(s){t.db.objectStoreNames.contains(s)||(qe&&console.debug("Dexie: Creating missing table",s),wr(t,s,e[s].primKey,e[s].indexes))})}function _n(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function On(e,t,s){var u={};return H(t.objectStoreNames,0).forEach(function(c){for(var d=s.objectStore(c),p=gr(_i(b=d.keyPath),b||"",!0,!1,!!d.autoIncrement,b&&typeof b!="string",!0),m=[],S=0;S<d.indexNames.length;++S){var P=d.index(d.indexNames[S]),b=P.keyPath,P=gr(P.name,b,!!P.unique,!!P.multiEntry,!1,b&&typeof b!="string",!1);m.push(P)}u[c]=mr(c,p,m)}),u}function kn(e,t,s){for(var u=s.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],p=s.objectStore(d);e._hasGetAll="getAll"in p;for(var m=0;m<p.indexNames.length;++m){var S=p.indexNames[m],b=p.index(S).keyPath,P=typeof b=="string"?b:"["+H(b).join("+")+"]";!t[d]||(b=t[d].idxByName[P])&&(b.name=S,delete t[d].idxByName[P],t[d].idxByName[S]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Pi(e){return e.split(",").map(function(t,s){var u=(t=t.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return gr(u,c||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(c),s===0)})}var es=(Pn.prototype._parseStoresSpec=function(e,t){f(e).forEach(function(s){if(e[s]!==null){var u=Pi(e[s]),c=u.shift();if(c.unique=!0,c.multi)throw new W.Schema("Primary key cannot be multi-valued");u.forEach(function(d){if(d.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),t[s]=mr(s,c,u)}})},Pn.prototype.stores=function(s){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,s):s;var s=t._versions,u={},c={};return s.forEach(function(d){g(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),t._dbSchema=c,vr(t,[t._allTables,t,t.Transaction.prototype]),Sn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],f(c),c),t._storeNames=f(c),this},Pn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=er(this._cfg.contentUpgrade||le,e),this},Pn);function Pn(){}function xr(e,t){var s=e._dbNamesDB;return s||(s=e._dbNamesDB=new Ge(mn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function Sr(e){return e&&typeof e.databases=="function"}function _r(e){return nt(function(){return z.letThrough=!0,e()})}function Or(e){return!("from"in e)}var Pe=function(e,t){if(!this){var s=new Pe;return e&&"d"in e&&g(s,e),s}g(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Jt(e,t,s){var u=ae(t,s);if(!isNaN(u)){if(0<u)throw RangeError();if(Or(e))return g(e,{from:t,to:s,d:1});var c=e.l,u=e.r;if(ae(s,e.from)<0)return c?Jt(c,t,s):e.l={from:t,to:s,d:1,l:null,r:null},Ci(e);if(0<ae(t,e.to))return u?Jt(u,t,s):e.r={from:t,to:s,d:1,l:null,r:null},Ci(e);ae(t,e.from)<0&&(e.from=t,e.l=null,e.d=u?u.d+1:1),0<ae(s,e.to)&&(e.to=s,e.r=null,e.d=e.l?e.l.d+1:1),s=!e.r,c&&!e.l&&Yt(e,c),u&&s&&Yt(e,u)}}function Yt(e,t){Or(t)||function s(u,S){var d=S.from,p=S.to,m=S.l,S=S.r;Jt(u,d,p),m&&s(u,m),S&&s(u,S)}(e,t)}function Cn(e,t){var s=kr(t),u=s.next();if(u.done)return!1;for(var c=u.value,d=kr(e),p=d.next(c.from),m=p.value;!u.done&&!p.done;){if(ae(m.from,c.to)<=0&&0<=ae(m.to,c.from))return!0;ae(c.from,m.from)<0?c=(u=s.next(m.from)).value:m=(p=d.next(c.from)).value}return!1}function kr(e){var t=Or(e)?null:{s:0,n:e};return{next:function(s){for(var u=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,u)for(;t.n.l&&ae(s,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!u||ae(s,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ci(e){var t,s,u=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((s=e.l)===null||s===void 0?void 0:s.d)||0),c=1<u?"r":u<-1?"l":"";c&&(t=c=="r"?"l":"r",s=o({},e),u=e[c],e.from=u.from,e.to=u.to,e[c]=u[c],s[c]=u[t],(e[t]=s).d=Ei(s)),e.d=Ei(e)}function Ei(s){var t=s.r,s=s.l;return(t?s?Math.max(t.d,s.d):t.d:s?s.d:0)+1}function En(e,t){return f(t).forEach(function(s){e[s]?Yt(e[s],t[s]):e[s]=function u(c){var d,p,m={};for(d in c)A(c,d)&&(p=c[d],m[d]=!p||typeof p!="object"||Me.has(p.constructor)?p:u(p));return m}(t[s])}),e}function Pr(e,t){return e.all||t.all||Object.keys(e).some(function(s){return t[s]&&Cn(t[s],e[s])})}_(Pe.prototype,((Ie={add:function(e){return Yt(this,e),this},addKey:function(e){return Jt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(s){return Jt(t,s,s)}),this}})[$e]=function(){return kr(this)},Ie));var mt={},Cr={},Er=!1;function An(e){En(Cr,e),Er||(Er=!0,setTimeout(function(){Er=!1,Ar(Cr,!(Cr={}))},0))}function Ar(e,t){t===void 0&&(t=!1);var s=new Set;if(e.all)for(var u=0,c=Object.values(mt);u<c.length;u++)Ai(p=c[u],e,s,t);else for(var d in e){var p,m=/^idb\:\/\/(.*)\/(.*)\//.exec(d);m&&(d=m[1],m=m[2],(p=mt["idb://".concat(d,"/").concat(m)])&&Ai(p,e,s,t))}s.forEach(function(S){return S()})}function Ai(e,t,s,u){for(var c=[],d=0,p=Object.entries(e.queries.query);d<p.length;d++){for(var m=p[d],S=m[0],b=[],P=0,y=m[1];P<y.length;P++){var C=y[P];Pr(t,C.obsSet)?C.subscribers.forEach(function(O){return s.add(O)}):u&&b.push(C)}u&&c.push([S,b])}if(u)for(var x=0,k=c;x<k.length;x++){var E=k[x],S=E[0],b=E[1];e.queries.query[S]=b}}function ts(e){var t=e._state,s=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ye(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var u=t.openCanceller,c=Math.round(10*e.verno),d=!1;function p(){if(t.openCanceller!==u)throw new W.DatabaseClosed("db.open() was cancelled")}function m(){return new U(function(C,x){if(p(),!s)throw new W.MissingAPI;var k=e.name,E=t.autoSchema||!c?s.open(k):s.open(k,c);if(!E)throw new W.MissingAPI;E.onerror=Ue(x),E.onblocked=pe(e._fireOnBlocked),E.onupgradeneeded=pe(function(O){var R;P=E.transaction,t.autoSchema&&!e._options.allowEmptyDB?(E.onerror=Vt,P.abort(),E.result.close(),(R=s.deleteDatabase(k)).onsuccess=R.onerror=pe(function(){x(new W.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(P.onerror=Ue(x),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,y=O<1,e.idbdb=E.result,d&&Zo(e,P),Xo(e,O/10,P,x))},x),E.onsuccess=pe(function(){P=null;var O,R,L,j,N,K=e.idbdb=E.result,M=H(K.objectStoreNames);if(0<M.length)try{var T=K.transaction((j=M).length===1?j[0]:j,"readonly");if(t.autoSchema)R=K,L=T,(O=e).verno=R.version/10,L=O._dbSchema=On(0,R,L),O._storeNames=H(R.objectStoreNames,0),Sn(O,[O._allTables],f(L),L);else if(kn(e,e._dbSchema,T),((N=br(On(0,(N=e).idbdb,T),N._dbSchema)).add.length||N.change.some(function(F){return F.add.length||F.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),c=K.version+1,d=!0,C(m());xn(e,T)}catch{}Ct.push(e),K.onversionchange=pe(function(F){t.vcFired=!0,e.on("versionchange").fire(F)}),K.onclose=pe(function(F){e.on("close").fire(F)}),y&&(N=e._deps,T=k,K=N.indexedDB,N=N.IDBKeyRange,Sr(K)||T===mn||xr(K,N).put({name:T}).catch(le)),C()},x)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<c)return c=0,m()}return U.reject(C)})}var S,b=t.dbReadyResolve,P=null,y=!1;return U.race([u,(typeof navigator>"u"?U.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function x(){return indexedDB.databases().finally(C)}S=setInterval(x,100),x()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(m)]).then(function(){return p(),t.onReadyBeingFired=[],U.resolve(_r(function(){return e.on.ready.fire(e.vip)})).then(function C(){if(0<t.onReadyBeingFired.length){var x=t.onReadyBeingFired.reduce(er,le);return t.onReadyBeingFired=[],U.resolve(_r(function(){return x(e.vip)})).then(C)}})}).finally(function(){t.openCanceller===u&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(C){t.dbOpenError=C;try{P&&P.abort()}catch{}return u===t.openCanceller&&e._close(),ye(C)}).finally(function(){t.openComplete=!0,b()}).then(function(){var C;return y&&(C={},e.tables.forEach(function(x){x.schema.indexes.forEach(function(k){k.name&&(C["idb://".concat(e.name,"/").concat(x.name,"/").concat(k.name)]=new Pe(-1/0,[[[]]]))}),C["idb://".concat(e.name,"/").concat(x.name,"/")]=C["idb://".concat(e.name,"/").concat(x.name,"/:dels")]=new Pe(-1/0,[[[]]])}),st(Ht).fire(C),Ar(C,!0)),e})}function Rr(e){function t(d){return e.next(d)}var s=c(t),u=c(function(d){return e.throw(d)});function c(d){return function(S){var m=d(S),S=m.value;return m.done?S:S&&typeof S.then=="function"?S.then(s,u):h(S)?Promise.all(S).then(s,u):s(S)}}return c(t)()}function Rn(e,t,s){for(var u=h(e)?e.slice():[e],c=0;c<s;++c)u.push(t);return u}var ns={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return o(o({},e),{table:function(t){var s=e.table(t),u=s.schema,c={},d=[];function p(y,C,x){var k=Wt(y),E=c[k]=c[k]||[],O=y==null?0:typeof y=="string"?1:y.length,R=0<C,R=o(o({},x),{name:R?"".concat(k,"(virtual-from:").concat(x.name,")"):x.name,lowLevelIndex:x,isVirtual:R,keyTail:C,keyLength:O,extractKey:yr(y),unique:!R&&x.unique});return E.push(R),R.isPrimaryKey||d.push(R),1<O&&p(O===2?y[0]:y.slice(0,O-1),C+1,x),E.sort(function(L,j){return L.keyTail-j.keyTail}),R}t=p(u.primaryKey.keyPath,0,u.primaryKey),c[":id"]=[t];for(var m=0,S=u.indexes;m<S.length;m++){var b=S[m];p(b.keyPath,0,b)}function P(y){var C,x=y.query.index;return x.isVirtual?o(o({},y),{query:{index:x.lowLevelIndex,range:(C=y.query.range,x=x.keyTail,{type:C.type===1?2:C.type,lower:Rn(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,x),lowerOpen:!0,upper:Rn(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,x),upperOpen:!0})}}):y}return o(o({},s),{schema:o(o({},u),{primaryKey:t,indexes:d,getIndexByKeyPath:function(y){return(y=c[Wt(y)])&&y[0]}}),count:function(y){return s.count(P(y))},query:function(y){return s.query(P(y))},openCursor:function(y){var C=y.query.index,x=C.keyTail,k=C.isVirtual,E=C.keyLength;return k?s.openCursor(P(y)).then(function(R){return R&&O(R)}):s.openCursor(y);function O(R){return Object.create(R,{continue:{value:function(L){L!=null?R.continue(Rn(L,y.reverse?e.MAX_KEY:e.MIN_KEY,x)):y.unique?R.continue(R.key.slice(0,E).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,x)):R.continue()}},continuePrimaryKey:{value:function(L,j){R.continuePrimaryKey(Rn(L,e.MAX_KEY,x),j)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var L=R.key;return E===1?L[0]:L.slice(0,E)}},value:{get:function(){return R.value}}})}}})}})}};function Lr(e,t,s,u){return s=s||{},u=u||"",f(e).forEach(function(c){var d,p,m;A(t,c)?(d=e[c],p=t[c],typeof d=="object"&&typeof p=="object"&&d&&p?(m=Ne(d))!==Ne(p)?s[u+c]=t[c]:m==="Object"?Lr(d,p,s,u+c+"."):d!==p&&(s[u+c]=t[c]):d!==p&&(s[u+c]=t[c])):s[u+c]=void 0}),f(t).forEach(function(c){A(e,c)||(s[u+c]=t[c])}),s}function jr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var rs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return o(o({},e),{table:function(t){var s=e.table(t),u=s.schema.primaryKey;return o(o({},s),{mutate:function(c){var d=z.trans,p=d.table(t).hook,m=p.deleting,S=p.creating,b=p.updating;switch(c.type){case"add":if(S.fire===le)break;return d._promise("readwrite",function(){return P(c)},!0);case"put":if(S.fire===le&&b.fire===le)break;return d._promise("readwrite",function(){return P(c)},!0);case"delete":if(m.fire===le)break;return d._promise("readwrite",function(){return P(c)},!0);case"deleteRange":if(m.fire===le)break;return d._promise("readwrite",function(){return function y(C,x,k){return s.query({trans:C,values:!1,query:{index:u,range:x},limit:k}).then(function(E){var O=E.result;return P({type:"delete",keys:O,trans:C}).then(function(R){return 0<R.numFailures?Promise.reject(R.failures[0]):O.length<k?{failures:[],numFailures:0,lastResult:void 0}:y(C,o(o({},x),{lower:O[O.length-1],lowerOpen:!0}),k)})})}(c.trans,c.range,1e4)},!0)}return s.mutate(c);function P(y){var C,x,k,E=z.trans,O=y.keys||jr(u,y);if(!O)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?o(o({},y),{keys:O}):o({},y)).type!=="delete"&&(y.values=a([],y.values)),y.keys&&(y.keys=a([],y.keys)),C=s,k=O,((x=y).type==="add"?Promise.resolve([]):C.getMany({trans:x.trans,keys:k,cache:"immutable"})).then(function(R){var L=O.map(function(j,N){var K,M,T,F=R[N],q={onerror:null,onsuccess:null};return y.type==="delete"?m.fire.call(q,j,F,E):y.type==="add"||F===void 0?(K=S.fire.call(q,j,y.values[N],E),j==null&&K!=null&&(y.keys[N]=j=K,u.outbound||ne(y.values[N],u.keyPath,j))):(K=Lr(F,y.values[N]),(M=b.fire.call(q,K,j,F,E))&&(T=y.values[N],Object.keys(M).forEach(function(D){A(T,D)?T[D]=M[D]:ne(T,D,M[D])}))),q});return s.mutate(y).then(function(j){for(var N=j.failures,K=j.results,M=j.numFailures,j=j.lastResult,T=0;T<O.length;++T){var F=(K||O)[T],q=L[T];F==null?q.onerror&&q.onerror(N[T]):q.onsuccess&&q.onsuccess(y.type==="put"&&R[T]?y.values[T]:F)}return{failures:N,results:K,numFailures:M,lastResult:j}}).catch(function(j){return L.forEach(function(N){return N.onerror&&N.onerror(j)}),Promise.reject(j)})})}}})}})}};function Ri(e,t,s){try{if(!t||t.keys.length<e.length)return null;for(var u=[],c=0,d=0;c<t.keys.length&&d<e.length;++c)ae(t.keys[c],e[d])===0&&(u.push(s?re(t.values[c]):t.values[c]),++d);return u.length===e.length?u:null}catch{return null}}var is={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var s=e.table(t);return o(o({},s),{getMany:function(u){if(!u.cache)return s.getMany(u);var c=Ri(u.keys,u.trans._cache,u.cache==="clone");return c?U.resolve(c):s.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?re(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),s.mutate(u)}})}}}};function Li(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function ji(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var os={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,s=new Pe(e.MIN_KEY,e.MAX_KEY);return o(o({},e),{transaction:function(u,c,d){if(z.subscr&&c!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(z.querier));return e.transaction(u,c,d)},table:function(u){var c=e.table(u),d=c.schema,p=d.primaryKey,y=d.indexes,m=p.extractKey,S=p.outbound,b=p.autoIncrement&&y.filter(function(x){return x.compound&&x.keyPath.includes(p.keyPath)}),P=o(o({},c),{mutate:function(x){function k(D){return D="idb://".concat(t,"/").concat(u,"/").concat(D),j[D]||(j[D]=new Pe)}var E,O,R,L=x.trans,j=x.mutatedParts||(x.mutatedParts={}),N=k(""),K=k(":dels"),M=x.type,q=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[jr(p,x).filter(function(D){return D}),x.values]:[],T=q[0],F=q[1],q=x.trans._cache;return h(T)?(N.addKeys(T),(q=M==="delete"||T.length===F.length?Ri(T,q):null)||K.addKeys(T),(q||F)&&(E=k,O=q,R=F,d.indexes.forEach(function(D){var G=E(D.name||"");function Q(X){return X!=null?D.extractKey(X):null}function ee(X){return D.multiEntry&&h(X)?X.forEach(function(Be){return G.addKey(Be)}):G.addKey(X)}(O||R).forEach(function(X,Ce){var Z=O&&Q(O[Ce]),Ce=R&&Q(R[Ce]);ae(Z,Ce)!==0&&(Z!=null&&ee(Z),Ce!=null&&ee(Ce))})}))):T?(F={from:T.lower,to:T.upper},K.add(F),N.add(F)):(N.add(s),K.add(s),d.indexes.forEach(function(D){return k(D.name).add(s)})),c.mutate(x).then(function(D){return!T||x.type!=="add"&&x.type!=="put"||(N.addKeys(D.results),b&&b.forEach(function(G){var Q=x.values.map(function(X){return G.extractKey(X)}),ee=G.keyPath.findIndex(function(X){return X===p.keyPath});D.results.forEach(function(X){return Q[ee]=X}),k(G.name).addKeys(Q)})),L.mutatedParts=En(L.mutatedParts||{},j),D})}}),y=function(k){var E=k.query,k=E.index,E=E.range;return[k,new Pe((k=E.lower)!==null&&k!==void 0?k:e.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},C={get:function(x){return[p,new Pe(x.key)]},getMany:function(x){return[p,new Pe().addKeys(x.keys)]},count:y,query:y,openCursor:y};return f(C).forEach(function(x){P[x]=function(k){var E=z.subscr,O=!!E,R=Li(z,c)&&ji(x,k)?k.obsSet={}:E;if(O){var L=function(F){return F="idb://".concat(t,"/").concat(u,"/").concat(F),R[F]||(R[F]=new Pe)},j=L(""),N=L(":dels"),E=C[x](k),O=E[0],E=E[1];if((x==="query"&&O.isPrimaryKey&&!k.values?N:L(O.name||"")).add(E),!O.isPrimaryKey){if(x!=="count"){var K=x==="query"&&S&&k.values&&c.query(o(o({},k),{values:!1}));return c[x].apply(this,arguments).then(function(F){if(x==="query"){if(S&&k.values)return K.then(function(Q){return Q=Q.result,j.addKeys(Q),F});var q=k.values?F.result.map(m):F.result;(k.values?j:N).addKeys(q)}else if(x==="openCursor"){var D=F,G=k.values;return D&&Object.create(D,{key:{get:function(){return N.addKey(D.primaryKey),D.key}},primaryKey:{get:function(){var Q=D.primaryKey;return N.addKey(Q),Q}},value:{get:function(){return G&&j.addKey(D.primaryKey),D.value}}})}return F})}N.add(s)}}return c[x].apply(this,arguments)}}),P}})}};function Ni(e,t,s){if(s.numFailures===0)return t;if(t.type==="deleteRange")return null;var u=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return s.numFailures===u?null:(t=o({},t),h(t.keys)&&(t.keys=t.keys.filter(function(c,d){return!(d in s.failures)})),"values"in t&&h(t.values)&&(t.values=t.values.filter(function(c,d){return!(d in s.failures)})),t)}function Nr(e,t){return s=e,((u=t).lower===void 0||(u.lowerOpen?0<ae(s,u.lower):0<=ae(s,u.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?ae(e,t.upper)<0:ae(e,t.upper)<=0));var s,u}function Ki(e,t,C,u,c,d){if(!C||C.length===0)return e;var p=t.query.index,m=p.multiEntry,S=t.query.range,b=u.schema.primaryKey.extractKey,P=p.extractKey,y=(p.lowLevelIndex||p).extractKey,C=C.reduce(function(x,k){var E=x,O=k.type==="add"||k.type==="put"?k.values.filter(function(N){return N=P(N),m&&h(N)?N.some(function(K){return Nr(K,S)}):Nr(N,S)}).map(function(N){return N=re(N),d&&Object.freeze(N),N}):[];switch(k.type){case"add":E=x.concat(t.values?O:O.map(function(K){return b(K)}));break;case"put":var R=new Pe().addKeys(k.values.map(function(K){return b(K)})),E=x.filter(function(K){return K=t.values?b(K):K,!Cn(new Pe(K),R)}).concat(t.values?O:O.map(function(K){return b(K)}));break;case"delete":var L=new Pe().addKeys(k.keys);E=x.filter(function(K){return K=t.values?b(K):K,!Cn(new Pe(K),L)});break;case"deleteRange":var j=k.range;E=x.filter(function(K){return!Nr(b(K),j)})}return E},e);return C===e?e:(C.sort(function(x,k){return ae(y(x),y(k))||ae(b(x),b(k))}),t.limit&&t.limit<1/0&&(C.length>t.limit?C.length=t.limit:e.length===t.limit&&C.length<t.limit&&(c.dirty=!0)),d?Object.freeze(C):C)}function Ti(e,t){return ae(e.lower,t.lower)===0&&ae(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ss(e,t){return function(s,u,c,d){if(s===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=ae(s,u))===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return u}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(s,u,c,d){if(s===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=ae(s,u))===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return u}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function as(e,t,s,u){e.subscribers.add(s),u.addEventListener("abort",function(){var c,d;e.subscribers.delete(s),e.subscribers.size===0&&(c=e,d=t,setTimeout(function(){c.subscribers.size===0&&fe(d,c)},3e3))})}var us={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return o(o({},e),{transaction:function(s,u,c){var d,p,m=e.transaction(s,u,c);return u==="readwrite"&&(p=(d=new AbortController).signal,c=function(S){return function(){if(d.abort(),u==="readwrite"){for(var b=new Set,P=0,y=s;P<y.length;P++){var C=y[P],x=mt["idb://".concat(t,"/").concat(C)];if(x){var k=e.table(C),E=x.optimisticOps.filter(function(G){return G.trans===m});if(m._explicit&&S&&m.mutatedParts)for(var O=0,R=Object.values(x.queries.query);O<R.length;O++)for(var L=0,j=(M=R[O]).slice();L<j.length;L++)Pr((T=j[L]).obsSet,m.mutatedParts)&&(fe(M,T),T.subscribers.forEach(function(G){return b.add(G)}));else if(0<E.length){x.optimisticOps=x.optimisticOps.filter(function(G){return G.trans!==m});for(var N=0,K=Object.values(x.queries.query);N<K.length;N++)for(var M,T,F,q=0,D=(M=K[N]).slice();q<D.length;q++)(T=D[q]).res!=null&&m.mutatedParts&&(S&&!T.dirty?(F=Object.isFrozen(T.res),F=Ki(T.res,T.req,E,k,T,F),T.dirty?(fe(M,T),T.subscribers.forEach(function(G){return b.add(G)})):F!==T.res&&(T.res=F,T.promise=U.resolve({result:F}))):(T.dirty&&fe(M,T),T.subscribers.forEach(function(G){return b.add(G)})))}}}b.forEach(function(G){return G()})}}},m.addEventListener("abort",c(!1),{signal:p}),m.addEventListener("error",c(!1),{signal:p}),m.addEventListener("complete",c(!0),{signal:p})),m},table:function(s){var u=e.table(s),c=u.schema.primaryKey;return o(o({},u),{mutate:function(d){var p=z.trans;if(c.outbound||p.db._options.cache==="disabled"||p.explicit)return u.mutate(d);var m=mt["idb://".concat(t,"/").concat(s)];return m?(p=u.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||jr(c,d).some(function(S){return S==null}))?(m.optimisticOps.push(d),d.mutatedParts&&An(d.mutatedParts),p.then(function(S){0<S.numFailures&&(fe(m.optimisticOps,d),(S=Ni(0,d,S))&&m.optimisticOps.push(S),d.mutatedParts&&An(d.mutatedParts))}),p.catch(function(){fe(m.optimisticOps,d),d.mutatedParts&&An(d.mutatedParts)})):p.then(function(S){var b=Ni(0,o(o({},d),{values:d.values.map(function(x,y){var C,x=(C=c.keyPath)!==null&&C!==void 0&&C.includes(".")?re(x):o({},x);return ne(x,c.keyPath,S.results[y]),x})}),S);m.optimisticOps.push(b),queueMicrotask(function(){return d.mutatedParts&&An(d.mutatedParts)})}),p):u.mutate(d)},query:function(d){if(!Li(z,u)||!ji("query",d))return u.query(d);var p=((b=z.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",y=z,m=y.requery,S=y.signal,b=function(k,E,O,R){var L=mt["idb://".concat(k,"/").concat(E)];if(!L)return[];if(!(E=L.queries[O]))return[null,!1,L,null];var j=E[(R.query?R.query.index.name:null)||""];if(!j)return[null,!1,L,null];switch(O){case"query":var N=j.find(function(K){return K.req.limit===R.limit&&K.req.values===R.values&&Ti(K.req.query.range,R.query.range)});return N?[N,!0,L,j]:[j.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=R.limit&&(!R.values||K.req.values)&&ss(K.req.query.range,R.query.range)}),!1,L,j];case"count":return N=j.find(function(K){return Ti(K.req.query.range,R.query.range)}),[N,!!N,L,j]}}(t,s,"query",d),P=b[0],y=b[1],C=b[2],x=b[3];return P&&y?P.obsSet=d.obsSet:(y=u.query(d).then(function(k){var E=k.result;if(P&&(P.res=E),p){for(var O=0,R=E.length;O<R;++O)Object.freeze(E[O]);Object.freeze(E)}else k.result=re(E);return k}).catch(function(k){return x&&P&&fe(x,P),Promise.reject(k)}),P={obsSet:d.obsSet,promise:y,subscribers:new Set,type:"query",req:d,dirty:!1},x?x.push(P):(x=[P],(C=C||(mt["idb://".concat(t,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=x)),as(P,x,m,S),P.promise.then(function(k){return{result:Ki(k.result,d,C==null?void 0:C.optimisticOps,u,P,p)}})}})}})}};function Ln(e,t){return new Proxy(e,{get:function(s,u,c){return u==="db"?t:Reflect.get(s,u,c)}})}var Ge=(ve.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,s=t.filter(function(u){return u._cfg.version===e})[0];return s||(s=new this.Version(e),t.push(s),t.sort(Qo),s.stores({}),this._state.autoSchema=!1,s)},ve.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||z.letThrough||this._vip)?e():new U(function(s,u){if(t._state.openComplete)return u(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void u(new W.DatabaseClosed);t.open().catch(le)}t._state.dbReadyPromise.then(s,u)}).then(e)},ve.prototype.use=function(e){var t=e.stack,s=e.create,u=e.level,c=e.name;return c&&this.unuse({stack:t,name:c}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:s,level:u??10,name:c}),e.sort(function(d,p){return d.level-p.level}),this},ve.prototype.unuse=function(e){var t=e.stack,s=e.name,u=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(c){return u?c.create!==u:!!s&&c.name!==s})),this},ve.prototype.open=function(){var e=this;return dt(tt,function(){return ts(e)})},ve.prototype._close=function(){var e=this._state,t=Ct.indexOf(this);if(0<=t&&Ct.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new U(function(s){e.dbReadyResolve=s}),e.openCanceller=new U(function(s,u){e.cancelOpen=u}))},ve.prototype.close=function(s){var t=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;t?(s.isBeingOpened&&s.cancelOpen(new W.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new W.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},ve.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new U(function(c,d){function p(){t.close(e);var m=t._deps.indexedDB.deleteDatabase(t.name);m.onsuccess=pe(function(){var S,b,P;S=t._deps,b=t.name,P=S.indexedDB,S=S.IDBKeyRange,Sr(P)||b===mn||xr(P,S).delete(b).catch(le),c()}),m.onerror=Ue(d),m.onblocked=t._fireOnBlocked}if(s)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(p):p()})},ve.prototype.backendDB=function(){return this.idbdb},ve.prototype.isOpen=function(){return this.idbdb!==null},ve.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ve.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ve.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ve.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ve.prototype.transaction=function(){var e=(function(t,s,u){var c=arguments.length;if(c<2)throw new W.InvalidArgument("Too few arguments");for(var d=new Array(c-1);--c;)d[c-1]=arguments[c];return u=d.pop(),[t,lt(d),u]}).apply(this,arguments);return this._transaction.apply(this,e)},ve.prototype._transaction=function(e,t,s){var u=this,c=z.trans;c&&c.db===this&&e.indexOf("!")===-1||(c=null);var d,p,m=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(p=t.map(function(b){if(b=b instanceof u.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===lr)d=lr;else{if(e!="rw"&&e!=cr)throw new W.InvalidArgument("Invalid transaction mode: "+e);d=cr}if(c){if(c.mode===lr&&d===cr){if(!m)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&p.forEach(function(b){if(c&&c.storeNames.indexOf(b)===-1){if(!m)throw new W.SubTransaction("Table "+b+" not included in parent transaction.");c=null}}),m&&c&&!c.active&&(c=null)}}catch(b){return c?c._promise(null,function(P,y){y(b)}):ye(b)}var S=(function b(P,y,C,x,k){return U.resolve().then(function(){var E=z.transless||z,O=P._createTransaction(y,C,P._dbSchema,x);if(O.explicit=!0,E={trans:O,transless:E},x)O.idbtrans=x.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,P._state.PR1398_maxLoop=3}catch(j){return j.name===Zn.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return b(P,y,C,null,k)})):ye(j)}var R,L=et(k);return L&&Pt(),E=U.follow(function(){var j;(R=k.call(O,O))&&(L?(j=rt.bind(null,null),R.then(j,j)):typeof R.next=="function"&&typeof R.throw=="function"&&(R=Rr(R)))},E),(R&&typeof R.then=="function"?U.resolve(R).then(function(j){return O.active?j:ye(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return R})).then(function(j){return x&&O._resolve(),O._completion.then(function(){return j})}).catch(function(j){return O._reject(j),ye(j)})})}).bind(null,this,d,p,c,s);return c?c._promise(d,S,"lock"):z.trans?dt(z.transless,function(){return u._whenReady(S)}):this._whenReady(S)},ve.prototype.table=function(e){if(!A(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ve);function ve(e,t){var s=this;this._middlewares={},this.verno=0;var u=ve.dependencies;this._options=t=o({addons:ve.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},u=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,d,p,m,S,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:le,dbReadyPromise:null,cancelOpen:le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new U(function(y){b.dbReadyResolve=y}),b.openCanceller=new U(function(y,C){b.cancelOpen=C}),this._state=b,this.name=e,this.on=Mt(this,"populate","blocked","versionchange","close",{ready:[er,le]}),this.on.ready.subscribe=ce(this.on.ready.subscribe,function(y){return function(C,x){ve.vip(function(){var k,E=s._state;E.openComplete?(E.dbOpenError||U.resolve().then(C),x&&y(C)):E.onReadyBeingFired?(E.onReadyBeingFired.push(C),x&&y(C)):(y(C),k=s,x||y(function O(){k.on.ready.unsubscribe(C),k.on.ready.unsubscribe(O)}))})}}),this.Collection=(c=this,qt(Vo.prototype,function(R,O){this.db=c;var x=di,k=null;if(O)try{x=O()}catch(L){k=L}var E=R._ctx,O=E.table,R=O.hook.reading.fire;this._ctx={table:O,index:E.index,isPrimKey:!E.index||O.schema.primKey.keyPath&&E.index===O.schema.primKey.name,range:x,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:E.or,valueMapper:R!==Tt?R:null}})),this.Table=(d=this,qt(yi.prototype,function(y,C,x){this.db=d,this._tx=x,this.name=y,this.schema=C,this.hook=d._allTables[y]?d._allTables[y].hook:Mt(null,{creating:[To,le],reading:[Ko,Tt],updating:[Io,le],deleting:[$o,le]})})),this.Transaction=(p=this,qt(Wo.prototype,function(y,C,x,k,E){var O=this;this.db=p,this.mode=y,this.storeNames=C,this.schema=x,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=Mt(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(R,L){O._resolve=R,O._reject=L}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(R){var L=O.active;return O.active=!1,O.on.error.fire(R),O.parent?O.parent._reject(R):L&&O.idbtrans&&O.idbtrans.abort(),ye(R)})})),this.Version=(m=this,qt(es.prototype,function(y){this.db=m,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,qt(Si.prototype,function(y,C,x){if(this.db=S,this._ctx={table:y,index:C===":id"?null:C,or:x},this._cmp=this._ascending=ae,this._descending=function(k,E){return ae(E,k)},this._max=function(k,E){return 0<ae(k,E)?k:E},this._min=function(k,E){return ae(k,E)<0?k:E},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=zt(t.IDBKeyRange),this._createTransaction=function(y,C,x,k){return new s.Transaction(y,C,x,s._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(y){s.on("blocked").fire(y),Ct.filter(function(C){return C.name===s.name&&C!==s&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(y)})},this.use(is),this.use(us),this.use(os),this.use(ns),this.use(rs);var P=new Proxy(this,{get:function(y,C,x){if(C==="_vip")return!0;if(C==="table")return function(E){return Ln(s.table(E),P)};var k=Reflect.get(y,C,x);return k instanceof yi?Ln(k,P):C==="tables"?k.map(function(E){return Ln(E,P)}):C==="_createTransaction"?function(){return Ln(k.apply(this,arguments),P)}:k}});this.vip=P,u.forEach(function(y){return y(s)})}var jn,Ie=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ls=(Kr.prototype.subscribe=function(e,t,s){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:s})},Kr.prototype[Ie]=function(){return this},Kr);function Kr(e){this._subscribe=e}try{jn={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{jn={indexedDB:null,IDBKeyRange:null}}function $i(e){var t,s=!1,u=new ls(function(c){var d=et(e),p,m=!1,S={},b={},P={get closed(){return m},unsubscribe:function(){m||(m=!0,p&&p.abort(),y&&st.storagemutated.unsubscribe(x))}};c.start&&c.start(P);var y=!1,C=function(){return ur(k)},x=function(E){En(S,E),Pr(b,S)&&C()},k=function(){var E,O,R;!m&&jn.indexedDB&&(S={},E={},p&&p.abort(),p=new AbortController,R=function(L){var j=Ot();try{d&&Pt();var N=nt(e,L);return N=d?N.finally(rt):N}finally{j&&kt()}}(O={subscr:E,signal:p.signal,requery:C,querier:e,trans:null}),Promise.resolve(R).then(function(L){s=!0,t=L,m||O.signal.aborted||(S={},function(j){for(var N in j)if(A(j,N))return;return 1}(b=E)||y||(st(Ht,x),y=!0),ur(function(){return!m&&c.next&&c.next(L)}))},function(L){s=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||m||ur(function(){m||c.error&&c.error(L)})}))};return setTimeout(C,0),P});return u.hasValue=function(){return s},u.getValue=function(){return t},u}var yt=Ge;function Tr(e){var t=at;try{at=!0,st.storagemutated.fire(e),Ar(e,!0)}finally{at=t}}_(yt,o(o({},an),{delete:function(e){return new yt(e,{addons:[]}).delete()},exists:function(e){return new yt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=yt.dependencies,s=t.indexedDB,t=t.IDBKeyRange,(Sr(s)?Promise.resolve(s.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==mn})}):xr(s,t).toCollection().primaryKeys()).then(e)}catch{return ye(new W.MissingAPI)}var t,s},defineClass:function(){return function(e){g(this,e)}},ignoreTransaction:function(e){return z.trans?dt(z.transless,e):e()},vip:_r,async:function(e){return function(){try{var t=Rr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:U.resolve(t)}catch(s){return ye(s)}}},spawn:function(e,t,s){try{var u=Rr(e.apply(s,t||[]));return u&&typeof u.then=="function"?u:U.resolve(u)}catch(c){return ye(c)}},currentTransaction:{get:function(){return z.trans||null}},waitFor:function(e,t){return t=U.resolve(typeof e=="function"?yt.ignoreTransaction(e):e).timeout(t||6e4),z.trans?z.trans.waitFor(t):t},Promise:U,debug:{get:function(){return qe},set:function(e){si(e)}},derive:I,extend:g,props:_,override:ce,Events:Mt,on:st,liveQuery:$i,extendObservabilitySet:En,getByKeyPath:ue,setByKeyPath:ne,delByKeyPath:function(e,t){typeof t=="string"?ne(e,t,void 0):"length"in t&&[].map.call(t,function(s){ne(e,s,void 0)})},shallowClone:We,deepClone:re,getObjectDiff:Lr,cmp:ae,asap:se,minKey:-1/0,addons:[],connections:Ct,errnames:Zn,dependencies:jn,cache:mt,semVer:"4.0.7",version:"4.0.7".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,s){return e+t/Math.pow(10,2*s)})})),yt.maxKey=zt(yt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(st(Ht,function(e){at||(e=new CustomEvent(pr,{detail:e}),at=!0,dispatchEvent(e),at=!1)}),addEventListener(pr,function(e){e=e.detail,at||Tr(e)}));var Rt,at=!1,Ii=function(){};return typeof BroadcastChannel<"u"&&((Ii=function(){(Rt=new BroadcastChannel(pr)).onmessage=function(e){return e.data&&Tr(e.data)}})(),typeof Rt.unref=="function"&&Rt.unref(),st(Ht,function(e){at||Rt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ge.disableBfCache&&e.persisted){qe&&console.debug("Dexie: handling persisted pagehide"),Rt!=null&&Rt.close();for(var t=0,s=Ct;t<s.length;t++)s[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ge.disableBfCache&&e.persisted&&(qe&&console.debug("Dexie: handling persisted pageshow"),Ii(),Tr({all:new Pe(-1/0,[[]])}))})),U.rejectionMapper=function(e,t){return!e||e instanceof St||e instanceof TypeError||e instanceof SyntaxError||!e.name||!oi[e.name]?e:(t=new oi[e.name](t||e.message,e),"stack"in e&&B(t,"stack",{get:function(){return this.inner.stack}}),t)},si(qe),o(Ge,Object.freeze({__proto__:null,Dexie:Ge,liveQuery:$i,Entity:pi,cmp:ae,PropModSymbol:Ye,PropModification:Ut,replacePrefix:function(e,t){return new Ut({replacePrefix:[e,t]})},add:function(e){return new Ut({add:e})},remove:function(e){return new Ut({remove:e})},default:Ge,RangeSet:Pe,mergeRanges:Yt,rangesOverlap:Cn}),{default:Ge}),Ge})})(Eo);var Ra=Eo.exports;const Jr=Aa(Ra),Ji=Symbol.for("Dexie"),Yr=globalThis[Ji]||(globalThis[Ji]=Jr);if(Jr.semVer!==Yr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Jr.semVer} and ${Yr.semVer}`);const La=[{name:"Dominion",selected:!1},{name:"Renaissance",selected:!1},{name:"Empires",selected:!1}],ja=[{name:"Cellar"},{name:"Chapel"},{name:"Moat"},{name:"Harbinger"},{name:"Merchant"},{name:"Vassal"},{name:"Village"},{name:"Workshop"},{name:"Bureaucrat"},{name:"Gardens"},{name:"Militia"},{name:"Moneylender"},{name:"Poacher"},{name:"Remodel"},{name:"Smithy"},{name:"Throne Room"},{name:"Bandit"},{name:"Council Room"},{name:"Festival"},{name:"Laboratory"},{name:"Library"},{name:"Market"},{name:"Mine"},{name:"Sentry"},{name:"Witch"},{name:"Artisan"}],Na=[{name:"Engineer"},{name:"City Quarter"},{name:"Overlord"},{name:"Royal Blacksmith"},{name:"Encampment/Plunder"},{name:"Patrician/Emporium"},{name:"Settlers/Bustling Village"},{name:"Castles"},{name:"Catapult/Rocks"},{name:"Chariot Race"},{name:"Enchantress"},{name:"Farmers' Market"},{name:"Gladiator/Fortune"},{name:"Sacrifice"},{name:"Temple"},{name:"Villa"},{name:"Archive"},{name:"Capital"},{name:"Charm"},{name:"Crown"},{name:"Forum"},{name:"Groundskeeper"},{name:"Legionary"},{name:"Wild Hunt"}],Ka=[{name:"Border Guard"},{name:"Ducat"},{name:"Lackeys"},{name:"Acting Troupe"},{name:"Cargo Ship"},{name:"Experiment"},{name:"Improve"},{name:"Flag Bearer"},{name:"Hideout"},{name:"Inventor"},{name:"Mountain Village"},{name:"Patron"},{name:"Priest"},{name:"Research"},{name:"Silk Merchant"},{name:"Old Witch"},{name:"Recruiter"},{name:"Scepter"},{name:"Scholar"},{name:"Sculptor"},{name:"Seer"},{name:"Spices"},{name:"Swashbuckler"},{name:"Treasurer"},{name:"Villain"}],qr=i=>n=>({...n,expansionName:i,blacklisted:!1}),Ta=[...ja.map(qr("Dominion")),...Ka.map(qr("Renaissance")),...Na.map(qr("Empires"))],$a=1,Xe=new Yr("dominion");Xe.version($a).stores({expansions:"++id, &name",cards:"++id, &name, expansionId"});async function Ia(){const i=Xe.table("expansions"),n=Xe.table("cards");for(const r of La)await i.get({name:r.name})==null&&await i.add(r);for(const r of Ta){if(await n.get({name:r.name})!=null)continue;const a=await i.get({name:r.expansionName});if(a==null)throw new Error(`Card is set with an expansion name that does not exist, please check, card: ${r.name}, expansion: ${r.expansionName}`);const l=a.id;await n.add({name:r.name,expansionId:l,blacklisted:!1})}}const Yi=()=>{},Da={expansions:Te([])[0],cards:Te(new Map)[0],availableCards:Te([])[0],selectExpansion:Yi,blacklistCard:Yi},Ao=Yn(Da);function Fa(i){const[n,r]=Te([]),[o,a]=Te(new Map),l=Ia();l.then(async()=>await Xe.table("expansions").toArray()).then(r).catch(console.error);const f=w=>w.reduce((A,_)=>{var $;return A.get(_.expansionId)==null&&A.set(_.expansionId,[]),($=A.get(_.expansionId))==null||$.push(_),A},new Map);l.then(async()=>await Xe.table("cards").toArray()).then(f).then(a).catch(console.error);const h=async(w,A)=>{await Xe.table("expansions").where("name").equals(w).modify({selected:A}),r(await Xe.table("expansions").toArray())},g=async(w,A)=>{await Xe.table("cards").where("name").equals(w).modify({blacklisted:A}),a(f(await Xe.table("cards").toArray()))},v=()=>{const w=o();return n().filter($=>$.selected).map($=>w.get($.id)??[]).flat().filter($=>!$.blacklisted)};return me(Ao.Provider,{value:{expansions:n,cards:o,selectExpansion:(w,A)=>{h(w,A)},availableCards:v,blacklistCard:(w,A)=>{g(w,A)}},get children(){return i.children}})}function ri(){return nn(Ao)}const Ba={"selection-list":"_selection-list_1fdt3_1"};var Ma=je("<h1>"),qa=je("<div>"),Ua=je("<label>"),Va=je("<input type=checkbox>");function Ha(){const{expansions:i,selectExpansion:n}=ri(),{t:r}=Qn();return[(()=>{var o=Ma();return Oe(o,()=>r("Set selection")),o})(),(()=>{var o=qa();return Oe(o,me(Un,{get each(){return i()},children:a=>{const l=`expansion-${a.name}`;return[(()=>{var f=Ua();return He(f,"for",l),Oe(f,()=>a.name),f})(),(()=>{var f=Va();return f.addEventListener("change",h=>{n(a.name,h.target.checked)}),He(f,"id",l),ke(()=>f.checked=a.selected),f})()]}})),ke(()=>bt(o,Ba["selection-list"])),o})()]}function za(i){return[...i].splice(0,10)}const Wa={buildKingdom:za};var Ja=je("<h1>"),Ya=je("<ul>"),Ga=je("<li>");function Qa(){const{t:i}=Qn(),{availableCards:n}=ri(),r=()=>{const o=n();return Wa.buildKingdom(o)};return[(()=>{var o=Ja();return Oe(o,()=>i("Kingdom Builder")),o})(),(()=>{var o=Ya();return Oe(o,me(Un,{get each(){return r()},children:a=>(()=>{var l=Ga();return Oe(l,()=>a.name),l})()})),o})()]}const Gi={"expansion-list":"_expansion-list_4bp27_1","card-item":"_card-item_4bp27_5"};var Xa=je("<h1>"),Za=je("<ul>"),eu=je("<li><ul>"),tu=je("<li><label></label><input type=checkbox>");function nu(){const{t:i}=Qn(),{cards:n,expansions:r,blacklistCard:o}=ri();return[(()=>{var a=Xa();return Oe(a,()=>i("Blacklist")),a})(),(()=>{var a=Za();return Oe(a,me(Un,{get each(){return r()},children:l=>(()=>{var f=eu(),h=f.firstChild;return Oe(f,()=>l.name,h),Oe(h,me(Un,{get each(){return n().get(l.id)},children:g=>(()=>{var v=tu(),w=v.firstChild,A=w.nextSibling;return Oe(w,()=>g.name),A.addEventListener("change",_=>{o(g.name,_.target.checked)}),ke(_=>{var $=Gi["card-item"],B=g.name,I=g.name;return $!==_.e&&bt(v,_.e=$),B!==_.t&&He(w,"for",_.t=B),I!==_.a&&He(A,"id",_.a=I),_},{e:void 0,t:void 0,a:void 0}),ke(()=>A.checked=g.blacklisted),v})()})),ke(()=>He(h,"aria-label",i("Cards within {{expansion}}",{expansion:l.name}))),f})()})),ke(l=>{var f=i("Expansions"),h=Gi["expansion-list"];return f!==l.e&&He(a,"aria-label",l.e=f),h!==l.t&&bt(a,l.t=h),l},{e:void 0,t:void 0}),a})()]}const ru=[{path:"/",component:Ea,children:[{path:"/",component:Ha},{path:"/blacklist",component:nu},{path:"/kingdom",component:Qa}]}];function iu(){return me(Fa,{get children(){return me(va,{get base(){return"/jack-of-all-dominion-2"},children:ru})}})}const ou={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,n){console&&console[i]&&console[i].apply(console,n)}};class Vn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,r)}init(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||ou,this.options=r,this.debug=r.debug}log(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"log","",!0)}warn(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"warn","",!0)}error(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"error","")}deprecate(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(n,r,o,a){return a&&!this.debug?null:(typeof n[0]=="string"&&(n[0]=`${o}${this.prefix} ${n[0]}`),this.logger[r](n))}create(n){return new Vn(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new Vn(this.logger,n)}}var ze=new Vn;class Xn{constructor(){this.observers={}}on(n,r){return n.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const a=this.observers[o].get(r)||0;this.observers[o].set(r,a+1)}),this}off(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n].delete(r)}}emit(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(f=>{let[h,g]=f;for(let v=0;v<g;v++)h(...o)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(f=>{let[h,g]=f;for(let v=0;v<g;v++)h.apply(h,[n,...o])})}}function Gt(){let i,n;const r=new Promise((o,a)=>{i=o,n=a});return r.resolve=i,r.reject=n,r}function Qi(i){return i==null?"":""+i}function su(i,n,r){i.forEach(o=>{n[o]&&(r[o]=n[o])})}const au=/###/g;function Xt(i,n,r){function o(h){return h&&h.indexOf("###")>-1?h.replace(au,"."):h}function a(){return!i||typeof i=="string"}const l=typeof n!="string"?n:n.split(".");let f=0;for(;f<l.length-1;){if(a())return{};const h=o(l[f]);!i[h]&&r&&(i[h]=new r),Object.prototype.hasOwnProperty.call(i,h)?i=i[h]:i={},++f}return a()?{}:{obj:i,k:o(l[f])}}function Xi(i,n,r){const{obj:o,k:a}=Xt(i,n,Object);if(o!==void 0||n.length===1){o[a]=r;return}let l=n[n.length-1],f=n.slice(0,n.length-1),h=Xt(i,f,Object);for(;h.obj===void 0&&f.length;)l=`${f[f.length-1]}.${l}`,f=f.slice(0,f.length-1),h=Xt(i,f,Object),h&&h.obj&&typeof h.obj[`${h.k}.${l}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${l}`]=r}function uu(i,n,r,o){const{obj:a,k:l}=Xt(i,n,Object);a[l]=a[l]||[],a[l].push(r)}function Hn(i,n){const{obj:r,k:o}=Xt(i,n);if(r)return r[o]}function lu(i,n,r){const o=Hn(i,r);return o!==void 0?o:Hn(n,r)}function Ro(i,n,r){for(const o in n)o!=="__proto__"&&o!=="constructor"&&(o in i?typeof i[o]=="string"||i[o]instanceof String||typeof n[o]=="string"||n[o]instanceof String?r&&(i[o]=n[o]):Ro(i[o],n[o],r):i[o]=n[o]);return i}function jt(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var cu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function fu(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,n=>cu[n]):i}class hu{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const r=this.regExpMap.get(n);if(r!==void 0)return r;const o=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,o),this.regExpQueue.push(n),o}}const du=[" ",",","?","!",";"],pu=new hu(20);function gu(i,n,r){n=n||"",r=r||"";const o=du.filter(f=>n.indexOf(f)<0&&r.indexOf(f)<0);if(o.length===0)return!0;const a=pu.getRegExp(`(${o.map(f=>f==="?"?"\\?":f).join("|")})`);let l=!a.test(i);if(!l){const f=i.indexOf(r);f>0&&!a.test(i.substring(0,f))&&(l=!0)}return l}function Gr(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[n])return i[n];const o=n.split(r);let a=i;for(let l=0;l<o.length;){if(!a||typeof a!="object")return;let f,h="";for(let g=l;g<o.length;++g)if(g!==l&&(h+=r),h+=o[g],f=a[h],f!==void 0){if(["string","number","boolean"].indexOf(typeof f)>-1&&g<o.length-1)continue;l+=g-l+1;break}a=f}return a}function zn(i){return i&&i.indexOf("_")>0?i.replace("_","-"):i}class Zi extends Xn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const r=this.options.ns.indexOf(n);r>-1&&this.options.ns.splice(r,1)}getResource(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,f=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;n.indexOf(".")>-1?h=n.split("."):(h=[n,r],o&&(Array.isArray(o)?h.push(...o):typeof o=="string"&&l?h.push(...o.split(l)):h.push(o)));const g=Hn(this.data,h);return!g&&!r&&!o&&n.indexOf(".")>-1&&(n=h[0],r=h[1],o=h.slice(2).join(".")),g||!f||typeof o!="string"?g:Gr(this.data&&this.data[n]&&this.data[n][r],o,l)}addResource(n,r,o,a){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const f=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let h=[n,r];o&&(h=h.concat(f?o.split(f):o)),n.indexOf(".")>-1&&(h=n.split("."),a=r,r=h[1]),this.addNamespaces(r),Xi(this.data,h,a),l.silent||this.emit("added",n,r,o,a)}addResources(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(n,r,l,o[l],{silent:!0});a.silent||this.emit("added",n,r,o)}addResourceBundle(n,r,o,a,l){let f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},h=[n,r];n.indexOf(".")>-1&&(h=n.split("."),a=o,o=r,r=h[1]),this.addNamespaces(r);let g=Hn(this.data,h)||{};f.skipCopy||(o=JSON.parse(JSON.stringify(o))),a?Ro(g,o,l):g={...g,...o},Xi(this.data,h,g),f.silent||this.emit("added",n,r,o)}removeResourceBundle(n,r){this.hasResourceBundle(n,r)&&delete this.data[n][r],this.removeNamespaces(r),this.emit("removed",n,r)}hasResourceBundle(n,r){return this.getResource(n,r)!==void 0}getResourceBundle(n,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(n,r)}:this.getResource(n,r)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const r=this.getDataByLanguage(n);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var Lo={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,n,r,o,a){return i.forEach(l=>{this.processors[l]&&(n=this.processors[l].process(n,r,o,a))}),n}};const eo={};class Wn extends Xn{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),su(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ze.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const o=this.resolve(n,r);return o&&o.res!==void 0}extractFromKey(n,r){let o=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=r.ns||this.options.defaultNS||[];const f=o&&n.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!gu(n,o,a);if(f&&!h){const g=n.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:n,namespaces:l};const v=n.split(o);(o!==a||o===a&&this.options.ns.indexOf(v[0])>-1)&&(l=v.shift()),n=v.join(a)}return typeof l=="string"&&(l=[l]),{key:n,namespaces:l}}translate(n,r,o){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:f,namespaces:h}=this.extractFromKey(n[n.length-1],r),g=h[h.length-1],v=r.lng||this.language,w=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v&&v.toLowerCase()==="cimode"){if(w){const J=r.nsSeparator||this.options.nsSeparator;return a?{res:`${g}${J}${f}`,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(r)}:`${g}${J}${f}`}return a?{res:f,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(r)}:f}const A=this.resolve(n,r);let _=A&&A.res;const $=A&&A.usedKey||f,B=A&&A.exactUsedKey||f,I=Object.prototype.toString.apply(_),V=["[object Number]","[object Function]","[object RegExp]"],Y=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,H=!this.i18nFormat||this.i18nFormat.handleAsObject;if(H&&_&&(typeof _!="string"&&typeof _!="boolean"&&typeof _!="number")&&V.indexOf(I)<0&&!(typeof Y=="string"&&I==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const J=this.options.returnedObjectHandler?this.options.returnedObjectHandler($,_,{...r,ns:h}):`key '${f} (${this.language})' returned an object instead of string.`;return a?(A.res=J,A.usedParams=this.getUsedParamsDetails(r),A):J}if(l){const J=I==="[object Array]",se=J?[]:{},ue=J?B:$;for(const ne in _)if(Object.prototype.hasOwnProperty.call(_,ne)){const We=`${ue}${l}${ne}`;se[ne]=this.translate(We,{...r,joinArrays:!1,ns:h}),se[ne]===We&&(se[ne]=_[ne])}_=se}}else if(H&&typeof Y=="string"&&I==="[object Array]")_=_.join(Y),_&&(_=this.extendTranslation(_,n,r,o));else{let J=!1,se=!1;const ue=r.count!==void 0&&typeof r.count!="string",ne=Wn.hasDefaultValue(r),We=ue?this.pluralResolver.getSuffix(v,r.count,r):"",Kt=r.ordinal&&ue?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",lt=ue&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),Me=lt&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${We}`]||r[`defaultValue${Kt}`]||r.defaultValue;!this.isValidLookup(_)&&ne&&(J=!0,_=Me),this.isValidLookup(_)||(se=!0,_=f);const re=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:_,we=ne&&Me!==_&&this.options.updateMissing;if(se||J||we){if(this.logger.log(we?"updateKey":"missingKey",v,g,f,we?Me:_),l){const fe=this.resolve(f,{...r,keySeparator:!1});fe&&fe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ne=[];const $e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$e&&$e[0])for(let fe=0;fe<$e.length;fe++)Ne.push($e[fe]);else this.options.saveMissingTo==="all"?Ne=this.languageUtils.toResolveHierarchy(r.lng||this.language):Ne.push(r.lng||this.language);const Fe=(fe,ge,xe)=>{const et=ne&&xe!==_?xe:re;this.options.missingKeyHandler?this.options.missingKeyHandler(fe,g,ge,et,we,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(fe,g,ge,et,we,r),this.emit("missingKey",fe,g,ge,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ue?Ne.forEach(fe=>{const ge=this.pluralResolver.getSuffixes(fe,r);lt&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&ge.push(`${this.options.pluralSeparator}zero`),ge.forEach(xe=>{Fe([fe],f+xe,r[`defaultValue${xe}`]||Me)})}):Fe(Ne,f,Me))}_=this.extendTranslation(_,n,r,A,o),se&&_===f&&this.options.appendNamespaceToMissingKey&&(_=`${g}:${f}`),(se||J)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}:${f}`:f,J?_:void 0):_=this.options.parseMissingKeyHandler(_))}return a?(A.res=_,A.usedParams=this.getUsedParamsDetails(r),A):_}extendTranslation(n,r,o,a,l){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const v=typeof n=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let w;if(v){const _=n.match(this.interpolator.nestingRegexp);w=_&&_.length}let A=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(A={...this.options.interpolation.defaultVariables,...A}),n=this.interpolator.interpolate(n,A,o.lng||this.language,o),v){const _=n.match(this.interpolator.nestingRegexp),$=_&&_.length;w<$&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(o.lng=a.usedLng),o.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var _=arguments.length,$=new Array(_),B=0;B<_;B++)$[B]=arguments[B];return l&&l[0]===$[0]&&!o.context?(f.logger.warn(`It seems you are nesting recursively key: ${$[0]} in key: ${r[0]}`),null):f.translate(...$,r)},o)),o.interpolation&&this.interpolator.reset()}const h=o.postProcess||this.options.postProcess,g=typeof h=="string"?[h]:h;return n!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(n=Lo.handle(g,n,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),n}resolve(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,a,l,f,h;return typeof n=="string"&&(n=[n]),n.forEach(g=>{if(this.isValidLookup(o))return;const v=this.extractFromKey(g,r),w=v.key;a=w;let A=v.namespaces;this.options.fallbackNS&&(A=A.concat(this.options.fallbackNS));const _=r.count!==void 0&&typeof r.count!="string",$=_&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),B=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",I=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);A.forEach(V=>{this.isValidLookup(o)||(h=V,!eo[`${I[0]}-${V}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(h)&&(eo[`${I[0]}-${V}`]=!0,this.logger.warn(`key "${a}" for languages "${I.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(Y=>{if(this.isValidLookup(o))return;f=Y;const H=[w];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(H,w,Y,V,r);else{let J;_&&(J=this.pluralResolver.getSuffix(Y,r.count,r));const se=`${this.options.pluralSeparator}zero`,ue=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(_&&(H.push(w+J),r.ordinal&&J.indexOf(ue)===0&&H.push(w+J.replace(ue,this.options.pluralSeparator)),$&&H.push(w+se)),B){const ne=`${w}${this.options.contextSeparator}${r.context}`;H.push(ne),_&&(H.push(ne+J),r.ordinal&&J.indexOf(ue)===0&&H.push(ne+J.replace(ue,this.options.pluralSeparator)),$&&H.push(ne+se))}}let ce;for(;ce=H.pop();)this.isValidLookup(o)||(l=ce,o=this.getResource(Y,V,ce,r))}))})}),{res:o,usedKey:a,exactUsedKey:l,usedLng:f,usedNS:h}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,r,o,a):this.resourceStore.getResource(n,r,o,a)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=n.replace&&typeof n.replace!="string";let a=o?n.replace:n;if(o&&typeof n.count<"u"&&(a.count=n.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!o){a={...a};for(const l of r)delete a[l]}return a}static hasDefaultValue(n){const r="defaultValue";for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&r===o.substring(0,r.length)&&n[o]!==void 0)return!0;return!1}}function Ur(i){return i.charAt(0).toUpperCase()+i.slice(1)}class to{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ze.create("languageUtils")}getScriptPartFromCode(n){if(n=zn(n),!n||n.indexOf("-")<0)return null;const r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(n){if(n=zn(n),!n||n.indexOf("-")<0)return n;const r=n.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(n){if(typeof n=="string"&&n.indexOf("-")>-1){const r=["hans","hant","latn","cyrl","cans","mong","arab"];let o=n.split("-");return this.options.lowerCaseLng?o=o.map(a=>a.toLowerCase()):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),r.indexOf(o[1].toLowerCase())>-1&&(o[1]=Ur(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),r.indexOf(o[1].toLowerCase())>-1&&(o[1]=Ur(o[1].toLowerCase())),r.indexOf(o[2].toLowerCase())>-1&&(o[2]=Ur(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let r;return n.forEach(o=>{if(r)return;const a=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&n.forEach(o=>{if(r)return;const a=this.getLanguagePartFromCode(o);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];let o=n[r];return o||(o=n[this.getScriptPartFromCode(r)]),o||(o=n[this.formatLanguageCode(r)]),o||(o=n[this.getLanguagePartFromCode(r)]),o||(o=n.default),o||[]}toResolveHierarchy(n,r){const o=this.getFallbackCodes(r||this.options.fallbackLng||[],n),a=[],l=f=>{f&&(this.isSupportedCode(f)?a.push(f):this.logger.warn(`rejecting language code not found in supportedLngs: ${f}`))};return typeof n=="string"&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(n))):typeof n=="string"&&l(this.formatLanguageCode(n)),o.forEach(f=>{a.indexOf(f)<0&&l(this.formatLanguageCode(f))}),a}}let mu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],yu={1:function(i){return+(i>1)},2:function(i){return+(i!=1)},3:function(i){return 0},4:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},5:function(i){return i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5},6:function(i){return i==1?0:i>=2&&i<=4?1:2},7:function(i){return i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},8:function(i){return i==1?0:i==2?1:i!=8&&i!=11?2:3},9:function(i){return+(i>=2)},10:function(i){return i==1?0:i==2?1:i<7?2:i<11?3:4},11:function(i){return i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3},12:function(i){return+(i%10!=1||i%100==11)},13:function(i){return+(i!==0)},14:function(i){return i==1?0:i==2?1:i==3?2:3},15:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2},16:function(i){return i%10==1&&i%100!=11?0:i!==0?1:2},17:function(i){return i==1||i%10==1&&i%100!=11?0:1},18:function(i){return i==0?0:i==1?1:2},19:function(i){return i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3},20:function(i){return i==1?0:i==0||i%100>0&&i%100<20?1:2},21:function(i){return i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0},22:function(i){return i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3}};const vu=["v1","v2","v3"],bu=["v4"],no={zero:0,one:1,two:2,few:3,many:4,other:5};function wu(){const i={};return mu.forEach(n=>{n.lngs.forEach(r=>{i[r]={numbers:n.nr,plurals:yu[n.fc]}})}),i}class xu{constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=r,this.logger=ze.create("pluralResolver"),(!this.options.compatibilityJSON||bu.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=wu()}addRule(n,r){this.rules[n]=r}getRule(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(zn(n==="dev"?"en":n),{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}needsPlural(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getRule(n,r);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}getPluralFormsOfKey(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,o).map(a=>`${r}${a}`)}getSuffixes(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getRule(n,r);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort((a,l)=>no[a]-no[l]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):o.numbers.map(a=>this.getSuffix(n,a,r)):[]}getSuffix(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(n,o);return a?this.shouldUseIntlApi()?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:this.getSuffixRetroCompatible(a,r):(this.logger.warn(`no plural rule found for: ${n}`),"")}getSuffixRetroCompatible(n,r){const o=n.noAbs?n.plurals(r):n.plurals(Math.abs(r));let a=n.numbers[o];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const l=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?l():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}shouldUseIntlApi(){return!vu.includes(this.options.compatibilityJSON)}}function ro(i,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=lu(i,n,r);return!l&&a&&typeof r=="string"&&(l=Gr(i,r,o),l===void 0&&(l=Gr(n,r,o))),l}class Su{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ze.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||(r=>r),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:r,escapeValue:o,useRawValueToEscape:a,prefix:l,prefixEscaped:f,suffix:h,suffixEscaped:g,formatSeparator:v,unescapeSuffix:w,unescapePrefix:A,nestingPrefix:_,nestingPrefixEscaped:$,nestingSuffix:B,nestingSuffixEscaped:I,nestingOptionsSeparator:V,maxReplaces:Y,alwaysFormat:H}=n.interpolation;this.escape=r!==void 0?r:fu,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=l?jt(l):f||"{{",this.suffix=h?jt(h):g||"}}",this.formatSeparator=v||",",this.unescapePrefix=w?"":A||"-",this.unescapeSuffix=this.unescapePrefix?"":w||"",this.nestingPrefix=_?jt(_):$||jt("$t("),this.nestingSuffix=B?jt(B):I||jt(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=Y||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(r,o)=>r&&r.source===o?(r.lastIndex=0,r):new RegExp(o,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,r,o,a){let l,f,h;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function v(B){return B.replace(/\$/g,"$$$$")}const w=B=>{if(B.indexOf(this.formatSeparator)<0){const H=ro(r,g,B,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(H,void 0,o,{...a,...r,interpolationkey:B}):H}const I=B.split(this.formatSeparator),V=I.shift().trim(),Y=I.join(this.formatSeparator).trim();return this.format(ro(r,g,V,this.options.keySeparator,this.options.ignoreJSONStructure),Y,o,{...a,...r,interpolationkey:V})};this.resetRegExp();const A=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,_=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:B=>v(B)},{regex:this.regexp,safeValue:B=>this.escapeValue?v(this.escape(B)):v(B)}].forEach(B=>{for(h=0;l=B.regex.exec(n);){const I=l[1].trim();if(f=w(I),f===void 0)if(typeof A=="function"){const Y=A(n,l,a);f=typeof Y=="string"?Y:""}else if(a&&Object.prototype.hasOwnProperty.call(a,I))f="";else if(_){f=l[0];continue}else this.logger.warn(`missed to pass in variable ${I} for interpolating ${n}`),f="";else typeof f!="string"&&!this.useRawValueToEscape&&(f=Qi(f));const V=B.safeValue(f);if(n=n.replace(l[0],V),_?(B.regex.lastIndex+=f.length,B.regex.lastIndex-=l[0].length):B.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),n}nest(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,l,f;function h(g,v){const w=this.nestingOptionsSeparator;if(g.indexOf(w)<0)return g;const A=g.split(new RegExp(`${w}[ ]*{`));let _=`{${A[1]}`;g=A[0],_=this.interpolate(_,f);const $=_.match(/'/g),B=_.match(/"/g);($&&$.length%2===0&&!B||B.length%2!==0)&&(_=_.replace(/'/g,'"'));try{f=JSON.parse(_),v&&(f={...v,...f})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,I),`${g}${w}${_}`}return f.defaultValue&&f.defaultValue.indexOf(this.prefix)>-1&&delete f.defaultValue,g}for(;a=this.nestingRegexp.exec(n);){let g=[];f={...o},f=f.replace&&typeof f.replace!="string"?f.replace:f,f.applyPostProcessor=!1,delete f.defaultValue;let v=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const w=a[1].split(this.formatSeparator).map(A=>A.trim());a[1]=w.shift(),g=w,v=!0}if(l=r(h.call(this,a[1].trim(),f),f),l&&a[0]===n&&typeof l!="string")return l;typeof l!="string"&&(l=Qi(l)),l||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${n}`),l=""),v&&(l=g.reduce((w,A)=>this.format(w,A,o.lng,{...o,interpolationkey:a[1].trim()}),l.trim())),n=n.replace(a[0],l),this.regexp.lastIndex=0}return n}}function _u(i){let n=i.toLowerCase().trim();const r={};if(i.indexOf("(")>-1){const o=i.split("(");n=o[0].toLowerCase().trim();const a=o[1].substring(0,o[1].length-1);n==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):n==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(f=>{if(!f)return;const[h,...g]=f.split(":"),v=g.join(":").trim().replace(/^'+|'+$/g,"");r[h.trim()]||(r[h.trim()]=v),v==="false"&&(r[h.trim()]=!1),v==="true"&&(r[h.trim()]=!0),isNaN(v)||(r[h.trim()]=parseInt(v,10))})}return{formatName:n,formatOptions:r}}function Nt(i){const n={};return function(o,a,l){const f=a+JSON.stringify(l);let h=n[f];return h||(h=i(zn(a),l),n[f]=h),h(o)}}class Ou{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ze.create("formatter"),this.options=n,this.formats={number:Nt((r,o)=>{const a=new Intl.NumberFormat(r,{...o});return l=>a.format(l)}),currency:Nt((r,o)=>{const a=new Intl.NumberFormat(r,{...o,style:"currency"});return l=>a.format(l)}),datetime:Nt((r,o)=>{const a=new Intl.DateTimeFormat(r,{...o});return l=>a.format(l)}),relativetime:Nt((r,o)=>{const a=new Intl.RelativeTimeFormat(r,{...o});return l=>a.format(l,o.range||"day")}),list:Nt((r,o)=>{const a=new Intl.ListFormat(r,{...o});return l=>a.format(l)})},this.init(n)}init(n){const o=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}add(n,r){this.formats[n.toLowerCase().trim()]=r}addCached(n,r){this.formats[n.toLowerCase().trim()]=Nt(r)}format(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((h,g)=>{const{formatName:v,formatOptions:w}=_u(g);if(this.formats[v]){let A=h;try{const _=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},$=_.locale||_.lng||a.locale||a.lng||o;A=this.formats[v](h,$,{...w,...a,..._})}catch(_){this.logger.warn(_)}return A}else this.logger.warn(`there was no format function for ${v}`);return h},n)}}function ku(i,n){i.pending[n]!==void 0&&(delete i.pending[n],i.pendingCount--)}class Pu extends Xn{constructor(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=r,this.services=o,this.languageUtils=o.languageUtils,this.options=a,this.logger=ze.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(o,a.backend,a)}queueLoad(n,r,o,a){const l={},f={},h={},g={};return n.forEach(v=>{let w=!0;r.forEach(A=>{const _=`${v}|${A}`;!o.reload&&this.store.hasResourceBundle(v,A)?this.state[_]=2:this.state[_]<0||(this.state[_]===1?f[_]===void 0&&(f[_]=!0):(this.state[_]=1,w=!1,f[_]===void 0&&(f[_]=!0),l[_]===void 0&&(l[_]=!0),g[A]===void 0&&(g[A]=!0)))}),w||(h[v]=!0)}),(Object.keys(l).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(f),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(g)}}loaded(n,r,o){const a=n.split("|"),l=a[0],f=a[1];r&&this.emit("failedLoading",l,f,r),o&&this.store.addResourceBundle(l,f,o,void 0,void 0,{skipCopy:!0}),this.state[n]=r?-1:2;const h={};this.queue.forEach(g=>{uu(g.loaded,[l],f),ku(g,n),r&&g.errors.push(r),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(v=>{h[v]||(h[v]={});const w=g.loaded[v];w.length&&w.forEach(A=>{h[v][A]===void 0&&(h[v][A]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(g=>!g.done)}read(n,r,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,f=arguments.length>5?arguments[5]:void 0;if(!n.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:r,fcName:o,tried:a,wait:l,callback:f});return}this.readingCalls++;const h=(v,w)=>{if(this.readingCalls--,this.waitingReads.length>0){const A=this.waitingReads.shift();this.read(A.lng,A.ns,A.fcName,A.tried,A.wait,A.callback)}if(v&&w&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,n,r,o,a+1,l*2,f)},l);return}f(v,w)},g=this.backend[o].bind(this.backend);if(g.length===2){try{const v=g(n,r);v&&typeof v.then=="function"?v.then(w=>h(null,w)).catch(h):h(null,v)}catch(v){h(v)}return}return g(n,r,h)}prepareLoading(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof r=="string"&&(r=[r]);const l=this.queueLoad(n,r,o,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach(f=>{this.loadOne(f)})}load(n,r,o){this.prepareLoading(n,r,{},o)}reload(n,r,o){this.prepareLoading(n,r,{reload:!0},o)}loadOne(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const o=n.split("|"),a=o[0],l=o[1];this.read(a,l,"read",void 0,void 0,(f,h)=>{f&&this.logger.warn(`${r}loading namespace ${l} for language ${a} failed`,f),!f&&h&&this.logger.log(`${r}loaded namespace ${l} for language ${a}`,h),this.loaded(n,f,h)})}saveMissing(n,r,o,a,l){let f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${o}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){const g={...f,isUpdate:l},v=this.backend.create.bind(this.backend);if(v.length<6)try{let w;v.length===5?w=v(n,r,o,a,g):w=v(n,r,o,a),w&&typeof w.then=="function"?w.then(A=>h(null,A)).catch(h):h(null,w)}catch(w){h(w)}else v(n,r,o,a,h,g)}!n||!n[0]||this.store.addResource(n[0],r,o,a)}}}function io(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(n){let r={};if(typeof n[1]=="object"&&(r=n[1]),typeof n[1]=="string"&&(r.defaultValue=n[1]),typeof n[2]=="string"&&(r.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const o=n[3]||n[2];Object.keys(o).forEach(a=>{r[a]=o[a]})}return r},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function oo(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function $n(){}function Cu(i){Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(r=>{typeof i[r]=="function"&&(i[r]=i[r].bind(i))})}class en extends Xn{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=oo(n),this.services={},this.logger=ze,this.modules={external:[]},Cu(this),r&&!this.isInitialized&&!n.isClone){if(!this.options.initImmediate)return this.init(n,r),this;setTimeout(()=>{this.init(n,r)},0)}}init(){var n=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(o=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const a=io();this.options={...a,...this.options,...oo(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function l(w){return w?typeof w=="function"?new w:w:null}if(!this.options.isClone){this.modules.logger?ze.init(l(this.modules.logger),this.options):ze.init(null,this.options);let w;this.modules.formatter?w=this.modules.formatter:typeof Intl<"u"&&(w=Ou);const A=new to(this.options);this.store=new Zi(this.options.resources,this.options);const _=this.services;_.logger=ze,_.resourceStore=this.store,_.languageUtils=A,_.pluralResolver=new xu(A,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),w&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(_.formatter=l(w),_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Su(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new Pu(l(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",function($){for(var B=arguments.length,I=new Array(B>1?B-1:0),V=1;V<B;V++)I[V-1]=arguments[V];n.emit($,...I)}),this.modules.languageDetector&&(_.languageDetector=l(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=l(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new Wn(this.services,this.options),this.translator.on("*",function($){for(var B=arguments.length,I=new Array(B>1?B-1:0),V=1;V<B;V++)I[V-1]=arguments[V];n.emit($,...I)}),this.modules.external.forEach($=>{$.init&&$.init(this)})}if(this.format=this.options.interpolation.format,o||(o=$n),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const w=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);w.length>0&&w[0]!=="dev"&&(this.options.lng=w[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(w=>{this[w]=function(){return n.store[w](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(w=>{this[w]=function(){return n.store[w](...arguments),n}});const g=Gt(),v=()=>{const w=(A,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),g.resolve(_),o(A,_)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return w(null,this.t.bind(this));this.changeLanguage(this.options.lng,w)};return this.options.resources||!this.options.initImmediate?v():setTimeout(v,0),g}loadResources(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$n;const a=typeof n=="string"?n:this.language;if(typeof n=="function"&&(o=n),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const l=[],f=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(v=>{v!=="cimode"&&l.indexOf(v)<0&&l.push(v)})};a?f(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>f(g)),this.options.preload&&this.options.preload.forEach(h=>f(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(n,r,o){const a=Gt();return n||(n=this.languages),r||(r=this.options.ns),o||(o=$n),this.services.backendConnector.reload(n,r,l=>{a.resolve(),o(l)}),a}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&Lo.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(let r=0;r<this.languages.length;r++){const o=this.languages[r];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}changeLanguage(n,r){var o=this;this.isLanguageChangingTo=n;const a=Gt();this.emit("languageChanging",n);const l=g=>{this.language=g,this.languages=this.services.languageUtils.toResolveHierarchy(g),this.resolvedLanguage=void 0,this.setResolvedLanguage(g)},f=(g,v)=>{v?(l(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,a.resolve(function(){return o.t(...arguments)}),r&&r(g,function(){return o.t(...arguments)})},h=g=>{!n&&!g&&this.services.languageDetector&&(g=[]);const v=typeof g=="string"?g:this.services.languageUtils.getBestMatchFromCodes(g);v&&(this.language||l(v),this.translator.language||this.translator.changeLanguage(v),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(v)),this.loadResources(v,w=>{f(w,v)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(n),a}getFixedT(n,r,o){var a=this;const l=function(f,h){let g;if(typeof h!="object"){for(var v=arguments.length,w=new Array(v>2?v-2:0),A=2;A<v;A++)w[A-2]=arguments[A];g=a.options.overloadTranslationOptionHandler([f,h].concat(w))}else g={...h};g.lng=g.lng||l.lng,g.lngs=g.lngs||l.lngs,g.ns=g.ns||l.ns,g.keyPrefix=g.keyPrefix||o||l.keyPrefix;const _=a.options.keySeparator||".";let $;return g.keyPrefix&&Array.isArray(f)?$=f.map(B=>`${g.keyPrefix}${_}${B}`):$=g.keyPrefix?`${g.keyPrefix}${_}${f}`:f,a.t($,g)};return typeof n=="string"?l.lng=n:l.lngs=n,l.ns=r,l.keyPrefix=o,l}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const f=(h,g)=>{const v=this.services.backendConnector.state[`${h}|${g}`];return v===-1||v===2};if(r.precheck){const h=r.precheck(this,f);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,n)&&(!a||f(l,n)))}loadNamespaces(n,r){const o=Gt();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{o.resolve(),r&&r(a)}),o):(r&&r(),Promise.resolve())}loadLanguages(n,r){const o=Gt();typeof n=="string"&&(n=[n]);const a=this.options.preload||[],l=n.filter(f=>a.indexOf(f)<0&&this.services.languageUtils.isSupportedCode(f));return l.length?(this.options.preload=a.concat(l),this.loadResources(f=>{o.resolve(),r&&r(f)}),o):(r&&r(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new to(io());return r.indexOf(o.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new en(n,r)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$n;const o=n.forkResourceStore;o&&delete n.forkResourceStore;const a={...this.options,...n,isClone:!0},l=new en(a);return(n.debug!==void 0||n.prefix!==void 0)&&(l.logger=l.logger.clone(n)),["store","services","language"].forEach(h=>{l[h]=this[h]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},o&&(l.store=new Zi(this.store.data,a),l.services.resourceStore=l.store),l.translator=new Wn(l.services,a),l.translator.on("*",function(h){for(var g=arguments.length,v=new Array(g>1?g-1:0),w=1;w<g;w++)v[w-1]=arguments[w];l.emit(h,...v)}),l.init(a,r),l.translator.options=a,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Re=en.createInstance();Re.createInstance=en.createInstance;Re.createInstance;Re.dir;Re.init;Re.loadResources;Re.reloadResources;Re.use;Re.changeLanguage;Re.getFixedT;Re.t;Re.exists;Re.setDefaultNamespace;Re.hasLoadedNamespace;Re.loadNamespaces;Re.loadLanguages;const Eu=document.getElementById("root"),Au=Object.keys(Hi).reduce((i,n)=>(i[n]={translation:Hi[n]},i),{});Re.init({lng:"en",fallbackLng:"en",resources:Au}).then(i=>{js(()=>me(xa,{t:i,get children(){return me(iu,{})}}),Eu)}).catch(console.error);
